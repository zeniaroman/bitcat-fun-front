"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[9378],{71241:function(e,a){a.A=(e,a)=>{const t=e.__vccOpts||e;for(const[n,s]of a)t[n]=s;return t}},87437:function(e,a,t){t.d(a,{A:function(){return X}});t(44114);var n=t(56768),s=t(45130),l=t(24232),i=t(90144),o=t(4249),c=t(81387);const g={class:"agents-list-container"},r={class:"agents-content"},u={class:"agents-header"},d={class:"agents-header-section-left"},v={key:0,class:"agents-list"},m={key:1,class:"find-agent-section"},p={key:2,class:"agents-list"},k={class:"agent-info"},h=["src","alt"],f={class:"agent-details"},L=["onClick"],T={key:0,class:"agent-last-message-ago"},y={class:"agent-actions"},A=["onClick"],_=["onClick"],C={key:0,class:"delete-confirmation"},b={class:"delete-confirmation-content"},w={class:"delete-confirmation-buttons"},I=["onClick"],E={class:"find-agent-section"};var S={__name:"AiAgentsList",props:{isLightTheme:{type:Boolean,default:!1}},emits:["close","select-agent"],setup(e,{emit:a}){const t=(0,c.rd)(),S=(0,o.Pj)(),B=(0,i.KR)(null),W=e=>{S.commit("TOGGLE_CHAT",!1),t.push(e)},X=a,N=(0,i.KR)(!0),O=(0,n.EW)((()=>S.getters.chatAgents)),R=(0,n.EW)((()=>S.getters.agentsListOpen)),H=()=>{S.commit("TOGGLE_AGENTS_LIST",!1),X("close")},K=e=>`https://bitcat.fun/data/ai-agents/bitcat-ai-agent-avatar-${e}.png`,U=e=>S.getters.currentAgent?.agentTag===e.agentTag,F=e=>{const a=JSON.parse(localStorage.getItem("chatHistory")||"{}"),t=a[e]||[],n=t[t.length-1]?.timestamp;if(!n)return"";const s=Date.now(),l="string"===typeof n?new Date(n).getTime():n,i=s-l,o=Math.floor(i/6e4);return o<60?`${o||1}m`:o<1440?`${Math.floor(o/60)}h`:`${Math.floor(o/1440)}d`};setInterval((()=>{(0,n.dY)()}),6e4);const G=e=>{S.commit("SELECT_AGENT",e),X("select-agent",e),X("close")},P=e=>{"main_agent"!==e.agentTag&&S.commit("DELETE_AGENT",e.agentTag)};return(0,n.sV)((()=>{S.commit("LOAD_CHAT_AGENTS"),N.value=!1})),(0,n.wB)((()=>S.getters.agentInfo),(()=>{S.commit("LOAD_CHAT_AGENTS")}),{deep:!0}),(e,a)=>((0,n.uX)(),(0,n.Wv)(s.eB,{name:"slide-fade"},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.Lk)("div",g,[(0,n.Lk)("div",r,[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[a[4]||(a[4]=(0,n.Lk)("h2",null,"AI Agents",-1)),(0,n.Lk)("button",{onClick:a[0]||(a[0]=e=>W("/create-agent")),class:"agent-button agent-button-small"},a[3]||(a[3]=[(0,n.Lk)("i",{class:"fas fa-plus"},null,-1),(0,n.eW)(" Create ")]))]),(0,n.Lk)("button",{class:"close-button",onClick:H},"Ã—")]),N.value?((0,n.uX)(),(0,n.CE)("div",v,a[5]||(a[5]=[(0,n.Lk)("div",{class:"agent-card"},[(0,n.Lk)("div",{class:"agent-info"},[(0,n.Lk)("div",{class:"loading-avatar"}),(0,n.Lk)("div",{class:"agent-details"},[(0,n.Lk)("div",{class:"loading-text"}),(0,n.Lk)("div",{class:"loading-text-small"})])])],-1)]))):0===O.value.length?((0,n.uX)(),(0,n.CE)("div",m,a[6]||(a[6]=[(0,n.Lk)("span",null,[(0,n.Lk)("i",{class:"fas fa-info-circle"}),(0,n.eW)(" No chats yet. Start Your First Chat ")],-1)]))):((0,n.uX)(),(0,n.CE)("div",p,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(O.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.agentTag,class:"agent-item"},[(0,n.Lk)("div",k,[(0,n.Lk)("img",{src:K(e.avatar),alt:e.name,class:"agent-avatar no-invert"},null,8,h),(0,n.Lk)("div",f,[(0,n.Lk)("h3",null,(0,l.v_)(e.name),1),(0,n.Lk)("button",{onClick:(0,s.D$)((a=>W("/ai-agents/"+e.agentTag)),["stop"]),class:"agent-link-button"},(0,l.v_)(e.agentTag),9,L),"main_agent"!==e.agentTag?((0,n.uX)(),(0,n.CE)("small",T,(0,l.v_)(F(e.agentTag))+" ago",1)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",y,[(0,n.Lk)("button",{class:(0,l.C4)(["use-button",{active:U(e)}]),onClick:a=>G(e)}," Chat ",10,A),"main_agent"!==e.agentTag?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"delete-button",onClick:a=>B.value=e},a[7]||(a[7]=[(0,n.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,_)):(0,n.Q3)("",!0)]),(0,n.bF)(s.eB,{name:"fade"},{default:(0,n.k6)((()=>[B.value?.agentTag===e.agentTag?((0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("div",b,[a[8]||(a[8]=(0,n.Lk)("p",null,"Chat history will be deleted and cannot be restored",-1)),(0,n.Lk)("div",w,[(0,n.Lk)("button",{class:"delete-confirm-button",onClick:a=>{P(e),B.value=null}}," Delete ",8,I),(0,n.Lk)("button",{class:"delete-cancel-button",onClick:a[1]||(a[1]=e=>B.value=null)}," Cancel ")])])])):(0,n.Q3)("",!0)])),_:2},1024)])))),128))])),(0,n.Lk)("div",E,[(0,n.Lk)("button",{onClick:a[2]||(a[2]=e=>W("/ai-agents")),class:"agent-button"},a[9]||(a[9]=[(0,n.Lk)("i",{class:"fas fa-rocket"},null,-1),(0,n.eW)(" Explore AI Agents ")]))])])],512),[[s.aG,R.value]])])),_:1}))}},B=t(71241);const W=(0,B.A)(S,[["__scopeId","data-v-f3f6ea40"]]);var X=W},9378:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var n=t(56768),s=t(81387),l=(t(44114),t(14603),t(47566),t(98721),t(24232)),i=t(45130),o=t(90144),c=t(4249),g=(t(87437),t(94373)),r=t(94348);const u={class:"chat-header"},d={class:"header-left"},v={class:"avatar-button pulse-animation",type:"button",disabled:""},m=["src"],p={class:"header-title"},k={class:"chat-header-title"},h={class:"header-controls"},f={class:"chat-messages"},L={key:0,class:"message agent-message"},T={class:"message-content"},y={class:"typing-animation"},A={key:0},_={key:1,class:"message agent-message"},C={class:"message-content"},b={class:"typing-animation"},w=["innerHTML"],I={class:"message-content"},E={key:0,class:"tech-decoration"},S={class:"chat-input"},B={class:"input-wrapper"},W=["disabled"];var X={__name:"AiAgentFrame",props:{withButton:{type:Boolean,default:!0},isOpenProp:{type:Boolean,default:!1},isAbsolute:{type:Boolean,default:!0},isFullScreen:{type:Boolean,default:!1},maxHeight:{type:String,default:"600px"},zIndex:{type:Number,default:1e3},imgUrl:{type:String,default:""},agentTag:{type:String,default:""},name:{type:String,default:""},theme:{type:String,default:"dark"},description:{type:String,default:""},poweredBy:{type:String,default:"Powered by Bitcat"}},setup(e){const a=e,t=(0,c.Pj)(),X=(0,s.lq)();(0,s.rd)();a.agentTag&&t.commit("SELECT_AGENT",{name:a.name||"BITCAT AI Agent",agentTag:a.agentTag||"main_agent",description:a.description||"Frame AI Agent",avatar:a.imgUrl||26});const N=(0,n.EW)((()=>a.withButton?t.getters.chatOpen:a.isOpenProp)),O=(0,o.KR)(""),R=(0,o.KR)(!1),H=(0,o.KR)(!1),K=((0,o.KR)(!1),(0,o.KR)(null)),U=async e=>{if(e&&"main_agent"!==e)try{const t=await g.A.get(`/ai/agent?agentTag=${e}`);t.data?K.value=t.data:K.value={name:a.name||"BITCAT AI Agent",agentTag:"main_agent",description:a.description||"Frame AI Agent",avatar:a.imgUrl||26}}catch(t){r.error("Error fetching agent data:",t)}},F=(0,n.EW)((()=>{if(K.value){const e={name:a.name||K.value.name||"BITCAT AI Agent",agentTag:a.agentTag||"main_agent",description:a.description||K.value.description||"Frame AI Agent",avatar:a.imgUrl||K.value.avatar||26};return e}const e={name:a.name||"BITCAT AI Agent",agentTag:a.agentTag||"main_agent",description:a.description||"Frame AI Agent",avatar:a.imgUrl||26};return e})),G=()=>{"Powered by Bitcat"===a.poweredBy&&window.open("https://bitcat.fun/ai-agents","_blank")},P=(0,o.KR)(!1),x=(0,o.KR)(!1),$=(0,o.KR)(!1),q=(0,o.KR)({}),D=(0,n.EW)((()=>{let e=F.value.agentTag;if("token_agent"===F.value.agentTag){const a=new URLSearchParams(window.location.search),t=a.get("tokenId");t&&(e=`token_agent_${t}`)}const a=q.value[e]||[];return a.slice(-20)})),J=e=>a.imgUrl?a.imgUrl:"string"===typeof e&&e.startsWith("http")?e:`https://bitcat.fun/data/ai-agents/bitcat-ai-agent-avatar-${e}.png`,M=()=>{},Q=()=>{},z=(0,o.KR)(null),j=(e,a,t)=>{let n=F.value.agentTag;if("token_agent"===F.value.agentTag){const e=new URLSearchParams(window.location.search),a=e.get("tokenId");a&&(n=`token_agent_${a}`)}if(q.value[n]||(q.value[n]=[]),t){const a=q.value[n].findIndex((e=>e.id===t));-1!==a&&("..."===q.value[n][a].content&&(q.value[n][a].content=""),q.value[n][a].content.endsWith(e)||(q.value[n][a].content+=e))}else t=Math.random().toString(36).substr(2,9),q.value[n].push({id:t,content:e,type:a,timestamp:Date.now()});return q.value[n].length>20&&(q.value[n]=q.value[n].slice(-20)),localStorage.setItem("chatHistory",JSON.stringify(q.value)),V(),t},V=()=>{(0,n.dY)((()=>{const e=document.querySelector(".chat-messages");e&&(e.scrollTop=e.scrollHeight)}))},Y=async()=>{if(!O.value.trim()||$.value)return;$.value=!0;const e=O.value;O.value="",j(e,"user");const a=j("...","agent");try{t.getters.socket.emit("user-reply",{messageId:a,message:e,agentTag:F.value.agentTag})}catch(n){r.error("Error sending message:",n),$.value=!1}},Z=()=>{t.getters.socket.on("ai-reply",(e=>{const{message:a,agentTag:t,messageId:n}=e;t===F.value.agentTag&&j(a,"agent",n),$.value=!1})),t.getters.socket.on("ai-error",(e=>{const{message:a,agentTag:t,messageId:n}=e;t===F.value.agentTag&&j(a,"agent",n),$.value=!1}))},ee=async()=>{await t.dispatch("initSocket")},ae=()=>{H.value=!H.value},te=()=>{R.value=window.innerWidth<=768},ne=()=>{const e=localStorage.getItem("bitcat_ai_visited");e||(P.value=!0)},se=()=>{const e=localStorage.getItem("agentTooltipShown");e||(x.value=!0)};(0,n.sV)((async()=>{H.value="lite"===a.theme,t.commit("LOAD_CHAT_AGENTS"),a.agentTag&&await U(a.agentTag),t.commit("SELECT_AGENT",{name:K.value.name||a.name||"BITCAT AI Agent",agentTag:a.agentTag||"main_agent",description:a.description||K.value.description||"Frame AI Agent",avatar:a.imgUrl||K.value.avatar||26}),a.withButton||await ee();const e=localStorage.getItem("chatHistory");e&&(q.value=JSON.parse(e));let n=a.agentTag||"main_agent";if("token_agent"===a.agentTag){const e=new URLSearchParams(window.location.search),a=e.get("tokenId");a&&(n=`token_agent_${a}`)}if(!q.value[n]||0===q.value[n].length){const e=a.description||K.value&&K.value.description||"Hello! I am your AI Agent.";q.value[n]=[{id:Math.random().toString(36).substr(2,9),content:e,type:"agent",timestamp:Date.now()}],localStorage.setItem("chatHistory",JSON.stringify(q.value))}V(),te(),window.addEventListener("resize",te),ne(),se()})),(0,n.hi)((()=>{t.dispatch("cleanup")}));const le=(0,n.EW)((()=>t.getters.isSocketConnected));return(0,n.wB)(le,(e=>{e&&Z()})),(0,n.wB)((()=>F.value),(()=>{V()})),(0,n.wB)((()=>N.value),(async()=>{N.value&&(t.getters.isSocketConnected||await ee()),V()})),(0,n.wB)((()=>t.getters.currentAgent),(e=>{if(e&&e.agentTag){const a=localStorage.getItem("chatHistory");if(a){const t=JSON.parse(a);q.value=t;let n=e.agentTag;if("token_agent"===e.agentTag){const e=new URLSearchParams(window.location.search),a=e.get("tokenId");a&&(n=`token_agent_${a}`)}D.value=t[n]||[]}const t=JSON.parse(localStorage.getItem("agentInfo")||"{}");t[e.agentTag]||(t[e.agentTag]={name:e.name,agentTag:e.agentTag,avatar:e.avatar},localStorage.setItem("agentInfo",JSON.stringify(t)))}}),{immediate:!0}),(0,n.wB)((()=>X.name),(e=>{z.value=null,N.value&&setTimeout((()=>{M()}),250)})),(0,n.wB)(N,(e=>{e&&M()})),(a,t)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,l.C4)(["ai-agent-container",{"light-theme":H.value,"is-absolute":e.isAbsolute,"is-fullscreen":e.isFullScreen}]),style:(0,l.Tr)({zIndex:e.isAbsolute?1e3:e.zIndex})},[N.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,l.C4)(["chat-window do-invert fullsize-chat",{mobile:R.value&&e.withButton}]),style:{height:"100vh",width:"100vw","max-height":"none"}},[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[(0,n.Lk)("button",v,[(0,n.Lk)("img",{src:J(F.value.avatar),alt:"AI Agent",class:"header-avatar no-invert"},null,8,m)]),(0,n.Lk)("div",p,[(0,n.Lk)("h3",k,(0,l.v_)(F.value.name),1),(0,n.Lk)("button",{class:"agent-tag-button",onClick:t[0]||(t[0]=e=>G())},(0,l.v_)(e.poweredBy),1)])]),(0,n.Lk)("div",h,[(0,n.Lk)("button",{class:"theme-toggle",onClick:ae},[(0,n.Lk)("i",{class:(0,l.C4)(["fas",H.value?"fa-moon":"fa-sun"])},null,2)])])]),(0,n.Lk)("div",f,["main_agent"===F.value.agentTag?((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("div",T,[(0,n.Lk)("div",y,["main_agent"===F.value.agentTag?((0,n.uX)(),(0,n.CE)("p",A,"Hello! How are you today?ðŸ‘‹ I am your BITCAT AI Agent. Let me introduce you to our Universe! ðŸš€")):(0,n.Q3)("",!0),t[3]||(t[3]=(0,n.Lk)("div",{class:"tech-decoration"},[(0,n.Lk)("div",{class:"tech-line"}),(0,n.Lk)("div",{class:"tech-dot"})],-1))])])])):(0,n.Q3)("",!0),z.value&&"main_agent"===F.value.agentTag?((0,n.uX)(),(0,n.CE)("div",_,[(0,n.Lk)("div",C,[(0,n.Lk)("div",b,[(0,n.Lk)("p",null,[t[4]||(t[4]=(0,n.eW)("About page ")),t[5]||(t[5]=(0,n.Lk)("small",null,"(are you here)",-1)),t[6]||(t[6]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)((0,l.v_)(z.value.title),1)]),(0,n.Lk)("p",{onClick:Q,innerHTML:z.value.description},null,8,w),t[7]||(t[7]=(0,n.Lk)("p",null,"Let me know if you have any questions",-1)),t[8]||(t[8]=(0,n.Lk)("div",{class:"tech-decoration"},[(0,n.Lk)("div",{class:"tech-line"}),(0,n.Lk)("div",{class:"tech-dot"})],-1))])])])):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(D.value,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:(0,l.C4)(["message","user"===e.type?"user-message":"agent-message"])},[(0,n.Lk)("div",I,[(0,n.Lk)("div",{class:(0,l.C4)({"typing-animation":"agent"===e.type})},[(0,n.Lk)("p",null,(0,l.v_)(e.content),1),"agent"===e.type?((0,n.uX)(),(0,n.CE)("div",E,t[9]||(t[9]=[(0,n.Lk)("div",{class:"tech-line"},null,-1),(0,n.Lk)("div",{class:"tech-dot"},null,-1)]))):(0,n.Q3)("",!0)],2)])],2)))),128))]),(0,n.Lk)("div",S,[(0,n.Lk)("div",B,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>O.value=e),onKeyup:t[2]||(t[2]=(0,i.jR)((e=>!$.value&&Y()),["enter"])),placeholder:"Message..."},null,544),[[i.Jo,O.value]])]),(0,n.Lk)("button",{onClick:Y,class:"send-button",disabled:$.value},[(0,n.Lk)("i",{class:(0,l.C4)(["fas",$.value?"fa-spinner fa-spin":"fa-paper-plane"])},null,2)],8,W)])],2)):(0,n.Q3)("",!0)],6))}},N=t(71241);const O=(0,N.A)(X,[["__scopeId","data-v-014f51cd"]]);var R=O;const H={class:"ai-frame-root"};var K={__name:"AiAgentFramePage",setup(e){const a=(0,s.lq)(),t=(0,n.EW)((()=>a.query.imgUrl||"")),l=(0,n.EW)((()=>a.query.agentTag||"")),i=(0,n.EW)((()=>a.query.name||"")),o=(0,n.EW)((()=>a.query.theme||"dark")),c=(0,n.EW)((()=>a.query.description||"")),g=(0,n.EW)((()=>a.query.poweredBy||"Powered by Bitcat"));return(e,a)=>((0,n.uX)(),(0,n.CE)("div",H,[(0,n.bF)(R,{"with-button":!1,"is-open-prop":!0,"is-absolute":!1,"is-full-screen":!0,"img-url":t.value,"agent-tag":l.value,name:i.value,theme:o.value,description:c.value,style:{width:"100vw",height:"100vh"},"powered-by":g.value},null,8,["img-url","agent-tag","name","theme","description","powered-by"])]))}};const U=(0,N.A)(K,[["__scopeId","data-v-0f1ad52a"]]);var F=U}}]);
//# sourceMappingURL=9378.fd65a90a.js.map