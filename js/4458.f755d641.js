(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[4458],{17974:function(e,t,a){"use strict";a(98992),a(3949);var i={white:37,black:30,blue:34,cyan:36,green:32,magenta:35,red:31,yellow:33,brightBlack:90,brightRed:91,brightGreen:92,brightYellow:93,brightBlue:94,brightMagenta:95,brightCyan:96,brightWhite:97},n={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBrightBlack:100,bgBrightRed:101,bgBrightGreen:102,bgBrightYellow:103,bgBrightBlue:104,bgBrightMagenta:105,bgBrightCyan:106,bgBrightWhite:107},s={},l={},r={};Object.keys(i).forEach((function(e){var t=s[e]="["+i[e]+"m",a=l[e]="[39m";r[e]=function(e){return t+e+a}})),Object.keys(n).forEach((function(e){var t=s[e]="["+n[e]+"m",a=l[e]="[49m";r[e]=function(e){return t+e+a}})),e.exports=r,r.open=s,r.close=l},54940:function(e,t,a){var i=a(94348),n=a(18019);function s(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;t.splice(1,0,a,"color: inherit");let i=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(i++,"%c"===e&&(n=i))})),t.splice(n,0,a)}function r(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(a){}}function o(){let e;try{e=t.storage.getItem("debug")}catch(a){}return!e&&"undefined"!==typeof n&&"env"in n&&(e={NODE_ENV:"production",BASE_URL:"/"}.DEBUG),e}function c(){try{return localStorage}catch(e){}}t.formatArgs=l,t.save=r,t.load=o,t.useColors=s,t.storage=c(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,i.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=i.debug||i.log||(()=>{}),e.exports=a(22707)(t);const{formatters:d}=e.exports;d.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},22707:function(e,t,a){var i=a(94348);function n(e){function t(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){let t,a,i,l=null;function r(...e){if(!r.enabled)return;const a=r,i=Number(new Date),s=i-(t||i);a.diff=s,a.prev=t,a.curr=i,t=i,e[0]=n.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");let l=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,i)=>{if("%%"===t)return"%";l++;const s=n.formatters[i];if("function"===typeof s){const i=e[l];t=s.call(a,i),e.splice(l,1),l--}return t})),n.formatArgs.call(a,e);const o=a.log||n.log;o.apply(a,e)}return r.namespace=e,r.useColors=n.useColors(),r.color=n.selectColor(e),r.extend=s,r.destroy=n.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==l?l:(a!==n.namespaces&&(a=n.namespaces,i=n.enabled(e)),i),set:e=>{l=e}}),"function"===typeof n.init&&n.init(r),r}function s(e,t){const a=n(this.namespace+("undefined"===typeof t?":":t)+e);return a.log=this.log,a}function l(e){let t;n.save(e),n.namespaces=e,n.names=[],n.skips=[];const a=("string"===typeof e?e:"").split(/[\s,]+/),i=a.length;for(t=0;t<i;t++)a[t]&&(e=a[t].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.slice(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function r(){const e=[...n.names.map(c),...n.skips.map(c).map((e=>"-"+e))].join(",");return n.enable(""),e}function o(e){if("*"===e[e.length-1])return!0;let t,a;for(t=0,a=n.skips.length;t<a;t++)if(n.skips[t].test(e))return!1;for(t=0,a=n.names.length;t<a;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function d(e){return e instanceof Error?e.stack||e.message:e}function u(){i.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.debug=n,n.default=n,n.coerce=d,n.disable=r,n.enable=l,n.enabled=o,n.humanize=a(45650),n.destroy=u,Object.keys(e).forEach((t=>{n[t]=e[t]})),n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}a(44114),a(98992),a(3949),a(81454),e.exports=n},45650:function(e){var t=1e3,a=60*t,i=60*a,n=24*i,s=7*n,l=365.25*n;function r(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var o=parseFloat(r[1]),c=(r[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return o*l;case"weeks":case"week":case"w":return o*s;case"days":case"day":case"d":return o*n;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*a;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function o(e){var s=Math.abs(e);return s>=n?Math.round(e/n)+"d":s>=i?Math.round(e/i)+"h":s>=a?Math.round(e/a)+"m":s>=t?Math.round(e/t)+"s":e+"ms"}function c(e){var s=Math.abs(e);return s>=n?d(e,s,n,"day"):s>=i?d(e,s,i,"hour"):s>=a?d(e,s,a,"minute"):s>=t?d(e,s,t,"second"):e+" ms"}function d(e,t,a,i){var n=t>=1.5*a;return Math.round(e/a)+" "+i+(n?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return r(e);if("number"===a&&isFinite(e))return t.long?c(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},10139:function(e,t,a){"use strict";var i=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof a.g)return a.g;throw new Error("unable to locate global object")},n=i();e.exports=t=n.fetch,n.fetch&&(t["default"]=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},71241:function(e,t){"use strict";t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[i,n]of t)a[i]=n;return a}},79710:function(e,t,a){"use strict";a.d(t,{A:function(){return g}});var i=a(56768);const n={class:"cancel-modal"},s={class:"cancel-modal__box"},l={class:"cancel-modal__actions"},r=["disabled"],o={key:0,class:"cancel-modal__spinner"};function c(e,t,a,c,d,u){return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("div",s,[t[4]||(t[4]=(0,i.Lk)("h3",{class:"cancel-modal__title"},"Cancel Listing",-1)),t[5]||(t[5]=(0,i.Lk)("p",{class:"cancel-modal__message"},"Are you sure you want to cancel this listing?",-1)),(0,i.Lk)("div",l,[(0,i.Lk)("button",{type:"button",class:"cancel-modal__button cancel-modal__button--secondary",onClick:t[0]||(t[0]=t=>e.$emit("close"))}," No, Keep Listing "),(0,i.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$emit("confirm")),class:"cancel-modal__button cancel-modal__button--danger",disabled:a.isSubmitting},[a.isSubmitting?((0,i.uX)(),(0,i.CE)("span",o)):(0,i.Q3)("",!0),t[3]||(t[3]=(0,i.eW)(" Yes, Cancel Listing "))],8,r)])]),(0,i.Lk)("div",{class:"cancel-modal__backdrop",onClick:t[2]||(t[2]=t=>e.$emit("close"))})])}var d={name:"CancelListingModal",props:{isSubmitting:{type:Boolean,default:!1}}},u=a(71241);const m=(0,u.A)(d,[["render",c],["__scopeId","data-v-f36f194a"]]);var g=m},76241:function(e,t,a){"use strict";a.d(t,{A:function(){return E}});var i=a(56768),n=a(24232),s=a(45130);const l={class:"bid-modal"},r={class:"bid-modal__box"},o={class:"bid-modal__nft-preview"},c={class:"bid-modal__nft-image-container"},d=["src","alt"],u={key:1,class:"bid-modal__nft-placeholder"},m={class:"bid-modal__nft-name"},g={class:"bid-modal__form-group"},f=["value"],_={class:"bid-modal__form-group"},b=["min"],p={class:"bid-modal__form-help"},h={class:"bid-modal__fee-summary"},k={class:"bid-modal__fee-row"},C={class:"bid-modal__fee-row bid-modal__fee-row--total"},v={class:"bid-modal__actions"},y=["disabled"],w={key:0,class:"bid-modal__spinner"};function L(e,t,a,L,F,A){return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",r,[t[11]||(t[11]=(0,i.Lk)("h3",{class:"bid-modal__title"},"Place Bid",-1)),(0,i.Lk)("div",o,[(0,i.Lk)("div",c,[a.listing.imageUrl?((0,i.uX)(),(0,i.CE)("img",{key:0,src:a.listing.imageUrl,alt:a.listing.name,class:"bid-modal__nft-image"},null,8,d)):((0,i.uX)(),(0,i.CE)("div",u,t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-image bid-modal__nft-placeholder-icon"},null,-1)])))]),(0,i.Lk)("h4",m,(0,n.v_)(a.listing.name||`NFT #${a.listing.mintAddress.substring(0,8)}`),1)]),(0,i.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>A.submitBid&&A.submitBid(...e)),["prevent"])),class:"bid-modal__form"},[(0,i.Lk)("div",g,[t[5]||(t[5]=(0,i.Lk)("label",{class:"bid-modal__form-label"},[(0,i.Lk)("span",{class:"bid-modal__form-label-text"},"Current Price")],-1)),(0,i.Lk)("input",{value:A.formatPrice(a.listing.highestBid||a.listing.initialPrice),type:"text",class:"bid-modal__form-input bid-modal__form-input--disabled",disabled:""},null,8,f)]),(0,i.Lk)("div",_,[t[6]||(t[6]=(0,i.Lk)("label",{class:"bid-modal__form-label"},[(0,i.Lk)("span",{class:"bid-modal__form-label-text"},"Your Bid (SOL)")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>F.bidAmount=e),type:"number",step:"0.01",min:A.minBidAmount,placeholder:"Enter bid amount",class:"bid-modal__form-input",required:""},null,8,b),[[s.Jo,F.bidAmount]]),(0,i.Lk)("span",p,"Minimum bid: "+(0,n.v_)(A.minBidAmount)+" SOL",1)]),(0,i.Lk)("div",h,[t[9]||(t[9]=(0,i.Lk)("h4",{class:"bid-modal__fee-title"},"Fees",-1)),(0,i.Lk)("div",k,[t[7]||(t[7]=(0,i.Lk)("span",null,"Marketplace Fee (5%)",-1)),(0,i.Lk)("span",null,(0,n.v_)(A.calculateFee())+" SOL",1)]),(0,i.Lk)("div",C,[t[8]||(t[8]=(0,i.Lk)("span",null,"Total",-1)),(0,i.Lk)("span",null,(0,n.v_)(A.calculateTotal())+" SOL",1)])]),(0,i.Lk)("div",v,[(0,i.Lk)("button",{type:"button",class:"bid-modal__button bid-modal__button--cancel",onClick:t[1]||(t[1]=t=>e.$emit("close"))},"Cancel"),(0,i.Lk)("button",{type:"submit",class:"bid-modal__button bid-modal__button--submit",disabled:a.isSubmitting||!A.isFormValid},[a.isSubmitting?((0,i.uX)(),(0,i.CE)("span",w)):(0,i.Q3)("",!0),t[10]||(t[10]=(0,i.eW)(" Place Bid "))],8,y)])],32)]),(0,i.Lk)("div",{class:"bid-modal__backdrop",onClick:t[3]||(t[3]=t=>e.$emit("close"))})])}var F={name:"PlaceBidModal",props:{listing:{type:Object,required:!0},isSubmitting:{type:Boolean,default:!1}},data(){return{bidAmount:""}},computed:{minBidAmount(){const e=this.listing.highestBid||this.listing.initialPrice;return(parseFloat(e)+.01).toFixed(2)},isFormValid(){return this.bidAmount&&parseFloat(this.bidAmount)>=parseFloat(this.minBidAmount)}},methods:{formatPrice(e){return parseFloat(e).toFixed(3)},calculateFee(){if(!this.bidAmount)return"0";const e=.05*parseFloat(this.bidAmount);return e.toFixed(3)},calculateTotal(){if(!this.bidAmount)return"0";const e=parseFloat(this.bidAmount),t=.05*e;return(e+t).toFixed(3)},submitBid(){this.isFormValid&&this.$emit("submit",{mintAddress:this.listing.mintAddress,amount:parseFloat(this.bidAmount)})}},mounted(){this.bidAmount=this.minBidAmount}},A=a(71241);const P=(0,A.A)(F,[["render",L],["__scopeId","data-v-fe5ce5c6"]]);var E=P},18327:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Se}});var i=a(56768),n=a(24232);const s={class:"nft-market"},l={class:"nft-market__container"},r={key:0,class:"nft-market__create-section"},o={class:"nft-market__listings-section"},c={class:"nft-market__listings-header"},d={class:"nft-market__listings-controls"},u=["disabled"],m={key:0,class:"nft-market__tab-buttons"},g={key:0,class:"nft-market__loader-container"},f={key:1,class:"nft-market__empty-state"},_={key:0,class:"nft-market__empty-subtitle"},b={key:1,class:"nft-market__empty-subtitle"},p={key:2,class:"nft-market__listings-grid"};function h(e,t,a,h,k,C){const v=(0,i.g2)("NftListingCard"),y=(0,i.g2)("CreateListingModal"),w=(0,i.g2)("PlaceBidModal"),L=(0,i.g2)("CancelListingModal");return(0,i.uX)(),(0,i.CE)("div",s,[(0,i.Lk)("div",l,[t[13]||(t[13]=(0,i.Lk)("h1",{class:"nft-market__title"},"NFT Marketplace",-1)),C.hasWallet?((0,i.uX)(),(0,i.CE)("div",r,[t[7]||(t[7]=(0,i.Lk)("h2",{class:"nft-market__section-title"},"Sell Your NFT",-1)),t[8]||(t[8]=(0,i.Lk)("p",{class:"nft-market__section-description"},"List your NFT for sale on our marketplace and earn SOL.",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>h.showCreateListingModal=!0),class:"nft-market__create-button"}," Create Listing ")])):(0,i.Q3)("",!0),(0,i.Lk)("div",o,[(0,i.Lk)("div",c,[t[10]||(t[10]=(0,i.Lk)("h2",{class:"nft-market__section-title"},"Active Listings",-1)),(0,i.Lk)("div",d,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>h.loadListings&&h.loadListings(...e)),class:"nft-market__refresh-button",disabled:h.isLoading},t[9]||(t[9]=[(0,i.Lk)("i",{class:"fas fa-sync-alt nft-market__refresh-icon"},null,-1),(0,i.eW)(" Refresh ")]),8,u),C.hasWallet?((0,i.uX)(),(0,i.CE)("div",m,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=e=>h.activeTab="all"),class:(0,n.C4)(["nft-market__tab-button",{"nft-market__tab-button--active":"all"===h.activeTab}])}," All ",2),(0,i.Lk)("button",{onClick:t[3]||(t[3]=e=>h.activeTab="my"),class:(0,n.C4)(["nft-market__tab-button",{"nft-market__tab-button--active":"my"===h.activeTab}])}," My Listings ",2)])):(0,i.Q3)("",!0)])]),h.isLoading?((0,i.uX)(),(0,i.CE)("div",g,t[11]||(t[11]=[(0,i.Lk)("div",{class:"nft-market__loader"},null,-1)]))):0===h.displayedListings.length?((0,i.uX)(),(0,i.CE)("div",f,[t[12]||(t[12]=(0,i.Lk)("p",{class:"nft-market__empty-title"},"No NFT listings found.",-1)),"my"===h.activeTab?((0,i.uX)(),(0,i.CE)("p",_," You haven't listed any NFTs for sale yet. ")):((0,i.uX)(),(0,i.CE)("p",b," Be the first to list your NFT on our marketplace! "))])):((0,i.uX)(),(0,i.CE)("div",p,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(h.displayedListings,(e=>((0,i.uX)(),(0,i.Wv)(v,{key:e.id,listing:e,"wallet-address":h.walletAddress,connected:C.hasWallet,onView:h.viewListing,onBid:h.placeBid,onCancel:h.cancelListing},null,8,["listing","wallet-address","connected","onView","onBid","onCancel"])))),128))]))])]),h.showCreateListingModal?((0,i.uX)(),(0,i.Wv)(y,{key:0,"user-nfts":h.userNfts,"is-loading":h.isLoadingUserNfts,"is-submitting":h.isCreatingListing,onClose:t[4]||(t[4]=e=>h.showCreateListingModal=!1),onSubmit:h.handleCreateListing},null,8,["user-nfts","is-loading","is-submitting","onSubmit"])):(0,i.Q3)("",!0),h.showBidModal&&h.selectedListing?((0,i.uX)(),(0,i.Wv)(w,{key:1,listing:h.selectedListing,"is-submitting":h.isPlacingBid,onClose:t[5]||(t[5]=e=>h.showBidModal=!1),onSubmit:h.handlePlaceBid},null,8,["listing","is-submitting","onSubmit"])):(0,i.Q3)("",!0),h.showCancelModal&&h.selectedListing?((0,i.uX)(),(0,i.Wv)(L,{key:2,"is-submitting":h.isCancelling,onClose:t[6]||(t[6]=e=>h.showCancelModal=!1),onConfirm:h.handleCancelListing},null,8,["is-submitting","onConfirm"])):(0,i.Q3)("",!0)])}a(44114),a(98992),a(3949),a(81454);var k=a(90144),C=a(86659),v=a(81387),y=a(4249),w=a(94373),L=a(75290),F=a(96529),A=a(56675),P=a(63410),E=a(22123);const B={class:"nft-card"},N={class:"nft-card__image-container"},S=["src","alt"],T={key:1,class:"nft-card__image-placeholder"},M={class:"nft-card__content"},x={class:"nft-card__title"},X={class:"nft-card__address"},$={key:0,class:"nft-card__seller"},R={class:"nft-card__seller-value"},K={class:"nft-card__price-container"},W={class:"nft-card__price-block"},O={class:"nft-card__price-value"},D={key:0,class:"nft-card__price-block"},U={class:"nft-card__price-value"},I={class:"nft-card__time-block"},V={class:"nft-card__time-value"},j={class:"nft-card__actions"};function H(e,t,a,s,l,r){return(0,i.uX)(),(0,i.CE)("div",B,[(0,i.Lk)("div",N,[a.listing.imageUrl?((0,i.uX)(),(0,i.CE)("img",{key:0,src:a.listing.imageUrl,alt:a.listing.name,class:"nft-card__image"},null,8,S)):((0,i.uX)(),(0,i.CE)("div",T,t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-image nft-card__placeholder-icon"},null,-1)]))),"active"!==a.listing.status?((0,i.uX)(),(0,i.CE)("div",{key:2,class:(0,n.C4)(["nft-card__status",{"nft-card__status--sold":"sold"===a.listing.status,"nft-card__status--cancelled":"cancelled"===a.listing.status,"nft-card__status--expired":"expired"===a.listing.status}])},(0,n.v_)(a.listing.status),3)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",M,[(0,i.Lk)("h3",x,(0,n.v_)(a.listing.name||`NFT #${a.listing.mintAddress.substring(0,8)}`),1),(0,i.Lk)("p",X,(0,n.v_)(r.shortenAddress(a.listing.mintAddress)),1),a.listing.userTag?((0,i.uX)(),(0,i.CE)("div",$,[t[4]||(t[4]=(0,i.Lk)("p",{class:"nft-card__seller-label"},"Seller:",-1)),(0,i.Lk)("p",R,(0,n.v_)(a.listing.userTag),1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",K,[(0,i.Lk)("div",W,[t[5]||(t[5]=(0,i.Lk)("p",{class:"nft-card__price-label"},"Price",-1)),(0,i.Lk)("p",O,(0,n.v_)(r.formatPrice(a.listing.initialPrice))+" SOL",1)]),a.listing.instantPrice?((0,i.uX)(),(0,i.CE)("div",D,[t[6]||(t[6]=(0,i.Lk)("p",{class:"nft-card__price-label"},"Buy Now",-1)),(0,i.Lk)("p",U,(0,n.v_)(r.formatPrice(a.listing.instantPrice))+" SOL",1)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",I,[t[7]||(t[7]=(0,i.Lk)("p",{class:"nft-card__time-label"},"Ends in",-1)),(0,i.Lk)("p",V,(0,n.v_)(r.formatTimeRemaining(a.listing.endTime)),1)]),(0,i.Lk)("div",j,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("view",a.listing)),class:"nft-card__button nft-card__button--view"}," View Details "),r.canBid?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[1]||(t[1]=t=>e.$emit("bid",a.listing)),class:"nft-card__button nft-card__button--bid"}," Place Bid ")):(0,i.Q3)("",!0),r.canCancel?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[2]||(t[2]=t=>e.$emit("cancel",a.listing)),class:"nft-card__button nft-card__button--cancel"}," Cancel ")):(0,i.Q3)("",!0)])])])}var Q={name:"NftListingCard",props:{listing:{type:Object,required:!0},walletAddress:{type:String,default:""},connected:{type:Boolean,default:!1}},computed:{canBid(){return this.connected&&"active"===this.listing.status&&this.listing.sellerWallet!==this.walletAddress},canCancel(){return this.connected&&"active"===this.listing.status&&this.listing.sellerWallet===this.walletAddress}},methods:{formatPrice(e){return parseFloat(e).toFixed(3)},formatTimeRemaining(e){const t=new Date(e),a=new Date;if(t<=a)return"Ended";const i=t-a,n=Math.floor(i/864e5),s=Math.floor(i%864e5/36e5),l=Math.floor(i%36e5/6e4);return n>0?`${n}d ${s}h`:s>0?`${s}h ${l}m`:`${l}m`},shortenAddress(e){return e?`${e.substring(0,4)}...${e.substring(e.length-4)}`:""}}},Y=a(71241);const q=(0,Y.A)(Q,[["render",H],["__scopeId","data-v-552b1876"]]);var J=q,z=a(45130);const G={class:"create-listing-modal"},Z={class:"create-listing-modal__box"},ee={key:0,class:"create-listing-modal__loader-container"},te={key:1,class:"create-listing-modal__empty"},ae={key:2},ie={class:"create-listing-modal__section"},ne={class:"create-listing-modal__nft-grid"},se=["onClick"],le={class:"create-listing-modal__nft-image-container"},re=["src","alt"],oe={key:1,class:"create-listing-modal__nft-placeholder"},ce={class:"create-listing-modal__nft-info"},de={class:"create-listing-modal__nft-name"},ue={class:"create-listing-modal__form"},me={class:"create-listing-modal__form-group"},ge={class:"create-listing-modal__form-group"},fe={class:"create-listing-modal__form-group"},_e=["min"],be={class:"create-listing-modal__fee-summary"},pe={class:"create-listing-modal__fee-row"},he={class:"create-listing-modal__fee-row create-listing-modal__fee-row--total"},ke={class:"create-listing-modal__button-group"},Ce=["disabled"];function ve(e,t,a,s,l,r){return(0,i.uX)(),(0,i.CE)("div",G,[(0,i.Lk)("div",Z,[t[19]||(t[19]=(0,i.Lk)("h3",{class:"create-listing-modal__title"},"Create NFT Listing",-1)),a.isLoading?((0,i.uX)(),(0,i.CE)("div",ee,t[6]||(t[6]=[(0,i.Lk)("div",{class:"create-listing-modal__loader"},null,-1)]))):0===a.userNfts.length?((0,i.uX)(),(0,i.CE)("div",te,t[7]||(t[7]=[(0,i.Lk)("p",{class:"create-listing-modal__empty-title"},"You don't have any NFTs to list.",-1),(0,i.Lk)("p",{class:"create-listing-modal__empty-subtitle"},"Mint or acquire NFTs first before creating a listing.",-1)]))):((0,i.uX)(),(0,i.CE)("div",ae,[(0,i.Lk)("div",ie,[t[9]||(t[9]=(0,i.Lk)("label",{class:"create-listing-modal__label"},"Select NFT",-1)),(0,i.Lk)("div",ne,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.userNfts,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.mintAddress,onClick:t=>r.selectNft(e),class:(0,n.C4)(["create-listing-modal__nft-item",{"create-listing-modal__nft-item--selected":l.selectedNft&&l.selectedNft.mintAddress===e.mintAddress}])},[(0,i.Lk)("div",le,[e.imageUrl?((0,i.uX)(),(0,i.CE)("img",{key:0,src:e.imageUrl,alt:e.name,class:"create-listing-modal__nft-image"},null,8,re)):((0,i.uX)(),(0,i.CE)("div",oe,t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-image create-listing-modal__nft-placeholder-icon"},null,-1)])))]),(0,i.Lk)("div",ce,[(0,i.Lk)("p",de,(0,n.v_)(e.name||`NFT #${e.mintAddress.substring(0,8)}`),1)])],10,se)))),128))])]),(0,i.Lk)("div",ue,[(0,i.Lk)("div",me,[t[10]||(t[10]=(0,i.Lk)("label",{class:"create-listing-modal__form-label"},[(0,i.Lk)("span",{class:"create-listing-modal__form-label-text"},"Initial Price (SOL)")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.initialPrice=e),type:"number",step:"0.01",min:"0.01",placeholder:"Enter initial price",class:"create-listing-modal__form-input",required:""},null,512),[[z.Jo,l.form.initialPrice]]),t[11]||(t[11]=(0,i.Lk)("span",{class:"create-listing-modal__form-help"},"Minimum price for the auction",-1))]),(0,i.Lk)("div",ge,[t[12]||(t[12]=(0,i.Lk)("label",{class:"create-listing-modal__form-label"},[(0,i.Lk)("span",{class:"create-listing-modal__form-label-text"},"Instant Buy Price (SOL, optional)")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.instantPrice=e),type:"number",step:"0.01",min:"0",placeholder:"Enter instant buy price (optional)",class:"create-listing-modal__form-input"},null,512),[[z.Jo,l.form.instantPrice]]),t[13]||(t[13]=(0,i.Lk)("span",{class:"create-listing-modal__form-help"},"Price for immediate purchase",-1))]),(0,i.Lk)("div",fe,[t[14]||(t[14]=(0,i.Lk)("label",{class:"create-listing-modal__form-label"},[(0,i.Lk)("span",{class:"create-listing-modal__form-label-text"},"End Date")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.form.endDate=e),type:"datetime-local",class:"create-listing-modal__form-input",required:"",min:r.minEndDate},null,8,_e),[[z.Jo,l.form.endDate]]),t[15]||(t[15]=(0,i.Lk)("span",{class:"create-listing-modal__form-help"},"When the auction will end",-1))]),(0,i.Lk)("div",be,[t[18]||(t[18]=(0,i.Lk)("h4",{class:"create-listing-modal__fee-title"},"Fees",-1)),(0,i.Lk)("div",pe,[t[16]||(t[16]=(0,i.Lk)("span",null,"Marketplace Fee (5%)",-1)),(0,i.Lk)("span",null,(0,n.v_)(r.calculateFee())+" SOL",1)]),(0,i.Lk)("div",he,[t[17]||(t[17]=(0,i.Lk)("span",null,"You will receive",-1)),(0,i.Lk)("span",null,(0,n.v_)(r.calculateReceived())+" SOL",1)])]),(0,i.Lk)("div",ke,[(0,i.Lk)("button",{type:"button",onClick:t[3]||(t[3]=t=>e.$emit("close")),class:"create-listing-modal__button create-listing-modal__button--cancel"}," Cancel "),(0,i.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>r.createListingManually&&r.createListingManually(...e)),class:"create-listing-modal__button create-listing-modal__button--submit",disabled:!r.isFormValid||a.isSubmitting},(0,n.v_)(a.isSubmitting?"Creating...":"Create Listing"),9,Ce)])])]))]),(0,i.Lk)("div",{class:"create-listing-modal__backdrop",onClick:t[5]||(t[5]=t=>e.$emit("close"))})])}var ye=a(94348),we={name:"CreateListingModal",props:{userNfts:{type:Array,required:!0},isLoading:{type:Boolean,default:!1},isSubmitting:{type:Boolean,default:!1}},data(){return{selectedNft:null,form:{initialPrice:"",instantPrice:"",endDate:""}}},computed:{minEndDate(){const e=new Date;return e.setHours(e.getHours()+1),e.toISOString().slice(0,16)},isFormValid(){return this.selectedNft&&this.form.initialPrice>0&&this.form.endDate&&new Date(this.form.endDate)>new Date}},methods:{selectNft(e){ye.log("Selecting NFT:",e),e&&e.mintAddress?(this.selectedNft=e,ye.log("Selected NFT:",this.selectedNft)):ye.error("Invalid NFT selected:",e)},calculateFee(){if(!this.form.initialPrice)return"0";const e=.05*parseFloat(this.form.initialPrice);return e.toFixed(3)},calculateReceived(){if(!this.form.initialPrice)return"0";const e=parseFloat(this.form.initialPrice),t=.05*e;return(e-t).toFixed(3)},createListingManually(){if(!this.isFormValid)return;ye.log("Creating listing for NFT:",this.selectedNft);const e={mintAddress:this.selectedNft.mintAddress,name:this.selectedNft.name||"",imageUrl:this.selectedNft.imageUrl||"",metadataUri:this.selectedNft.metadataUri||""};ye.log("Sending NFT data to parent:",e),this.$emit("submit",{nft:e,initialPrice:parseFloat(this.form.initialPrice),instantPrice:this.form.instantPrice?parseFloat(this.form.instantPrice):null,endDate:this.form.endDate})}}};const Le=(0,Y.A)(we,[["render",ve],["__scopeId","data-v-93970504"]]);var Fe=Le,Ae=a(76241),Pe=a(79710),Ee=a(94348),Be={name:"NftMarketPage",components:{NftListingCard:J,CreateListingModal:Fe,PlaceBidModal:Ae.A,CancelListingModal:Pe.A},computed:{hasWallet(){return this.$store.getters.hasWallet}},setup(){const e=(0,v.rd)(),t=(0,y.Pj)(),{wallet:n,connected:s,publicKey:l}=(0,C.vT)(),r=(0,k.KR)([]),o=(0,k.KR)([]),c=(0,k.KR)([]),d=(0,k.KR)(null),u=(0,k.KR)(!1),m=(0,k.KR)(!1),g=(0,k.KR)(!1),f=(0,k.KR)(!1),_=(0,k.KR)(!1),b=(0,k.KR)("all"),p=(0,k.KR)(!1),h=(0,k.KR)(!1),B=(0,k.KR)(!1),N=(0,i.EW)((()=>l.value?.toBase58())),S=(0,i.EW)((()=>"my"===b.value?o.value:r.value)),T=()=>{const e=new L.Connection("https://sleek-icy-frog.solana-mainnet.quiknode.pro/9d4845e2d4c60caf45dc4f10d0bdcfdbcd6a321c");if(!t.getters.hasWallet)throw new Error("Wallet not connected");if(!window.solana)throw new Error("Phantom wallet not installed");const a={publicKey:l.value,signTransaction:async e=>{if(!window.solana)throw new Error("Phantom wallet not installed");return await window.solana.signTransaction(e)},signAllTransactions:async e=>{if(!window.solana)throw new Error("Phantom wallet not installed");return await window.solana.signAllTransactions(e)},signMessage:async e=>{if(!window.solana)throw new Error("Phantom wallet not installed");return await window.solana.signMessage(e)}};return F.X.make(e).use((0,A.H)(a)).use((0,P.W)())},M=async()=>{const e=T();return await e.auctionHouse().findByAddress({address:new L.PublicKey("G26L5YGdj9PaYuePz2jj7Qez2S3PJ39xGEKbAnoYHfVE")})},x=async()=>{try{u.value=!0;const e=await w.A.get("/nft-market/listings");r.value=e.data.data}catch(e){Ee.error("Error loading listings:",e)}finally{u.value=!1}},X=async()=>{if(t.getters.hasWallet)try{const e=await w.A.get("/nft-market/listings/my");o.value=e.data.data}catch(e){Ee.error("Error loading my listings:",e)}},$=async()=>{if(t.getters.hasWallet)try{m.value=!0;const e=await w.A.get("/nft-market/my-nfts");c.value=e.data.data.map((e=>({mintAddress:e.assetPublicKey,imageUrl:e.imageUri,name:e.name,id:e.id})))}catch(e){Ee.error("Error loading user NFTs:",e),c.value=[]}finally{m.value=!1}},R=t=>{e.push(`/nft-market/listing/${t.mintAddress}`)},K=e=>{d.value=e,h.value=!0},W=e=>{d.value=e,B.value=!0},O=async e=>{try{if(g.value=!0,!t.getters.hasWallet)return alert("Please connect your wallet first."),void(g.value=!1);const s=parseFloat(e.initialPrice);Ee.log(`Creating listing for NFT: ${e.nft.mintAddress} at ${s} SOL`);try{const t=T(),n=t.connection,r=await M(),o=l.value;Ee.log("Creating listing using Metaplex SDK..."),Ee.log(e.nft.mintAddress);const c=await t.nfts().findAllByOwner({owner:t.identity().publicKey});Ee.log("NFT found:",c);try{const{listing:a,confirmResponse:i}=await t.auctionHouse().list({auctionHouse:r,mintAccount:new L.PublicKey(e.nft.mintAddress),price:(0,E.jN)(s),token:1,tokenAccount:new L.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),printReceipt:!0});Ee.log("Listing created successfully:",a),Ee.log("Transaction confirmed with signature:",i.signature),Ee.log("Creating listing record in database...");const n=await w.A.post("/nft-market/listings",{mintAddress:e.nft.mintAddress,initialPrice:s,instantPrice:e.instantPrice,endTime:new Date(e.endDate).toISOString(),transactionSignature:i.signature});n.data.success?(Ee.log("Listing created successfully in database:",n.data),p.value=!1,await x(),await X()):(Ee.error("Error creating listing in database:",n.data),alert("Failed to create listing in database: "+n.data.message))}catch(i){Ee.error("Error using Metaplex SDK:",i),Ee.log("Building transaction manually using instructions...");const l=await t.auctionHouse().builders().list({auctionHouse:r,mintAccount:new L.PublicKey(e.nft.mintAddress),price:(0,E.jN)(s)}).getInstructions(),{Transaction:c}=await Promise.resolve().then(a.bind(a,75290)),d=new c;l.forEach((e=>d.add(e)));const{blockhash:u,lastValidBlockHeight:m}=await n.getLatestBlockhash();if(d.recentBlockhash=u,d.feePayer=o,Ee.log("Transaction built, sending to Phantom for signing..."),!window.solana)throw new Error("Phantom wallet not installed");const g=await window.solana.signTransaction(d),f=await n.sendRawTransaction(g.serialize(),{skipPreflight:!1});Ee.log("Transaction sent with signature:",f);const _=await n.confirmTransaction({signature:f,blockhash:u,lastValidBlockHeight:m});if(_.value&&_.value.err)throw new Error(`Transaction failed: ${_.value.err}`);Ee.log("Transaction confirmed successfully"),Ee.log("Creating listing record in database...");const b=await w.A.post("/nft-market/listings",{mintAddress:e.nft.mintAddress,initialPrice:s,instantPrice:e.instantPrice,endTime:new Date(e.endDate).toISOString(),transactionSignature:f});b.data.success?(Ee.log("Listing created successfully in database:",b.data),p.value=!1,await x(),await X()):(Ee.error("Error creating listing in database:",b.data),alert("Failed to create listing in database: "+b.data.message))}}catch(n){Ee.error("Failed to create listing:",n);const e=n.message||"Unknown error";Ee.error("Error details:",e),e.includes("AccountNotInitialized")?alert("Ошибка листинга NFT: Аккаунт не инициализирован. Убедитесь, что NFT действительно принадлежит вам."):alert("Не удалось создать листинг: "+e)}}catch(s){Ee.error("Error creating listing:",s),alert("Failed to create listing. Please try again: "+(s.message||"Unknown error"))}finally{g.value=!1}},D=async e=>{try{if(f.value=!0,!t.getters.hasWallet)return alert("Please connect your wallet first."),void(f.value=!1);const i=parseFloat(e.amount);Ee.log(`Placing bid for NFT: ${e.mintAddress} at ${i} SOL`);try{Ee.log("Creating bid via Metaplex SDK...");const t=T(),a=await M(),{bid:n,confirmResponse:s}=await t.auctionHouse().bid({auctionHouse:a,mintAccount:new L.PublicKey(e.mintAddress),price:i});Ee.log("Bid created successfully:",n),Ee.log("Transaction confirmed with signature:",s.signature),Ee.log("Recording bid in database...");const l=await w.A.post("/nft-market/bid",{mintAddress:e.mintAddress,bidAmount:i,transactionSignature:s.signature});l.data.success?(Ee.log("Bid recorded successfully in database:",l.data),h.value=!1,d.value=null,await x(),await X()):(Ee.error("Error recording bid in database:",l.data),alert("Failed to record bid in database. Please try again."))}catch(a){Ee.error("Error placing bid:",a),alert("Failed to place bid. Please try again: "+(a.message||"Unknown error"))}finally{f.value=!1}}catch(a){Ee.error("Error placing bid:",a),alert("Failed to place bid. Please try again: "+(a.message||"Unknown error"))}finally{f.value=!1}},U=async()=>{try{if(_.value=!0,!d.value)return alert("No listing selected."),void(_.value=!1);if(!t.getters.hasWallet)return alert("Please connect your wallet first."),void(_.value=!1);const e=d.value;Ee.log(`Cancelling listing for NFT: ${e.mintAddress}`);const a=T(),i=await M(),{confirmResponse:n}=await a.auctionHouse().cancelListing({auctionHouse:i,listing:{price:parseFloat(e.initialPrice),mintAccount:new L.PublicKey(e.mintAddress),seller:l.value}});Ee.log("Listing cancelled successfully with signature:",n.signature),Ee.log("Updating listing status in database...");const s=await w.A.post("/nft-market/listings/cancel",{mintAddress:e.mintAddress,transactionSignature:n.signature});s.data.success?(Ee.log("Listing cancelled successfully in database:",s.data),B.value=!1,d.value=null,await x(),await X()):(Ee.error("Error cancelling listing in database:",s.data),alert("Failed to cancel listing in database. Please try again."))}catch(e){Ee.error("Error cancelling listing:",e),alert("Failed to cancel listing. Please try again: "+(e.message||"Unknown error"))}finally{_.value=!1}};return(0,i.sV)((async()=>{await x()})),(0,i.wB)(s,(async e=>{e?await X():(o.value=[],b.value="all")})),(0,i.wB)(p,(async e=>{e&&await $()})),{wallet:n,connected:s,walletAddress:N,listings:r,myListings:o,userNfts:c,selectedListing:d,isLoading:u,isLoadingUserNfts:m,isCreatingListing:g,isPlacingBid:f,isCancelling:_,activeTab:b,showCreateListingModal:p,showBidModal:h,showCancelModal:B,displayedListings:S,loadListings:x,loadMyListings:X,loadUserNfts:$,viewListing:R,placeBid:K,cancelListing:W,handleCreateListing:O,handlePlaceBid:D,handleCancelListing:U}}};const Ne=(0,Y.A)(Be,[["render",h],["__scopeId","data-v-275d6b5e"]]);var Se=Ne},29122:function(){}}]);
//# sourceMappingURL=4458.f755d641.js.map