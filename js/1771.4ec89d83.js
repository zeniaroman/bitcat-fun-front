(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[1771],{17974:function(e,n,t){"use strict";t(98992),t(3949);var s={white:37,black:30,blue:34,cyan:36,green:32,magenta:35,red:31,yellow:33,brightBlack:90,brightRed:91,brightGreen:92,brightYellow:93,brightBlue:94,brightMagenta:95,brightCyan:96,brightWhite:97},o={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBrightBlack:100,bgBrightRed:101,bgBrightGreen:102,bgBrightYellow:103,bgBrightBlue:104,bgBrightMagenta:105,bgBrightCyan:106,bgBrightWhite:107},r={},a={},i={};Object.keys(s).forEach((function(e){var n=r[e]="["+s[e]+"m",t=a[e]="[39m";i[e]=function(e){return n+e+t}})),Object.keys(o).forEach((function(e){var n=r[e]="["+o[e]+"m",t=a[e]="[49m";i[e]=function(e){return n+e+t}})),e.exports=i,i.open=r,i.close=a},54940:function(e,n,t){var s=t(94348),o=t(18019);function r(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const t="color: "+this.color;n.splice(1,0,t,"color: inherit");let s=0,o=0;n[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(o=s))})),n.splice(o,0,t)}function i(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(t){}}function c(){let e;try{e=n.storage.getItem("debug")}catch(t){}return!e&&"undefined"!==typeof o&&"env"in o&&(e={NODE_ENV:"production",BASE_URL:"/"}.DEBUG),e}function l(){try{return localStorage}catch(e){}}n.formatArgs=a,n.save=i,n.load=c,n.useColors=r,n.storage=l(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0,s.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=s.debug||s.log||(()=>{}),e.exports=t(22707)(n);const{formatters:u}=e.exports;u.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}},22707:function(e,n,t){var s=t(94348);function o(e){function n(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return o.colors[Math.abs(n)%o.colors.length]}function o(e){let n,t,s,a=null;function i(...e){if(!i.enabled)return;const t=i,s=Number(new Date),r=s-(n||s);t.diff=r,t.prev=n,t.curr=s,n=s,e[0]=o.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,s)=>{if("%%"===n)return"%";a++;const r=o.formatters[s];if("function"===typeof r){const s=e[a];n=r.call(t,s),e.splice(a,1),a--}return n})),o.formatArgs.call(t,e);const c=t.log||o.log;c.apply(t,e)}return i.namespace=e,i.useColors=o.useColors(),i.color=o.selectColor(e),i.extend=r,i.destroy=o.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(t!==o.namespaces&&(t=o.namespaces,s=o.enabled(e)),s),set:e=>{a=e}}),"function"===typeof o.init&&o.init(i),i}function r(e,n){const t=o(this.namespace+("undefined"===typeof n?":":n)+e);return t.log=this.log,t}function a(e){let n;o.save(e),o.namespaces=e,o.names=[],o.skips=[];const t=("string"===typeof e?e:"").split(/[\s,]+/),s=t.length;for(n=0;n<s;n++)t[n]&&(e=t[n].replace(/\*/g,".*?"),"-"===e[0]?o.skips.push(new RegExp("^"+e.slice(1)+"$")):o.names.push(new RegExp("^"+e+"$")))}function i(){const e=[...o.names.map(l),...o.skips.map(l).map((e=>"-"+e))].join(",");return o.enable(""),e}function c(e){if("*"===e[e.length-1])return!0;let n,t;for(n=0,t=o.skips.length;n<t;n++)if(o.skips[n].test(e))return!1;for(n=0,t=o.names.length;n<t;n++)if(o.names[n].test(e))return!0;return!1}function l(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function u(e){return e instanceof Error?e.stack||e.message:e}function g(){s.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.debug=o,o.default=o,o.coerce=u,o.disable=i,o.enable=a,o.enabled=c,o.humanize=t(45650),o.destroy=g,Object.keys(e).forEach((n=>{o[n]=e[n]})),o.names=[],o.skips=[],o.formatters={},o.selectColor=n,o.enable(o.load()),o}t(44114),t(98992),t(3949),t(81454),e.exports=o},45650:function(e){var n=1e3,t=60*n,s=60*t,o=24*s,r=7*o,a=365.25*o;function i(e){if(e=String(e),!(e.length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var c=parseFloat(i[1]),l=(i[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*r;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*s;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function c(e){var r=Math.abs(e);return r>=o?Math.round(e/o)+"d":r>=s?Math.round(e/s)+"h":r>=t?Math.round(e/t)+"m":r>=n?Math.round(e/n)+"s":e+"ms"}function l(e){var r=Math.abs(e);return r>=o?u(e,r,o,"day"):r>=s?u(e,r,s,"hour"):r>=t?u(e,r,t,"minute"):r>=n?u(e,r,n,"second"):e+" ms"}function u(e,n,t,s){var o=n>=1.5*t;return Math.round(e/t)+" "+s+(o?"s":"")}e.exports=function(e,n){n=n||{};var t=typeof e;if("string"===t&&e.length>0)return i(e);if("number"===t&&isFinite(e))return n.long?l(e):c(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},10139:function(e,n,t){"use strict";var s=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t.g)return t.g;throw new Error("unable to locate global object")},o=s();e.exports=n=o.fetch,o.fetch&&(n["default"]=o.fetch.bind(o)),n.Headers=o.Headers,n.Request=o.Request,n.Response=o.Response},71241:function(e,n){"use strict";n.A=(e,n)=>{const t=e.__vccOpts||e;for(const[s,o]of n)t[s]=o;return t}},3464:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var s=t(56768),o=t(24232),r=t(90144),a=t(86659),i=t(75290),c=t(1845),l=t(96529),u=t(63410),g=t(56675),d=t(22123),f=t(68881),C=t(94348);const h={class:"nft-mart-container"},p={class:"actions"},m=["disabled"],w={key:0,class:"tx-info"},b=["href"],y={key:1,class:"error"},v="G26L5YGdj9PaYuePz2jj7Qez2S3PJ39xGEKbAnoYHfVE",F="bcexaZs8HW4TabokwHVJ2Wnpb7yBw5iJ4JHiHfWJCi4",k=.1,A=24,L="https://sleek-icy-frog.solana-mainnet.quiknode.pro/9d4845e2d4c60caf45dc4f10d0bdcfdbcd6a321c";var T={__name:"NftMartPage",setup(e){const n=(0,r.KR)(!1),t=(0,r.KR)(""),T=(0,r.KR)(""),{wallet:E,publicKey:S,signTransaction:x,signAllTransactions:B,signMessage:P,connected:H,sendTransaction:M}=(0,a.vT)(),W=f.A.getters.walletAddress,_=new i.Connection(L),j=(0,r.KR)(null);async function O(){if(H.value)try{n.value=!0,T.value="",C.log("Using wallet address:",W),j.value=l.X.make(_).use((0,u.W)());const s=j.value.auctionHouse(),o=await s.findByAddress({address:new i.PublicKey(v)});C.log("Found Auction House:",o),C.log("for nft: ",F),C.log("Skipping NFT metadata check for testing purposes");const r=new Date;r.setHours(r.getHours()+A);try{C.log("–°–æ–∑–¥–∞–µ–º –ª–∏—Å—Ç–∏–Ω–≥ —á–µ—Ä–µ–∑ Metaplex...");const{blockhash:e,lastValidBlockHeight:n}=await _.getLatestBlockhash("finalized");C.log("–°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –¥–ª—è –ª–∏—Å—Ç–∏–Ω–≥–∞..."),C.log("–°–æ–∑–¥–∞–µ–º –ª–∏—Å—Ç–∏–Ω–≥ —á–µ—Ä–µ–∑ auctionHouse.list..."),C.log("Wallet address:",W),C.log("Public key:",S.value?.toString());const s={publicKey:S.value,signTransaction:async e=>(C.log("Signing transaction with Phantom..."),await window.solana.signTransaction(e)),signAllTransactions:async e=>(C.log("Signing multiple transactions with Phantom..."),await window.solana.signAllTransactions(e)),signMessage:async e=>{C.log("Signing message with Phantom...");const n=(new TextEncoder).encode(e);return await window.solana.signMessage(n)}};C.log("–°–æ–∑–¥–∞–µ–º Metaplex —Å –∞–¥–∞–ø—Ç–µ—Ä–æ–º Phantom...");const r=l.X.make(_).use((0,g.H)(s)).use((0,u.W)()),a=new i.PublicKey(W);C.log("Wallet public key:",a.toString());const f=await _.getParsedTokenAccountsByOwner(a,{mint:new i.PublicKey(F)});C.log("Token accounts:",f);const h=await(0,c.Ob)(new i.PublicKey(F),a);C.log("Associated Token Account (ATA):",h.toString());try{C.log("–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ ATA...");const e=await _.getAccountInfo(h);if(null===e)C.log("ATA –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ü—Ä–æ–±—É–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–ª–∞–Ω—Å–∞.");else{C.log("ATA —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å");const e=await _.getTokenAccountBalance(h);C.log("ATA balance:",e.value.uiAmount),e.value.uiAmount||C.warn("–ë–∞–ª–∞–Ω—Å ATA —Ä–∞–≤–µ–Ω 0")}}catch(T){C.error("Error checking ATA:",T),C.log("–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ ATA...")}C.log("–ü–æ–ª—É—á–∞–µ–º Auction House –∫–ª–∏–µ–Ω—Ç...");const p=r.auctionHouse();C.log("–°–æ–∑–¥–∞–µ–º –ª–∏—Å—Ç–∏–Ω–≥...",o);const{response:m}=await p.list({auctionHouse:o,mintAccount:new i.PublicKey(F),price:(0,d.jN)(1)}),w=m.signature;C.log("–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å –ø–æ–¥–ø–∏—Å—å—é:",w),t.value=w,C.log("–û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏...");const b=await _.confirmTransaction({signature:w,blockhash:e,lastValidBlockHeight:n},"finalized");C.log("–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞:",b),await R(w)}catch(e){return C.error("Error in auction house listing:",e),T.value=`Listing error: ${e.message}`,void(n.value=!1)}}catch(s){C.error("Error creating listing:",s),T.value=`Error: ${s.message}`}finally{n.value=!1}else T.value="Please connect your wallet first"}async function R(e){try{const n=await fetch("/api/nft-market/listings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mintAddress:F,initialPrice:k,instantPrice:k,endTime:new Date(Date.now()+60*A*60*1e3).toISOString(),sellerWallet:S.value.toString(),transactionSignature:e})}),t=await n.json();if(!t.success)throw new Error(t.message||"Failed to create listing record");C.log("Listing record created:",t)}catch(n){C.error("Error creating listing record:",n),T.value=`Error creating record: ${n.message}`}}return(0,s.sV)((()=>{H.value&&(j.value=l.X.make(_).use((0,u.W)()))})),(e,r)=>((0,s.uX)(),(0,s.CE)("div",h,[r[7]||(r[7]=(0,s.Lk)("h1",null,"NFT Mart Test Page",-1)),(0,s.Lk)("div",{class:"auction-house-info"},[r[1]||(r[1]=(0,s.Lk)("h2",null,"Auction House Info",-1)),(0,s.Lk)("p",null,[r[0]||(r[0]=(0,s.Lk)("strong",null,"Address:",-1)),(0,s.eW)(" "+(0,o.v_)(v))])]),(0,s.Lk)("div",{class:"nft-info"},[r[4]||(r[4]=(0,s.Lk)("h2",null,"NFT Info",-1)),(0,s.Lk)("p",null,[r[2]||(r[2]=(0,s.Lk)("strong",null,"Mint Address:",-1)),(0,s.eW)(" "+(0,o.v_)(F))]),(0,s.Lk)("p",null,[r[3]||(r[3]=(0,s.Lk)("strong",null,"Price:",-1)),(0,s.eW)(" "+(0,o.v_)(k)+" SOL")]),r[5]||(r[5]=(0,s.Lk)("p",null,[(0,s.Lk)("strong",null,"Duration:"),(0,s.eW)(" 24 hours")],-1))]),(0,s.Lk)("div",p,[(0,s.Lk)("button",{class:"create-listing-btn",onClick:O,disabled:n.value},(0,o.v_)(n.value?"Creating Listing...":"Create Listing"),9,m),t.value?((0,s.uX)(),(0,s.CE)("div",w,[r[6]||(r[6]=(0,s.Lk)("p",null,[(0,s.Lk)("strong",null,"Transaction Signature:")],-1)),(0,s.Lk)("a",{href:`https://solscan.io/tx/${t.value}`,target:"_blank"},(0,o.v_)(t.value),9,b)])):(0,s.Q3)("",!0),T.value?((0,s.uX)(),(0,s.CE)("div",y,[(0,s.Lk)("p",null,(0,o.v_)(T.value),1)])):(0,s.Q3)("",!0)])]))}},E=t(71241);const S=(0,E.A)(T,[["__scopeId","data-v-6e884fe8"]]);var x=S},29122:function(){}}]);
//# sourceMappingURL=1771.4ec89d83.js.map