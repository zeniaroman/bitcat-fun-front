"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[2118],{71241:function(i,l){l.A=(i,l)=>{const t=i.__vccOpts||i;for(const[s,a]of l)t[s]=a;return t}},79710:function(i,l,t){t.d(l,{A:function(){return g}});var s=t(56768);const a={class:"cancel-modal"},e={class:"cancel-modal__box"},n={class:"cancel-modal__actions"},d=["disabled"],o={key:0,class:"cancel-modal__spinner"};function c(i,l,t,c,r,u){return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.Lk)("div",e,[l[4]||(l[4]=(0,s.Lk)("h3",{class:"cancel-modal__title"},"Cancel Listing",-1)),l[5]||(l[5]=(0,s.Lk)("p",{class:"cancel-modal__message"},"Are you sure you want to cancel this listing?",-1)),(0,s.Lk)("div",n,[(0,s.Lk)("button",{type:"button",class:"cancel-modal__button cancel-modal__button--secondary",onClick:l[0]||(l[0]=l=>i.$emit("close"))}," No, Keep Listing "),(0,s.Lk)("button",{onClick:l[1]||(l[1]=l=>i.$emit("confirm")),class:"cancel-modal__button cancel-modal__button--danger",disabled:t.isSubmitting},[t.isSubmitting?((0,s.uX)(),(0,s.CE)("span",o)):(0,s.Q3)("",!0),l[3]||(l[3]=(0,s.eW)(" Yes, Cancel Listing "))],8,d)])]),(0,s.Lk)("div",{class:"cancel-modal__backdrop",onClick:l[2]||(l[2]=l=>i.$emit("close"))})])}var r={name:"CancelListingModal",props:{isSubmitting:{type:Boolean,default:!1}}},u=t(71241);const _=(0,u.A)(r,[["render",c],["__scopeId","data-v-f36f194a"]]);var g=_},76241:function(i,l,t){t.d(l,{A:function(){return F}});var s=t(56768),a=t(24232),e=t(45130);const n={class:"bid-modal"},d={class:"bid-modal__box"},o={class:"bid-modal__nft-preview"},c={class:"bid-modal__nft-image-container"},r=["src","alt"],u={key:1,class:"bid-modal__nft-placeholder"},_={class:"bid-modal__nft-name"},g={class:"bid-modal__form-group"},m=["value"],b={class:"bid-modal__form-group"},k=["min"],v={class:"bid-modal__form-help"},p={class:"bid-modal__fee-summary"},L={class:"bid-modal__fee-row"},f={class:"bid-modal__fee-row bid-modal__fee-row--total"},h={class:"bid-modal__actions"},C=["disabled"],y={key:0,class:"bid-modal__spinner"};function A(i,l,t,A,B,w){return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("div",d,[l[11]||(l[11]=(0,s.Lk)("h3",{class:"bid-modal__title"},"Place Bid",-1)),(0,s.Lk)("div",o,[(0,s.Lk)("div",c,[t.listing.imageUrl?((0,s.uX)(),(0,s.CE)("img",{key:0,src:t.listing.imageUrl,alt:t.listing.name,class:"bid-modal__nft-image"},null,8,r)):((0,s.uX)(),(0,s.CE)("div",u,l[4]||(l[4]=[(0,s.Lk)("i",{class:"fas fa-image bid-modal__nft-placeholder-icon"},null,-1)])))]),(0,s.Lk)("h4",_,(0,a.v_)(t.listing.name||`NFT #${t.listing.mintAddress.substring(0,8)}`),1)]),(0,s.Lk)("form",{onSubmit:l[2]||(l[2]=(0,e.D$)(((...i)=>w.submitBid&&w.submitBid(...i)),["prevent"])),class:"bid-modal__form"},[(0,s.Lk)("div",g,[l[5]||(l[5]=(0,s.Lk)("label",{class:"bid-modal__form-label"},[(0,s.Lk)("span",{class:"bid-modal__form-label-text"},"Current Price")],-1)),(0,s.Lk)("input",{value:w.formatPrice(t.listing.highestBid||t.listing.initialPrice),type:"text",class:"bid-modal__form-input bid-modal__form-input--disabled",disabled:""},null,8,m)]),(0,s.Lk)("div",b,[l[6]||(l[6]=(0,s.Lk)("label",{class:"bid-modal__form-label"},[(0,s.Lk)("span",{class:"bid-modal__form-label-text"},"Your Bid (SOL)")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[0]||(l[0]=i=>B.bidAmount=i),type:"number",step:"0.01",min:w.minBidAmount,placeholder:"Enter bid amount",class:"bid-modal__form-input",required:""},null,8,k),[[e.Jo,B.bidAmount]]),(0,s.Lk)("span",v,"Minimum bid: "+(0,a.v_)(w.minBidAmount)+" SOL",1)]),(0,s.Lk)("div",p,[l[9]||(l[9]=(0,s.Lk)("h4",{class:"bid-modal__fee-title"},"Fees",-1)),(0,s.Lk)("div",L,[l[7]||(l[7]=(0,s.Lk)("span",null,"Marketplace Fee (5%)",-1)),(0,s.Lk)("span",null,(0,a.v_)(w.calculateFee())+" SOL",1)]),(0,s.Lk)("div",f,[l[8]||(l[8]=(0,s.Lk)("span",null,"Total",-1)),(0,s.Lk)("span",null,(0,a.v_)(w.calculateTotal())+" SOL",1)])]),(0,s.Lk)("div",h,[(0,s.Lk)("button",{type:"button",class:"bid-modal__button bid-modal__button--cancel",onClick:l[1]||(l[1]=l=>i.$emit("close"))},"Cancel"),(0,s.Lk)("button",{type:"submit",class:"bid-modal__button bid-modal__button--submit",disabled:t.isSubmitting||!w.isFormValid},[t.isSubmitting?((0,s.uX)(),(0,s.CE)("span",y)):(0,s.Q3)("",!0),l[10]||(l[10]=(0,s.eW)(" Place Bid "))],8,C)])],32)]),(0,s.Lk)("div",{class:"bid-modal__backdrop",onClick:l[3]||(l[3]=l=>i.$emit("close"))})])}var B={name:"PlaceBidModal",props:{listing:{type:Object,required:!0},isSubmitting:{type:Boolean,default:!1}},data(){return{bidAmount:""}},computed:{minBidAmount(){const i=this.listing.highestBid||this.listing.initialPrice;return(parseFloat(i)+.01).toFixed(2)},isFormValid(){return this.bidAmount&&parseFloat(this.bidAmount)>=parseFloat(this.minBidAmount)}},methods:{formatPrice(i){return parseFloat(i).toFixed(3)},calculateFee(){if(!this.bidAmount)return"0";const i=.05*parseFloat(this.bidAmount);return i.toFixed(3)},calculateTotal(){if(!this.bidAmount)return"0";const i=parseFloat(this.bidAmount),l=.05*i;return(i+l).toFixed(3)},submitBid(){this.isFormValid&&this.$emit("submit",{mintAddress:this.listing.mintAddress,amount:parseFloat(this.bidAmount)})}},mounted(){this.bidAmount=this.minBidAmount}},w=t(71241);const E=(0,w.A)(B,[["render",A],["__scopeId","data-v-fe5ce5c6"]]);var F=E},42118:function(i,l,t){t.r(l),t.d(l,{default:function(){return G}});var s=t(56768),a=t(24232);const e={class:"listing-detail"},n={class:"listing-detail__container"},d={key:0,class:"listing-detail__loader-container"},o={key:1,class:"listing-detail__not-found"},c={key:2,class:"listing-detail__content"},r={class:"listing-detail__grid"},u={class:"listing-detail__image-section"},_={class:"listing-detail__image-container"},g=["src","alt"],m={key:1,class:"listing-detail__image-placeholder"},b={class:"listing-detail__info-section"},k={class:"listing-detail__header"},v={class:"listing-detail__title"},p={class:"listing-detail__address"},L={key:0,class:"listing-detail__status"},f={key:0,class:"listing-detail__seller-info"},h={class:"listing-detail__seller-tag"},C={class:"listing-detail__seller"},y={class:"listing-detail__seller-value"},A={class:"listing-detail__price-section"},B={class:"listing-detail__price-block"},w={class:"listing-detail__price-value"},E={key:0,class:"listing-detail__price-block"},F={class:"listing-detail__price-value"},P={class:"listing-detail__time-block"},X={class:"listing-detail__time-value"},S={class:"listing-detail__time-date"},M={key:1,class:"listing-detail__bid-section"},$={key:0,class:"listing-detail__highest-bid"},T={class:"listing-detail__bid-value"},W={class:"listing-detail__bidder"},Q={key:0,class:"listing-detail__bidder-you"},x={class:"listing-detail__actions"},D={key:2,class:"listing-detail__description"},N={class:"listing-detail__description-text"},O={class:"listing-detail__back-link-container"};function K(i,l,t,K,R,U){const V=(0,s.g2)("router-link"),q=(0,s.g2)("PlaceBidModal"),I=(0,s.g2)("CancelListingModal");return(0,s.uX)(),(0,s.CE)("div",e,[(0,s.Lk)("div",n,[K.isLoading?((0,s.uX)(),(0,s.CE)("div",d,l[5]||(l[5]=[(0,s.Lk)("div",{class:"listing-detail__loader"},null,-1)]))):K.listing?((0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",r,[(0,s.Lk)("div",u,[(0,s.Lk)("div",_,[K.listing.imageUrl?((0,s.uX)(),(0,s.CE)("img",{key:0,src:K.listing.imageUrl,alt:K.listing.name,class:"listing-detail__image"},null,8,g)):((0,s.uX)(),(0,s.CE)("div",m,l[9]||(l[9]=[(0,s.Lk)("i",{class:"fas fa-image listing-detail__placeholder-icon"},null,-1)])))])]),(0,s.Lk)("div",b,[(0,s.Lk)("div",k,[(0,s.Lk)("div",null,[(0,s.Lk)("h1",v,(0,a.v_)(K.listing.name||`NFT #${K.listing.mintAddress.substring(0,8)}`),1),(0,s.Lk)("p",p,(0,a.v_)(K.shortenAddress(K.listing.mintAddress)),1)]),"active"!==K.listing.status?((0,s.uX)(),(0,s.CE)("div",L,[(0,s.Lk)("span",{class:(0,a.C4)(["listing-detail__status-badge",{"listing-detail__status-badge--sold":"sold"===K.listing.status,"listing-detail__status-badge--cancelled":"cancelled"===K.listing.status,"listing-detail__status-badge--expired":"expired"===K.listing.status}])},(0,a.v_)(K.listing.status),3)])):(0,s.Q3)("",!0)]),K.listing.seller&&K.listing.seller.userTag?((0,s.uX)(),(0,s.CE)("div",f,[l[10]||(l[10]=(0,s.Lk)("h3",{class:"listing-detail__seller-title"},"Seller",-1)),(0,s.Lk)("p",h,(0,a.v_)(K.listing.seller.userTag),1)])):(0,s.Q3)("",!0),(0,s.Lk)("div",C,[l[11]||(l[11]=(0,s.Lk)("p",{class:"listing-detail__seller-label"},"Продавец",-1)),(0,s.Lk)("p",y,(0,a.v_)(K.listing.seller&&(K.listing.seller.displayName||K.listing.seller.userTag)||K.shortenAddress(K.listing.sellerWallet)),1)]),(0,s.Lk)("div",A,[(0,s.Lk)("div",B,[l[12]||(l[12]=(0,s.Lk)("p",{class:"listing-detail__price-label"},"Текущая цена",-1)),(0,s.Lk)("p",w,(0,a.v_)(K.formatPrice(K.listing.highestBid||K.listing.initialPrice))+" SOL",1)]),K.listing.instantPrice?((0,s.uX)(),(0,s.CE)("div",E,[l[13]||(l[13]=(0,s.Lk)("p",{class:"listing-detail__price-label"},"Цена мгновенной покупки",-1)),(0,s.Lk)("p",F,(0,a.v_)(K.formatPrice(K.listing.instantPrice))+" SOL",1)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",P,[l[14]||(l[14]=(0,s.Lk)("p",{class:"listing-detail__time-label"},"Аукцион завершается",-1)),(0,s.Lk)("p",X,(0,a.v_)(K.formatTimeRemaining(K.listing.endTime)),1),(0,s.Lk)("p",S,(0,a.v_)(K.formatDate(K.listing.endTime)),1)]),"active"===K.listing.status?((0,s.uX)(),(0,s.CE)("div",M,[K.listing.highestBid?((0,s.uX)(),(0,s.CE)("div",$,[l[15]||(l[15]=(0,s.Lk)("p",{class:"listing-detail__bid-label"},"Текущая ставка",-1)),(0,s.Lk)("p",T,(0,a.v_)(K.formatPrice(K.listing.highestBid))+" SOL",1),(0,s.Lk)("p",W,[(0,s.eW)(" от "+(0,a.v_)(K.listing.highestBidder&&K.listing.highestBidder.userTag||K.shortenAddress(K.listing.highestBidder))+" ",1),K.isCurrentUserHighestBidder?((0,s.uX)(),(0,s.CE)("span",Q,"(Вы)")):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0),(0,s.Lk)("div",x,[K.canBid?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:l[0]||(l[0]=i=>K.showBidModal=!0),class:"listing-detail__bid-button"}," Сделать ставку ")):(0,s.Q3)("",!0),K.canBuyNow?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:l[1]||(l[1]=(...i)=>K.buyNow&&K.buyNow(...i)),class:"listing-detail__buy-button"}," Купить сейчас за "+(0,a.v_)(K.formatPrice(K.listing.instantPrice))+" SOL ",1)):(0,s.Q3)("",!0),K.canCancel?((0,s.uX)(),(0,s.CE)("button",{key:2,onClick:l[2]||(l[2]=i=>K.showCancelModal=!0),class:"listing-detail__cancel-button"}," Отменить листинг ")):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0),K.listing.nftDetails&&K.listing.nftDetails.description?((0,s.uX)(),(0,s.CE)("div",D,[l[16]||(l[16]=(0,s.Lk)("h3",{class:"listing-detail__description-title"},"Описание",-1)),(0,s.Lk)("p",N,(0,a.v_)(K.listing.nftDetails.description),1)])):(0,s.Q3)("",!0)])])])):((0,s.uX)(),(0,s.CE)("div",o,[l[7]||(l[7]=(0,s.Lk)("h2",{class:"listing-detail__not-found-title"},"Листинг не найден",-1)),l[8]||(l[8]=(0,s.Lk)("p",{class:"listing-detail__not-found-message"},"NFT листинг, который вы ищете, не существует или был удален.",-1)),(0,s.bF)(V,{to:"/nft-market",class:"listing-detail__back-button"},{default:(0,s.k6)((()=>l[6]||(l[6]=[(0,s.eW)("Вернуться на маркетплейс")]))),_:1})])),(0,s.Lk)("div",O,[(0,s.bF)(V,{to:"/nft-market",class:"listing-detail__back-link"},{default:(0,s.k6)((()=>l[17]||(l[17]=[(0,s.Lk)("i",{class:"fas fa-arrow-left listing-detail__back-icon"},null,-1),(0,s.eW)(" Назад к маркетплейсу ")]))),_:1})])]),K.showBidModal&&K.listing?((0,s.uX)(),(0,s.Wv)(q,{key:0,listing:K.listing,"is-submitting":K.isPlacingBid,onClose:l[3]||(l[3]=i=>K.showBidModal=!1),onSubmit:K.handlePlaceBid},null,8,["listing","is-submitting","onSubmit"])):(0,s.Q3)("",!0),K.showCancelModal&&K.listing?((0,s.uX)(),(0,s.Wv)(I,{key:1,"is-submitting":K.isCancelling,onClose:l[4]||(l[4]=i=>K.showCancelModal=!1),onConfirm:K.handleCancelListing},null,8,["is-submitting","onConfirm"])):(0,s.Q3)("",!0)])}var R=t(90144),U=t(81387),V=t(86659),q=t(94373),I=t(76241),H=t(79710),Y=t(94348),j={name:"NftListingDetailPage",components:{PlaceBidModal:I.A,CancelListingModal:H.A},setup(){const i=(0,U.lq)(),{wallet:l,connected:t,publicKey:a}=((0,U.rd)(),(0,V.vT)()),e=(0,R.KR)(null),n=i.params.mintAddress,d=(0,R.KR)(!0),o=(0,R.KR)(!1),c=(0,R.KR)(!1),r=(0,R.KR)(!1),u=(0,R.KR)(!1),_=(0,s.EW)((()=>a.value?a.value.toString():"")),g=(0,s.EW)((()=>e.value&&e.value.highestBidder&&_.value===e.value.highestBidder)),m=(0,s.EW)((()=>t.value&&e.value&&"active"===e.value.status&&e.value.sellerWallet!==_.value&&new Date(e.value.endTime)>new Date)),b=(0,s.EW)((()=>m.value&&e.value.instantPrice)),k=(0,s.EW)((()=>t.value&&e.value&&"active"===e.value.status&&e.value.sellerWallet===_.value)),v=async()=>{try{d.value=!0;const i=await q.A.get(`/nft-market/listings/mint/${n}`);e.value=i.data.data}catch(i){Y.error("Error loading listing:",i),e.value=null}finally{d.value=!1}},p=()=>{b.value&&(r.value=!0)},L=async i=>{try{o.value=!0;await q.A.post("/nft-market/bid",{mintAddress:i.mintAddress,bidAmount:i.amount});r.value=!1,await v()}catch(l){Y.error("Error placing bid:",l),alert("Failed to place bid. Please try again.")}finally{o.value=!1}},f=async()=>{try{c.value=!0;await q.A.post("/nft-market/listings/cancel",{mintAddress:e.value.mintAddress});u.value=!1,await v()}catch(i){Y.error("Error cancelling listing:",i),alert("Failed to cancel listing. Please try again.")}finally{c.value=!1}},h=i=>parseFloat(i).toFixed(3),C=i=>{const l=new Date(i),t=new Date;if(l<=t)return"Ended";const s=l-t,a=Math.floor(s/864e5),e=Math.floor(s%864e5/36e5),n=Math.floor(s%36e5/6e4);return a>0?`${a}d ${e}h ${n}m`:e>0?`${e}h ${n}m`:`${n}m`},y=i=>{const l=new Date(i);return l.toLocaleString()},A=i=>i?`${i.substring(0,4)}...${i.substring(i.length-4)}`:"";return(0,s.sV)((()=>{v()})),{listing:e,isLoading:d,isPlacingBid:o,isCancelling:c,showBidModal:r,showCancelModal:u,isCurrentUserHighestBidder:g,canBid:m,canBuyNow:b,canCancel:k,buyNow:p,handlePlaceBid:L,handleCancelListing:f,formatPrice:h,formatTimeRemaining:C,formatDate:y,shortenAddress:A}}},J=t(71241);const z=(0,J.A)(j,[["render",K],["__scopeId","data-v-03efaec2"]]);var G=z}}]);
//# sourceMappingURL=2118.859f5395.js.map