"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[9802],{71241:function(e,a){a.A=(e,a)=>{const t=e.__vccOpts||e;for(const[l,n]of a)t[l]=n;return t}},69802:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var l=t(56768),n=t(90144),u=t(24232);const o={class:"arena-game-field"},s={class:"game-status"},v={class:"player-info"},r={class:"hp-bar"},c={class:"timer"},i={class:"player-info opponent"},p={class:"hp-bar"},y=.8,d=15,x=50,f=10;var k={__name:"ArenaGameField",setup(e,{expose:a}){const t=(0,n.KR)({x:50,y:0}),k=(0,n.KR)({x:300,y:0}),m=(0,n.KR)(100),h=(0,n.KR)(100),L=(0,n.KR)(120),M=(0,n.KR)([{id:1,x:0,y:0,width:600},{id:2,x:100,y:100,width:200},{id:3,x:400,y:150,width:150}]),_=(0,n.KR)({x:0,y:0}),b=(0,n.KR)(!1),K=(0,n.KR)(null),R=e=>{const a=Math.floor(e/60),t=e%60;return`${a}:${t.toString().padStart(2,"0")}`},T=()=>{_.value.y-=y,t.value.y+=_.value.y;for(const e of M.value)if(t.value.y<=e.y&&t.value.y+_.value.y>e.y&&t.value.x>=e.x&&t.value.x<=e.x+e.width){t.value.y=e.y,_.value.y=0,b.value=!1;break}t.value.y<0&&(t.value.y=0,_.value.y=0,b.value=!1)};let A;const w=()=>{L.value>0&&(T(),j()),A=requestAnimationFrame(w)};let g;(0,l.sV)((()=>{w(),g=setInterval((()=>{L.value>0&&L.value--}),1e3)})),(0,l.hi)((()=>{A&&cancelAnimationFrame(A),g&&clearInterval(g)}));const C=()=>{b.value||(_.value.y=d,b.value=!0)},P=()=>{const e=Math.abs(t.value.x-k.value.x);e<=x&&(h.value=Math.max(0,h.value-f))},j=()=>{const e=k.value.x<t.value.x?2:-2;k.value.x+=e;const a=Math.abs(k.value.x-t.value.x);a<=x&&(m.value=Math.max(0,m.value-1))};return a({playerPosition:(0,n.tB)(t),updatePlayerPosition:e=>{t.value.x=Math.max(20,Math.min(e,580))},jumpPlayer:C,attackPlayer:P}),(e,a)=>((0,l.uX)(),(0,l.CE)("div",o,[(0,l.Lk)("div",s,[(0,l.Lk)("div",v,[(0,l.Lk)("div",r,[(0,l.Lk)("div",{style:(0,u.Tr)({width:m.value+"%"}),class:"hp-fill"},null,4)]),a[0]||(a[0]=(0,l.Lk)("span",null,"You",-1))]),(0,l.Lk)("div",c,(0,u.v_)(R(L.value)),1),(0,l.Lk)("div",i,[(0,l.Lk)("div",p,[(0,l.Lk)("div",{style:(0,u.Tr)({width:h.value+"%"}),class:"hp-fill"},null,4)]),a[1]||(a[1]=(0,l.Lk)("span",null,"Bot",-1))])]),(0,l.Lk)("div",{class:"game-field",ref_key:"gameField",ref:K},[(0,l.Lk)("div",{class:"player",style:(0,u.Tr)({left:t.value.x+"px",bottom:t.value.y+"px"})}," ðŸ˜º ",4),(0,l.Lk)("div",{class:"player bot",style:(0,u.Tr)({left:k.value.x+"px",bottom:k.value.y+"px"})}," ðŸ¤– ",4),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(M.value,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"platform",style:(0,u.Tr)({left:e.x+"px",bottom:e.y+"px",width:e.width+"px"})},null,4)))),128))],512)]))}},m=t(71241);const h=(0,m.A)(k,[["__scopeId","data-v-12591c45"]]);var L=h,M=t(45130);const _={class:"arena-controls"},b={class:"movement-controls"},K={class:"action-controls"},R=50;var T={__name:"ArenaControls",emits:["move","jump","attack"],setup(e,{emit:a}){const t=(0,n.KR)(null),o=(0,n.KR)(null),s=(0,n.KR)({x:0,y:0}),v=(0,n.KR)(!1),r=(0,l.EW)((()=>({transform:`translate(${s.value.x}px, ${s.value.y}px)`}))),c=e=>{const a=e.touches?e.touches[0]:e,l=t.value.getBoundingClientRect();return{x:a.clientX-l.left,y:a.clientY-l.top}},i=e=>{e.preventDefault(),v.value=!0,d(e)},p=e=>{v.value&&(e.preventDefault(),d(e))},y=e=>{e.preventDefault(),v.value=!1,s.value={x:0,y:0},k("move",{x:0,y:0})},d=e=>{const a=c(e),l=t.value,n=l.offsetWidth/2,u=l.offsetHeight/2;let o=a.x-n,v=a.y-u;const r=Math.sqrt(o*o+v*v);if(r>R){const e=Math.atan2(v,o);o=Math.cos(e)*R,v=Math.sin(e)*R}s.value={x:o,y:v},k("move",{x:o/R,y:-v/R})},x=e=>{e.preventDefault(),k("jump")},f=e=>{e.preventDefault(),k("attack")},k=a;return(e,a)=>((0,l.uX)(),(0,l.CE)("div",_,[(0,l.Lk)("div",b,[(0,l.Lk)("div",{ref_key:"joystickContainer",ref:t,class:"joystick-container",onTouchstart:i,onTouchmove:p,onTouchend:y,onMousedown:i,onMousemove:p,onMouseup:y,onMouseleave:y},[(0,l.Lk)("div",{ref_key:"joystick",ref:o,class:"joystick",style:(0,u.Tr)(r.value)},null,4)],544)]),(0,l.Lk)("div",K,[(0,l.Lk)("button",{class:"action-button jump",onTouchstart:(0,M.D$)(x,["prevent"]),onMousedown:(0,M.D$)(x,["prevent"])}," JUMP ",32),(0,l.Lk)("button",{class:"action-button attack",onTouchstart:(0,M.D$)(f,["prevent"]),onMousedown:(0,M.D$)(f,["prevent"])}," ATTACK ",32)])]))}};const A=(0,m.A)(T,[["__scopeId","data-v-30be4129"]]);var w=A;const g={class:"arena-page"},C={class:"game-container"},P=5;var j={__name:"ArenaPage",setup(e){const a=(0,n.KR)(null),t=({x:e,y:t})=>{if(!a.value)return;const l=a.value.playerPosition,n=l.x+e*P,u=Math.max(20,Math.min(n,580));a.value.updatePlayerPosition(u,l.y)},u=()=>{a.value&&a.value.jumpPlayer()},o=()=>{a.value&&a.value.attackPlayer()};return(e,n)=>((0,l.uX)(),(0,l.CE)("div",g,[n[0]||(n[0]=(0,l.Lk)("h1",null,"BITCAT Arena",-1)),(0,l.Lk)("div",C,[(0,l.bF)(L,{ref_key:"gameField",ref:a},null,512)]),(0,l.bF)(w,{onMove:t,onJump:u,onAttack:o})]))}};const D=(0,m.A)(j,[["__scopeId","data-v-135dd082"]]);var F=D}}]);
//# sourceMappingURL=9802.48c76826.js.map