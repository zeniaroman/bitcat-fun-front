"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[7710],{71241:function(e,a){a.A=(e,a)=>{const s=e.__vccOpts||e;for(const[t,l]of a)s[t]=l;return s}},10587:function(e,a,s){s.d(a,{A:function(){return c}});var t=s(56768),l=s(24232);const u={class:"toast-content"};function r(e,a,s,r,n,o){return s.show?((0,t.uX)(),(0,t.CE)("div",{key:0,class:(0,l.C4)(["toast",`toast-${s.type}`])},[(0,t.Lk)("div",u,(0,l.v_)(s.message),1),(0,t.Lk)("button",{class:"toast-close",onClick:a[0]||(a[0]=(...e)=>o.close&&o.close(...e))},"Ã—")],2)):(0,t.Q3)("",!0)}var n={name:"AppToast",props:{message:{type:String,default:""},type:{type:String,default:"info",validator:e=>["success","error","warning","info"].includes(e)},duration:{type:Number,default:3e3},show:{type:Boolean,default:!1}},emits:["close"],watch:{show(e){e&&this.duration>0&&(this.timer=setTimeout((()=>{this.close()}),this.duration))}},methods:{close(){this.timer&&clearTimeout(this.timer),this.$emit("close")}},beforeUnmount(){this.timer&&clearTimeout(this.timer)},data(){return{timer:null}}},o=s(71241);const i=(0,o.A)(n,[["render",r],["__scopeId","data-v-9f6ec8d0"]]);var c=i},57710:function(e,a,s){s.r(a),s.d(a,{default:function(){return J}});var t=s(56768),l=s(24232),u=s(90144),r=s(4249),n=s(81387),o=s(94373),i=s(10587),c=s(94348);const v={class:"reward-post-page"},d={class:"reward-post-page-wrap"},p={class:"page-header"},k={key:0,class:"post-container"},f={class:"post-card"},h={class:"post-header"},w={class:"post-author"},L={key:1,class:"system-badge"},g={class:"post-status"},m={key:0,class:"status-badge rejected"},y={key:1,class:"status-badge inactive"},E={key:2,class:"status-badge active"},C={class:"post-date"},b={key:0},T={key:1},X={class:"post-content"},W={class:"tweet-embed"},R=["href"],_={key:1,class:"blocked-tweet"},A={key:2,class:"tweet-stats"},j={class:"stat-item"},I={class:"stat-item"},$={key:3,class:"tweet-stats tweet-stats-with-text"},Q={key:4,class:"tweet-stats tweet-stats-with-text"},K={class:"reward-info"},x={key:0},D={key:0,class:"voting-section"},M={key:0,class:"voting-closed"},P={key:0,class:"vote-actions"},S={key:1,class:"approval-stats"},V={key:2,class:"voting-ended"},F={key:2,class:"voting-results"},B={class:"approval-bar"},O={class:"approval-stats"},U={class:"approval-text"},q={class:"approval-count"},N={class:"rejection-count"},Y={key:1,class:"loading-container"};var z={__name:"RewardPostPage",setup(e){const a=(0,r.Pj)(),s=(0,n.lq)(),z=(0,t.EW)((()=>a.getters.isAuthenticated)),G=(0,t.EW)((()=>a.state.user?.userTag)),H=(0,u.KR)(null),J=(0,u.KR)(!0),Z=(0,u.KR)(!1),ee=(0,u.KR)(""),ae=(0,u.KR)("info"),se=async()=>{try{J.value=!0;const e=s.params.tweetId,a=await o.A.get(`/rewards/post/${e}`);a.data.success&&(H.value=a.data.post,ve())}catch(e){c.error("Error fetching post:",e)}finally{J.value=!1}},te=((0,t.EW)((()=>!(!G.value||!H.value)&&(H.value.usersApproved.includes(G.value)||H.value.usersRejected.includes(G.value)))),(0,t.EW)((()=>!(!G.value||!H.value)&&H.value.usersApproved.includes(G.value)))),le=(0,t.EW)((()=>!(!G.value||!H.value)&&H.value.usersRejected.includes(G.value))),ue=(0,t.EW)((()=>{if(!H.value||!H.value.endedTime||H.value.checkTime)return!1;const e=new Date,a=new Date(H.value.endedTime);return a>e&&!H.value.checkTime})),re=(0,t.EW)((()=>!ue.value)),ne=(0,t.EW)((()=>{if(!H.value)return 50;const e=H.value.usersApproved.length,a=H.value.usersRejected.length,s=e+a;return 0===s?50:Math.round(e/s*100)})),oe=(0,t.EW)((()=>{if(!H.value)return 50;const e=H.value.usersApproved.length,a=H.value.usersRejected.length,s=e+a;return 0===s?50:Math.round(a/s*100)})),ie=(0,u.KR)(0),ce=(0,u.KR)(""),ve=()=>{if(!H.value||!H.value.endedTime)return void(ce.value="Loading...");if(!ue.value)return void(ce.value="Inactive");const e=new Date,a=new Date(H.value.endedTime),s=a-e;if(s<=0)return ie.value=0,void(ce.value="Ended");const t=Math.floor(s/6e4),l=Math.floor(t/60),u=t%60;ie.value=t,ce.value=l>0?`${l}h ${u}m left`:`${u}m left`},de=e=>{const a=new Date(e);return a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},pe=(e,a="info")=>{ee.value=e,ae.value=a,Z.value=!0},ke=()=>{Z.value=!1},fe=async e=>{if(H.value)try{const a=await o.A.post("/rewards/vote",{postId:H.value.id,approve:e});a.data.success&&(await se(),pe(a.data.message,"success"))}catch(a){c.error("Error voting for post:",a),pe(a.response?.data?.message||"Error voting for post","error")}};let he=null;return(0,t.sV)((()=>{se(),he=setInterval(ve,6e4)})),(0,t.hi)((()=>{he&&clearInterval(he)})),(e,a)=>{const s=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("div",v,[(0,t.bF)(i.A,{message:ee.value,type:ae.value,show:Z.value,onClose:ke},null,8,["message","type","show"]),(0,t.Lk)("div",d,[(0,t.Lk)("div",p,[(0,t.bF)(s,{to:"/rewards",class:"back-link"},{default:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,t.eW)(" Back to Rewards ")]))),_:1}),a[3]||(a[3]=(0,t.Lk)("h1",null,"Tweet Details",-1))]),H.value?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.Lk)("div",f,[(0,t.Lk)("div",h,[(0,t.Lk)("div",w,[a[4]||(a[4]=(0,t.Lk)("i",{class:"fas fa-user-circle"},null,-1)),"system"!==H.value.userTag?((0,t.uX)(),(0,t.Wv)(s,{key:0,to:`/player/${H.value.userTag}`,class:"post-user"},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(H.value.userTag),1)])),_:1},8,["to"])):((0,t.uX)(),(0,t.CE)("span",L,"Official"))]),(0,t.Lk)("div",g,[H.value.approved?re.value?((0,t.uX)(),(0,t.CE)("span",y,a[6]||(a[6]=[(0,t.Lk)("i",{class:"fas fa-clock"},null,-1),(0,t.eW)(" Inactive ")]))):ue.value?((0,t.uX)(),(0,t.CE)("span",E,a[7]||(a[7]=[(0,t.Lk)("i",{class:"fas fa-check"},null,-1),(0,t.eW)(" Active ")]))):(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("span",m,a[5]||(a[5]=[(0,t.Lk)("i",{class:"fas fa-ban"},null,-1),(0,t.eW)(" Rejected ")])))])]),(0,t.Lk)("div",C,[a[8]||(a[8]=(0,t.Lk)("i",{class:"fas fa-calendar-alt"},null,-1)),ue.value?((0,t.uX)(),(0,t.CE)("span",b,(0,l.v_)(ce.value),1)):((0,t.uX)(),(0,t.CE)("span",T,(0,l.v_)(de(H.value.createdAt)),1))]),(0,t.Lk)("div",X,[(0,t.Lk)("div",W,[H.value.approved?((0,t.uX)(),(0,t.CE)("a",{key:0,href:`https://twitter.com/i/status/${H.value.tweetId}`,target:"_blank",class:"tweet-link"},[a[9]||(a[9]=(0,t.Lk)("i",{class:"fab fa-twitter"},null,-1)),(0,t.eW)(" View Tweet "+(0,l.v_)(H.value.tweetId),1)],8,R)):((0,t.uX)(),(0,t.CE)("div",_,a[10]||(a[10]=[(0,t.Lk)("i",{class:"fas fa-lock"},null,-1),(0,t.eW)(" Post has been blocked due to community moderation ")]))),H.value.approved&&!ue.value?((0,t.uX)(),(0,t.CE)("div",A,[(0,t.Lk)("div",j,[a[11]||(a[11]=(0,t.Lk)("i",{class:"fas fa-heart"},null,-1)),(0,t.Lk)("span",null,(0,l.v_)(H.value.usersLiked.length)+" likes",1)]),(0,t.Lk)("div",I,[a[12]||(a[12]=(0,t.Lk)("i",{class:"fas fa-retweet"},null,-1)),(0,t.Lk)("span",null,(0,l.v_)(H.value.usersRetweeted.length)+" retweets",1)])])):(0,t.Q3)("",!0),H.value.approved&&!ue.value?((0,t.uX)(),(0,t.CE)("div",$,a[13]||(a[13]=[(0,t.Lk)("p",{class:"tweet-stats-text"},"Interactions verified, rewards awarded",-1)]))):(0,t.Q3)("",!0),H.value.approved&&ue.value?((0,t.uX)(),(0,t.CE)("div",Q,a[14]||(a[14]=[(0,t.Lk)("p",{class:"tweet-stats-text"},"You can interact with this tweet. After the post is finished, we will check the results and reward you",-1)]))):(0,t.Q3)("",!0)]),(0,t.Lk)("div",K,[a[18]||(a[18]=(0,t.Lk)("h3",null,"Reward Info",-1)),a[19]||(a[19]=(0,t.Lk)("p",null,"Interact with this tweet to earn:",-1)),(0,t.Lk)("ul",null,[a[16]||(a[16]=(0,t.Lk)("li",null,[(0,t.Lk)("i",{class:"fas fa-heart"}),(0,t.eW)(" Like: +1 power")],-1)),a[17]||(a[17]=(0,t.Lk)("li",null,[(0,t.Lk)("i",{class:"fas fa-retweet"}),(0,t.eW)(" Retweet: +3 power")],-1)),"system"!==H.value.userTag?((0,t.uX)(),(0,t.CE)("li",x,a[15]||(a[15]=[(0,t.Lk)("i",{class:"fas fa-vote-yea"},null,-1),(0,t.eW)(" Vote: +1 power")]))):(0,t.Q3)("",!0)])])])]),z.value?((0,t.uX)(),(0,t.CE)("div",D,[H.value.approved?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},["system"!==H.value.userTag&&ue.value?((0,t.uX)(),(0,t.CE)("div",P,[(0,t.Lk)("button",{onClick:a[0]||(a[0]=e=>fe(!0)),class:(0,l.C4)(["approve-button",{active:te.value}])},a[21]||(a[21]=[(0,t.Lk)("i",{class:"fas fa-thumbs-up"},null,-1),(0,t.eW)(" Approve ")]),2),(0,t.Lk)("button",{onClick:a[1]||(a[1]=e=>fe(!1)),class:(0,l.C4)(["reject-button",{active:le.value}])},a[22]||(a[22]=[(0,t.Lk)("i",{class:"fas fa-thumbs-down"},null,-1),(0,t.eW)(" Reject ")]),2)])):((0,t.uX)(),(0,t.CE)("div",S,a[23]||(a[23]=[(0,t.Lk)("div",{class:"approval-text"},[(0,t.Lk)("span",null,"This post is created by the system and cannot be voted on")],-1)]))),re.value&&H.value.approved&&"system"!==H.value.userTag?((0,t.uX)(),(0,t.CE)("div",V,a[24]||(a[24]=[(0,t.Lk)("div",{class:"ended-message"},[(0,t.Lk)("i",{class:"fas fa-clock"}),(0,t.Lk)("p",null,"This post has ended and voting is closed.")],-1)]))):(0,t.Q3)("",!0)],64)):((0,t.uX)(),(0,t.CE)("div",M,a[20]||(a[20]=[(0,t.Lk)("div",{class:"rejection-message"},[(0,t.Lk)("i",{class:"fas fa-exclamation-triangle"}),(0,t.Lk)("p",null,"This post has been rejected by community moderation."),(0,t.Lk)("p",null,"Rewards were awarded to those who voted to reject the post.")],-1)]))),"system"!==H.value.userTag?((0,t.uX)(),(0,t.CE)("div",F,[a[25]||(a[25]=(0,t.Lk)("h3",null,"Community Voting",-1)),(0,t.Lk)("div",B,[(0,t.Lk)("div",{class:"approval-progress approval-progress--approve",style:(0,l.Tr)({width:`${ne.value}%`})},null,4),(0,t.Lk)("div",{class:"approval-progress approval-progress--reject",style:(0,l.Tr)({width:`${oe.value}%`,right:0})},null,4)]),(0,t.Lk)("div",O,[(0,t.Lk)("div",U,[(0,t.Lk)("span",q,(0,l.v_)(H.value.usersApproved.length)+" approved",1),(0,t.Lk)("span",N,(0,l.v_)(H.value.usersRejected.length)+" rejected",1)])])])):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0)])):((0,t.uX)(),(0,t.CE)("div",Y,a[26]||(a[26]=[(0,t.Lk)("div",{class:"loading-spinner"},[(0,t.Lk)("i",{class:"fas fa-spinner fa-spin"}),(0,t.Lk)("span",null,"Loading post...")],-1)])))])])}}},G=s(71241);const H=(0,G.A)(z,[["__scopeId","data-v-3fac7afb"]]);var J=H}}]);
//# sourceMappingURL=7710.845db227.js.map