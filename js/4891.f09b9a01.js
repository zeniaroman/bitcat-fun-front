"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[4891],{51244:function(e,t,n){n.d(t,{RH:function(){return c},UZ:function(){return u}});var r=n(71381),s=n(85234),i=n(54977),o=n(98884);const a={name:"MintAccount",deserialize:(e,t)=>{const n=r.x7.getSpan(e,t),s=r.x7.decode(e,t);return[s,n]},fromArgs(){throw new i.yh}},c=((0,o.C3)(a),(0,o.dd)(a)),d={name:"TokenAccount",deserialize:(e,t)=>{const n=s.O9.getSpan(e,t),r=s.O9.decode(e,t);return[r,n]},fromArgs(){throw new i.yh}},u=((0,o.C3)(d),(0,o.dd)(d))},28779:function(e,t,n){n.d(t,{S:function(){return s}});var r=n(75290);const s=new r.PublicKey("So11111111111111111111111111111111111111112")},45506:function(e,t,n){n.d(t,{v:function(){return o}});var r=n(99350),s=(n(71381),n(85234)),i=n(42336);i.I;class o extends i.I{constructor(e,t){super(e,t??r.x5),this.whereSize(s.a8)}selectMint(){return this.slice(0,32)}whereMint(e){return this.where(0,e)}selectOwner(){return this.slice(32,32)}whereOwner(e){return this.where(32,e)}selectAmount(){return this.slice(64,8)}whereAmount(e){return this.where(64,e)}whereDoesntHaveDelegate(){return this.where(72,0)}whereHasDelegate(){return this.where(72,1)}whereDelegate(e){return this.whereHasDelegate().where(76,e)}}},25293:function(e,t,n){n.d(t,{MX:function(){return i}});var r=n(28779),s=n(22123);const i=e=>{const t=e.publicKey.equals(r.S),n={symbol:t?"SOL":"Token",decimals:e.data.decimals,namespace:"spl-token"};return{model:"mint",address:e.publicKey,mintAuthorityAddress:e.data.mintAuthorityOption?e.data.mintAuthority:null,freezeAuthorityAddress:e.data.freezeAuthorityOption?e.data.freezeAuthority:null,decimals:e.data.decimals,supply:(0,s.vj)(e.data.supply.toString(),n),isWrappedSol:t,currency:n}}},59648:function(e,t,n){n.d(t,{fD:function(){return o},t8:function(){return a}});n(98992),n(72577);var r=n(70676),s=n(22123),i=n(76792);const o=e=>{const t=i.G.find(r.m.address,[e.data.owner.toBuffer(),e.owner.toBuffer(),e.data.mint.toBuffer()]),n=t.equals(e.publicKey);return{model:"token",address:n?t:e.publicKey,isAssociatedToken:n,mintAddress:e.data.mint,ownerAddress:e.data.owner,amount:(0,s.Sh)(e.data.amount.toString()),closeAuthorityAddress:e.data.closeAuthorityOption?e.data.closeAuthority:null,delegateAddress:e.data.delegateOption?e.data.delegate:null,delegateAmount:(0,s.Sh)(e.data.delegatedAmount.toString()),state:e.data.state}};const a=(e,t)=>{const n=o(e);return{...n,model:"tokenWithMint",mint:t,amount:(0,s.vj)(n.amount.basisPoints,t.currency),delegateAmount:(0,s.vj)(n.delegateAmount.basisPoints,t.currency)}}},65913:function(e,t,n){n.d(t,{a:function(){return Ie}});var r=n(70676),s=n(71381),i=n(37415),o=n(75290),a=n(28694),c=n(56402);const d="CreateMintOperation",u=(0,a.j)(d),p={async handle(e,t,n){const r=await l(t,e.input,n);n.throwIfCanceled();const s=(0,a.Y)(t,n.confirmOptions),i=await r.sendAndConfirm(t,s);n.throwIfCanceled();const o=await t.tokens().findMintByAddress({address:i.mintSigner.publicKey},n);return{...i,mint:o}}},l=async(e,t,n={})=>{const{programs:r,payer:a=e.rpc().getDefaultFeePayer()}=n,{decimals:d=0,mint:u=o.Keypair.generate(),mintAuthority:p=e.identity().publicKey,freezeAuthority:l=p}=t,m=e.programs().getToken(r);return c.Q.make().setFeePayer(a).setContext({mintSigner:u}).add(await e.system().builders().createAccount({newAccount:u,space:s.Bb,program:m.address,instructionKey:t.createAccountInstructionKey??"createAccount"},{payer:a,programs:r})).add({instruction:(0,i.Dn)(u.publicKey,d,p,l,m.address),signers:[u],key:t.initializeMintInstructionKey??"initializeMint"})};var m=n(34751),y=n(85234),h=n(87900),k=n(54977),g=n(9209),A=n(3397);const w="CreateTokenOperation",f=(0,a.j)(w),T={async handle(e,t,n){const r=await x(t,e.input,n);n.throwIfCanceled();const s=(0,a.Y)(t,n.confirmOptions),i=await r.sendAndConfirm(t,s);n.throwIfCanceled();const o=await t.tokens().findTokenByAddress({address:i.tokenAddress},n);return{...i,token:o}}},x=async(e,t,n={})=>{const{programs:r,payer:s=e.rpc().getDefaultFeePayer()}=n,{mint:i,owner:o=e.identity().publicKey,token:a}=t,d=e.programs().getToken(r),u=e.programs().getAssociatedToken(r),p=void 0===a,l=c.Q.make().setFeePayer(s);if(p){const n=e.tokens().pdas().associatedTokenAccount({mint:i,owner:o,programs:r});return l.setContext({tokenAddress:n}).add({instruction:(0,m.JA)(s.publicKey,n,o,i,d.address,u.address),signers:[s],key:t.createAssociatedTokenAccountInstructionKey??"createAssociatedTokenAccount"})}return l.setFeePayer(s).setContext({tokenAddress:a.publicKey}).add(await e.system().builders().createAccount({newAccount:a,space:y.a8,program:d.address,instructionKey:t.createAccountInstructionKey??"createAccount"},{payer:s,programs:r})).add({instruction:(0,h.ux)(a.publicKey,i,o,d.address),signers:[a],key:t.initializeTokenInstructionKey??"initializeToken"})},K=async(e,t,n={})=>{const{programs:r,payer:s=e.rpc().getDefaultFeePayer()}=n,{mint:i,owner:o=e.identity().publicKey,token:a,tokenExists:d=!0,tokenVariable:u="token"}=t,p=a??e.tokens().pdas().associatedTokenAccount({mint:i,owner:o,programs:r}),l=(0,g.G)(p),m=c.Q.make().setFeePayer(s).setContext({tokenAddress:l});if(d)return m;if(a&&!(0,A.Jz)(a))throw new k.fC(u,"PublicKey",`The provided "${u}" account at address [${l}] does not exist. Therefore, it needs to be created and passed as a Signer. If you want to create the "${u}" account, then please pass it as a Signer. Alternatively, you can pass the owner account as a PublicKey instead to use (or create) an associated token account.`);return m.add(await e.tokens().builders().createToken({...t,mint:i,owner:o,token:a},{programs:r,payer:s}))};var b=n(11723),M=n(70519);class v extends M.j{constructor(e,t){super(e,"plugin","Token",t),(0,b.n8)(this,"name","TokenError")}}class P extends v{constructor(){const e='You are trying to create a Mint and a Token account and to send an initial supply of token to the newly created Token account. The issue is, you have provided a Mint Authority as a Public Key which means we don\'t have the rights to send this transaction. Please provide the Mint Authority as a Signer when using the "createTokenWithMint" operation , so we can send the initial supply. Alternative, remove the initial supply from the operation for it to succeed.';super(e),(0,b.n8)(this,"name","MintAuthorityMustBeSignerToMintInitialSupplyError")}}class O extends v{constructor(e,t,n){const r=`The provided Token and Mint accounts do not match. That is, the mint address [${t}] stored in the Token account [${e}] do not match the address of the Mint account [${n}]. Please provide a Token account that belongs to the provided Mint account.`;super(r)}}const I="CreateTokenWithMintOperation",z=(0,a.j)(I),C={async handle(e,t,n){const r=await S(t,e.input,n);n.throwIfCanceled();const s=(0,a.Y)(t,n.confirmOptions),i=await r.sendAndConfirm(t,s);n.throwIfCanceled();const o=await t.tokens().findTokenWithMintByMint({mint:i.mintSigner.publicKey,address:i.tokenAddress,addressType:"token"},n);return{...i,token:o}}},S=async(e,t,n={})=>{const{programs:r,payer:s=e.rpc().getDefaultFeePayer()}=n,{decimals:i=0,initialSupply:a,mint:d=o.Keypair.generate(),mintAuthority:u=e.identity(),freezeAuthority:p=e.identity().publicKey,owner:l=e.identity().publicKey,token:m}=t,y=await e.tokens().builders().createMint({decimals:i,mint:d,mintAuthority:(0,g.G)(u),freezeAuthority:p,createAccountInstructionKey:t.createMintAccountInstructionKey??"createMintAccount",initializeMintInstructionKey:t.initializeMintInstructionKey??"initializeMint"},{programs:r,payer:s}),h=await e.tokens().builders().createToken({mint:d.publicKey,owner:l,token:m,createAssociatedTokenAccountInstructionKey:t.createAssociatedTokenAccountInstructionKey??"createAssociatedTokenAccount",createAccountInstructionKey:t.createTokenAccountInstructionKey??"createTokenAccount",initializeTokenInstructionKey:t.initializeTokenInstructionKey??"initializeToken"},{payer:s,programs:r}),{tokenAddress:k}=h.getContext(),w=c.Q.make().setFeePayer(s).setContext({mintSigner:d,tokenAddress:k}).add(y).add(h);if(a){if(!(0,A.Jz)(u))throw new P;w.add(await e.tokens().builders().mint({mintAddress:d.publicKey,toToken:k,amount:a,mintAuthority:u,mintTokensInstructionKey:t.mintTokensInstructionKey??"mintTokens"},{payer:s,programs:r}))}return w};var F=n(8840);const D="MintTokensOperation",B=(0,a.j)(D),R={async handle(e,t,n){const{programs:r,confirmOptions:s}=n,{mintAddress:i,toOwner:o=t.identity().publicKey,toToken:a}=e.input,c=a??t.tokens().pdas().associatedTokenAccount({mint:i,owner:o,programs:r}),d=(0,g.G)(c),u=await t.rpc().accountExists(d);n.throwIfCanceled();const p=await j(t,{...e.input,toTokenExists:u},n);return n.throwIfCanceled(),p.sendAndConfirm(t,s)}},j=async(e,t,n={})=>{const{programs:r,payer:s=e.rpc().getDefaultFeePayer()}=n,{mintAddress:i,amount:o,toOwner:a=e.identity().publicKey,toToken:d,toTokenExists:u=!0,mintAuthority:p=e.identity(),multiSigners:l=[]}=t,[m,y]=(0,A.Jz)(p)?[p.publicKey,[p]]:[p,l],h=e.programs().getToken(r),k=d??e.tokens().pdas().associatedTokenAccount({mint:i,owner:a,programs:r});return c.Q.make().add(await e.tokens().builders().createTokenIfMissing({...t,mint:i,owner:a,token:d,tokenExists:u,tokenVariable:"toToken"},{payer:s,programs:r})).add({instruction:(0,F.OC)(i,(0,g.G)(k),m,o.basisPoints.toNumber(),l,h.address),signers:y,key:t.mintTokensInstructionKey??"mintTokens"})};n(98992),n(54520);var E=n(41346);const Q="SendTokensOperation",W=(0,a.j)(Q),J={async handle(e,t,n){const{mintAddress:r,toOwner:s=t.identity().publicKey,toToken:i}=e.input,o=i??t.tokens().pdas().associatedTokenAccount({mint:r,owner:s,programs:n.programs}),a=(0,g.G)(o),c=await t.rpc().accountExists(a);n.throwIfCanceled();const d=await G(t,{...e.input,toTokenExists:c},n);return n.throwIfCanceled(),d.sendAndConfirm(t,n.confirmOptions)}},G=async(e,t,n={})=>{const{programs:r,payer:s=e.rpc().getDefaultFeePayer()}=n,{mintAddress:i,amount:o,toOwner:a=e.identity().publicKey,toToken:d,toTokenExists:u=!0,fromOwner:p=e.identity(),fromToken:l,fromMultiSigners:m=[],delegateAuthority:y}=t,[h,k]=(0,A.Jz)(p)?[p.publicKey,[p]]:[p,[y,...m].filter(A.Jz)],w=e.programs().getToken(r),f=l??e.tokens().pdas().associatedTokenAccount({mint:i,owner:h,programs:r}),T=d??e.tokens().pdas().associatedTokenAccount({mint:i,owner:a,programs:r});return c.Q.make().setFeePayer(s).add(await e.tokens().builders().createTokenIfMissing({...t,mint:i,owner:a,token:d,tokenExists:u,tokenVariable:"toToken"},{programs:r,payer:s})).add({instruction:(0,E.C3)(f,(0,g.G)(T),y?y.publicKey:h,o.basisPoints.toNumber(),m,w.address),signers:k,key:t.transferTokensInstructionKey??"transferTokens"})};var H=n(96767);const U="FreezeTokensOperation",Y=(0,a.j)(U),$={async handle(e,t,n){return X(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},X=(e,t,n={})=>{const{programs:r,payer:s=e.rpc().getDefaultFeePayer()}=n,{mintAddress:i,tokenOwner:o=e.identity().publicKey,tokenAddress:a,multiSigners:d=[],freezeAuthority:u}=t,[p,l]=(0,A.Jz)(u)?[u.publicKey,[u]]:[u,d],m=e.programs().getToken(r),y=a??e.tokens().pdas().associatedTokenAccount({mint:i,owner:o,programs:r});return c.Q.make().setFeePayer(s).add({instruction:(0,H.FT)(y,i,p,d,m.address),signers:l,key:t.instructionKey??"freezeTokens"})};var Z=n(33202);const q="ThawTokensOperation",N=(0,a.j)(q),V={async handle(e,t,n){return L(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},L=(e,t,n={})=>{const{programs:r,payer:s=e.rpc().getDefaultFeePayer()}=n,{mintAddress:i,tokenOwner:o=e.identity().publicKey,tokenAddress:a,multiSigners:d=[],freezeAuthority:u}=t,[p,l]=(0,A.Jz)(u)?[u.publicKey,[u]]:[u,d],m=e.programs().getToken(r),y=a??e.tokens().pdas().associatedTokenAccount({mint:i,owner:o,programs:r});return c.Q.make().setFeePayer(s).add({instruction:(0,Z.iY)(y,i,p,d,m.address),signers:l,key:t.instructionKey??"thawTokens"})};var _=n(59952),ee=n(22123);const te="ApproveTokenDelegateAuthorityOperation",ne=(0,a.j)(te),re={handle:async(e,t,n)=>se(t,e.input,n).sendAndConfirm(t,n.confirmOptions)},se=(e,t,n={})=>{const{programs:r,payer:s=e.rpc().getDefaultFeePayer()}=n,{mintAddress:i,delegateAuthority:o,amount:a=(0,ee.Sh)(1),owner:d=e.identity(),tokenAddress:u,multiSigners:p=[]}=t,[l,m]=(0,A.Jz)(d)?[d.publicKey,[d]]:[d,p],y=e.programs().getToken(r),h=u??e.tokens().pdas().associatedTokenAccount({mint:i,owner:l,programs:r});return c.Q.make().setFeePayer(s).add({instruction:(0,_.U6)(h,o,l,a.basisPoints.toNumber(),p,y.address),signers:m,key:t.instructionKey??"approveDelegateAuthority"})};var ie=n(67967);const oe="RevokeTokenDelegateAuthorityOperation",ae=(0,a.j)(oe),ce={handle:async(e,t,n)=>de(t,e.input,n).sendAndConfirm(t,n.confirmOptions)},de=(e,t,n={})=>{const{programs:r,payer:s=e.rpc().getDefaultFeePayer()}=n,{mintAddress:i,owner:o=e.identity(),tokenAddress:a,multiSigners:d=[]}=t,[u,p]=(0,A.Jz)(o)?[o.publicKey,[o]]:[o,d],l=e.programs().getToken(r),m=a??e.tokens().pdas().associatedTokenAccount({mint:i,owner:u,programs:r});return c.Q.make().setFeePayer(s).add({instruction:(0,ie.PF)(m,u,d,l.address),signers:p,key:t.instructionKey??"revokeDelegateAuthority"})};class ue{constructor(e){this.metaplex=e}createMint(e,t){return l(this.metaplex,e,t)}createToken(e,t){return x(this.metaplex,e,t)}createTokenIfMissing(e,t){return K(this.metaplex,e,t)}createTokenWithMint(e,t){return S(this.metaplex,e,t)}mint(e,t){return j(this.metaplex,e,t)}send(e,t){return G(this.metaplex,e,t)}freeze(e,t){return X(this.metaplex,e,t)}thaw(e,t){return L(this.metaplex,e,t)}approveDelegateAuthority(e,t){return se(this.metaplex,e,t)}revokeDelegateAuthority(e,t){return de(this.metaplex,e,t)}}n(72577);var pe=n(76792);class le{constructor(e){this.metaplex=e}associatedTokenAccount({mint:e,owner:t,programs:n}){const r=this.metaplex.programs().getToken(n),s=this.metaplex.programs().getAssociatedToken(n);return pe.G.find(s.address,[t.toBuffer(),r.address.toBuffer(),e.toBuffer()])}}var me=n(51244),ye=n(25293);const he="FindMintByAddressOperation",ke=(0,a.j)(he),ge={handle:async(e,t,n)=>{const{commitment:r}=n,{address:s}=e.input,i=(0,me.RH)(await t.rpc().getAccount(s,r));return(0,ye.MX)(i)}};var Ae=n(59648);const we="FindTokenByAddressOperation",fe=(0,a.j)(we),Te={handle:async(e,t,n)=>{const{commitment:r}=n,{address:s}=e.input,i=(0,me.UZ)(await t.rpc().getAccount(s,r));return(0,Ae.fD)(i)}},xe="FindTokenWithMintByAddressOperation",Ke=(0,a.j)(xe),be={handle:async(e,t,n)=>{const{commitment:r}=n,{address:s}=e.input,i=(0,me.UZ)(await t.rpc().getAccount(s,r)),o=(0,me.RH)(await t.rpc().getAccount(i.data.mint,r));return(0,Ae.t8)(i,(0,ye.MX)(o))}},Me="FindTokenWithMintByMintOperation",ve=(0,a.j)(Me),Pe={handle:async(e,t,n)=>{const{commitment:r,programs:s}=n,{mint:i,address:o,addressType:a}=e.input,c="owner"===a?t.tokens().pdas().associatedTokenAccount({mint:i,owner:o,programs:s}):o,d=await t.rpc().getMultipleAccounts([i,c],r),u=(0,me.RH)(d[0]),p=(0,me.UZ)(d[1]);if(!p.data.mint.equals(i))throw new O(c,p.data.mint,i);return(0,Ae.t8)(p,(0,ye.MX)(u))}};class Oe{constructor(e){this.metaplex=e}builders(){return new ue(this.metaplex)}pdas(){return new le(this.metaplex)}findMintByAddress(e,t){return this.metaplex.operations().execute(ke(e),t)}findTokenByAddress(e,t){return this.metaplex.operations().execute(fe(e),t)}findTokenWithMintByAddress(e,t){return this.metaplex.operations().execute(Ke(e),t)}findTokenWithMintByMint(e,t){return this.metaplex.operations().execute(ve(e),t)}createMint(e={},t){return this.metaplex.operations().execute(u(e),t)}createToken(e,t){return this.metaplex.operations().execute(f(e),t)}createTokenWithMint(e={},t){return this.metaplex.operations().execute(z(e),t)}mint(e,t){return this.metaplex.operations().execute(B(e),t)}send(e,t){return this.metaplex.operations().execute(W(e),t)}freeze(e,t){return this.metaplex.operations().execute(Y(e),t)}thaw(e,t){return this.metaplex.operations().execute(N(e),t)}approveDelegateAuthority(e,t){return this.metaplex.operations().execute(ne(e),t)}revokeDelegateAuthority(e,t){return this.metaplex.operations().execute(ae(e),t)}}const Ie=()=>({install(e){e.programs().register(r.U),e.programs().getToken=function(e){return this.get(r.U.name,e)},e.programs().register(r.m),e.programs().getAssociatedToken=function(e){return this.get(r.m.name,e)};const t=e.operations();t.register(ne,re),t.register(u,p),t.register(f,T),t.register(z,C),t.register(ke,ge),t.register(fe,Te),t.register(Ke,be),t.register(ve,Pe),t.register(Y,$),t.register(B,R),t.register(ae,ce),t.register(W,J),t.register(N,V),e.tokens=function(){return new Oe(this)}}})},70676:function(e,t,n){n.d(t,{U:function(){return s},m:function(){return i}});var r=n(99350);const s={name:"TokenProgram",address:r.x5},i={name:"AssociatedTokenProgram",address:r.EK}},10974:function(e,t,n){n.d(t,{k:function(){return a}});var r=n(11723),s=n(22123);const i=5e3;class o{constructor(e){(0,r.n8)(this,"cachedRentPerEmptyAccount",null),(0,r.n8)(this,"cachedRentPerByte",null),this.metaplex=e}async estimate(e,t=1,n=1,r=!0){const i=await this.estimateRent(e,t,r),o=this.estimateTransactionFee(n);return(0,s.hY)(i,o)}async estimateRent(e,t=1,n=!0){if(!n||null===this.cachedRentPerEmptyAccount||null===this.cachedRentPerByte){const e=await this.metaplex.rpc().getRent(0),t=await this.metaplex.rpc().getRent(1);this.cachedRentPerEmptyAccount=e,this.cachedRentPerByte=(0,s.IQ)(t,e)}const r=(0,s.zt)(this.cachedRentPerEmptyAccount,t),i=(0,s.zt)(this.cachedRentPerByte,e);return(0,s.hY)(r,i)}estimateTransactionFee(e=1){return(0,s.pR)(e*i)}}const a=()=>({install(e){const t=new o(e);e.utils=()=>t}})},56675:function(e,t,n){n.d(t,{H:function(){return i}});var r=n(54977);class s{constructor(e){this.walletAdapter=e}get publicKey(){if(!this.walletAdapter.publicKey)throw new r.AO;return this.walletAdapter.publicKey}async signMessage(e){if(void 0===this.walletAdapter.signMessage)throw new r.cR("signMessage");return this.walletAdapter.signMessage(e)}async signTransaction(e){if(void 0===this.walletAdapter.signTransaction)throw new r.cR("signTransaction");return this.walletAdapter.signTransaction(e)}async signAllTransactions(e){if(void 0===this.walletAdapter.signAllTransactions)throw new r.cR("signAllTransactions");return this.walletAdapter.signAllTransactions(e)}}const i=e=>({install(t){t.identity().setDriver(new s(e))}})}}]);
//# sourceMappingURL=4891.f09b9a01.js.map