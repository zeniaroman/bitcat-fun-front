"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[1801],{71241:function(a,e){e.A=(a,e)=>{const t=a.__vccOpts||a;for(const[s,o]of e)t[s]=o;return t}},10587:function(a,e,t){t.d(e,{A:function(){return c}});var s=t(56768),o=t(24232);const r={class:"toast-content"};function l(a,e,t,l,n,i){return t.show?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,o.C4)(["toast",`toast-${t.type}`])},[(0,s.Lk)("div",r,(0,o.v_)(t.message),1),(0,s.Lk)("button",{class:"toast-close",onClick:e[0]||(e[0]=(...a)=>i.close&&i.close(...a))},"×")],2)):(0,s.Q3)("",!0)}var n={name:"AppToast",props:{message:{type:String,default:""},type:{type:String,default:"info",validator:a=>["success","error","warning","info"].includes(a)},duration:{type:Number,default:3e3},show:{type:Boolean,default:!1}},emits:["close"],watch:{show(a){a&&this.duration>0&&(this.timer=setTimeout((()=>{this.close()}),this.duration))}},methods:{close(){this.timer&&clearTimeout(this.timer),this.$emit("close")}},beforeUnmount(){this.timer&&clearTimeout(this.timer)},data(){return{timer:null}}},i=t(71241);const u=(0,i.A)(n,[["render",l],["__scopeId","data-v-9f6ec8d0"]]);var c=u},51801:function(a,e,t){t.r(e),t.d(e,{default:function(){return le}});var s=t(56768),o=t(24232);const r={class:"page-user-settings"},l={key:0,class:"auth-message"},n={key:1,class:"settings-container"},i={class:"settings-section"},u={class:"section-content"},c={class:"current-avatar"},d=["src"],v={class:"settings-section"},p={class:"section-content"},f={class:"info-item"},g={class:"info-value"},m={class:"info-item"},k={class:"info-value"},w={class:"info-item"},b={class:"info-value"},h={class:"settings-section"},L={class:"section-content"},y={class:"info-item"},C={class:"referral-link-container"},P=["value"],T={key:0},A={key:1},E={class:"referral-actions"},S={class:"settings-section"},_={class:"section-content"},I={class:"info-item"},R={class:"info-value"};function F(a,e,t,F,N,X){const K=(0,s.g2)("router-link"),U=(0,s.g2)("modal-popup"),V=(0,s.g2)("AppToast");return(0,s.uX)(),(0,s.CE)("div",r,[e[23]||(e[23]=(0,s.Lk)("h2",{class:"page-title"},"User Settings",-1)),F.isAuthenticated?((0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("div",i,[e[7]||(e[7]=(0,s.Lk)("h3",{class:"section-title"},"Profile Avatar",-1)),(0,s.Lk)("div",u,[(0,s.Lk)("div",c,[(0,s.Lk)("img",{src:F.userSettings.avatar||F.bitcatImage,alt:"User Avatar",class:"avatar-image"},null,8,d)]),(0,s.Lk)("button",{class:"action-button",onClick:e[0]||(e[0]=(...a)=>F.openAvatarModal&&F.openAvatarModal(...a))},"Change Avatar")])]),(0,s.Lk)("div",v,[e[11]||(e[11]=(0,s.Lk)("h3",{class:"section-title"},"Profile Information",-1)),(0,s.Lk)("div",p,[(0,s.Lk)("div",f,[e[8]||(e[8]=(0,s.Lk)("span",{class:"info-label"},"Bio:",-1)),(0,s.Lk)("span",g,(0,o.v_)(F.userSettings.bio||"Not set"),1)]),(0,s.Lk)("div",m,[e[9]||(e[9]=(0,s.Lk)("span",{class:"info-label"},"Telegram:",-1)),(0,s.Lk)("span",k,(0,o.v_)(F.userSettings.telegram||"Not set"),1)]),(0,s.Lk)("div",w,[e[10]||(e[10]=(0,s.Lk)("span",{class:"info-label"},"Twitter:",-1)),(0,s.Lk)("span",b,(0,o.v_)(F.userSettings.twitter||"Not set"),1)]),(0,s.Lk)("button",{class:"action-button",onClick:e[1]||(e[1]=(...a)=>F.openProfileInfoModal&&F.openProfileInfoModal(...a))},"Edit Profile Info")])]),(0,s.Q3)("",!0),(0,s.Lk)("div",h,[e[17]||(e[17]=(0,s.Lk)("h3",{class:"section-title"},"Referral Program",-1)),(0,s.Lk)("div",L,[(0,s.Lk)("div",y,[e[16]||(e[16]=(0,s.Lk)("p",null,"Share your referral link with friends and earn up to 5% rewards from their paid actions.",-1)),(0,s.Lk)("div",C,[(0,s.Lk)("input",{type:"text",class:"referral-link",readonly:"",value:`https://solanabitcat.com/?r=${F.userTag}`,ref:"referralLinkInput"},null,8,P),(0,s.Lk)("button",{class:"copy-button",onClick:e[3]||(e[3]=(...a)=>F.copyReferralLink&&F.copyReferralLink(...a))},[e[14]||(e[14]=(0,s.Lk)("i",{class:"fas fa-copy"},null,-1)),F.referralLinkCopied?((0,s.uX)(),(0,s.CE)("span",T,"Copied!")):((0,s.uX)(),(0,s.CE)("span",A,"Copy"))])]),(0,s.Lk)("div",E,[(0,s.bF)(K,{to:"/my/referrals",class:"referral-button"},{default:(0,s.k6)((()=>e[15]||(e[15]=[(0,s.eW)(" View Referrals ")]))),_:1})])])])]),(0,s.Lk)("div",S,[e[22]||(e[22]=(0,s.Lk)("h3",{class:"section-title"},[(0,s.eW)("VIP Status"),(0,s.Lk)("small",null,"(Coming Soon)")],-1)),(0,s.Lk)("div",_,[(0,s.Lk)("div",I,[e[18]||(e[18]=(0,s.Lk)("span",{class:"info-label"},"VIP Status:",-1)),(0,s.Lk)("span",R,(0,o.v_)(F.userSettings.isVip?"Yes":"No"),1),e[19]||(e[19]=(0,s.Lk)("button",{class:"action-button",disabled:""}," Get VIP (for BITCAT) ",-1)),e[20]||(e[20]=(0,s.Lk)("br",null,null,-1)),e[21]||(e[21]=(0,s.Lk)("small",null,"VIP status can be purchased once. It will distinguish you from other users and give certain advantages. In development, stay tuned for updates",-1))])])])])):((0,s.uX)(),(0,s.CE)("div",l,[e[6]||(e[6]=(0,s.Lk)("p",null,"Please login to access your settings.",-1)),(0,s.bF)(K,{to:"/my",class:"login-link"},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.eW)("Go to Login Page")]))),_:1})])),(0,s.bF)(U,{show:F.showModal,title:F.modalTitle,onClose:F.closeModal},{default:(0,s.k6)((()=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)(F.currentModalComponent),{userTag:F.userTag,userSettings:F.userSettings,hasPassword:F.hasPassword,onUpdated:F.handleSettingsUpdated,onClose:F.closeModal},null,40,["userTag","userSettings","hasPassword","onUpdated","onClose"]))])),_:1},8,["show","title","onClose"]),(0,s.bF)(V,{show:F.toast.show,message:F.toast.message,type:F.toast.type,onClose:e[4]||(e[4]=a=>F.toast.show=!1),duration:F.toast.duration},null,8,["show","message","type","duration"])])}var N=t(90144),X=t(68881),K=t(94373),U=t(45130);const V={class:"modal-container"},M={class:"modal-header"},$={class:"modal-title"},B={class:"modal-content"};function W(a,e,t,r,l,n){return t.show?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:e[1]||(e[1]=(0,U.D$)(((...a)=>r.close&&r.close(...a)),["self"]))},[(0,s.Lk)("div",V,[(0,s.Lk)("div",M,[(0,s.Lk)("h3",$,(0,o.v_)(t.title),1),(0,s.Lk)("button",{class:"close-button",onClick:e[0]||(e[0]=(...a)=>r.close&&r.close(...a))},"×")]),(0,s.Lk)("div",B,[(0,s.RG)(a.$slots,"default",{},void 0,!0)])])])):(0,s.Q3)("",!0)}var x={name:"ModalPopup",props:{show:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["close"],setup(a,{emit:e}){const t=()=>{e("close")};return{close:t}}},Q=t(71241);const D=(0,Q.A)(x,[["render",W],["__scopeId","data-v-2d6c97dd"]]);var J=D;const q={class:"avatar-form"},z={class:"avatar-preview"},O=["src"],Y={class:"form-tabs"},G={key:0,class:"nft-selection"},j={key:0,class:"loading-container"},H={key:1,class:"no-nfts-message"},Z={key:2},aa={class:"nft-tabs"},ea={class:"nft-grid"},ta=["onClick"],sa={class:"nft-image-container"},oa=["src","alt"],ra={class:"nft-name"},la={key:0,class:"no-nfts-message"},na={key:1,class:"pagination"},ia=["disabled"],ua={class:"pagination-info"},ca=["disabled"],da={class:"form-actions"},va=["disabled"],pa=["disabled"],fa=["disabled"],ga={key:0,class:"loading-spinner"},ma={key:1},ka={key:2,class:"error-message"};function wa(a,e,t,r,l,n){return(0,s.uX)(),(0,s.CE)("div",q,[(0,s.Lk)("div",z,[(0,s.Lk)("img",{src:r.previewUrl||t.userSettings.avatar||r.bitcatImage,alt:"Avatar Preview",class:"avatar-image"},null,8,O)]),(0,s.Lk)("div",Y,[(0,s.Lk)("button",{class:(0,o.C4)(["tab-button",{active:"nft"===r.activeTab}]),onClick:e[0]||(e[0]=a=>r.activeTab="nft")}," My NFTs ",2)]),"nft"===r.activeTab?((0,s.uX)(),(0,s.CE)("div",G,[r.loading?((0,s.uX)(),(0,s.CE)("div",j,e[10]||(e[10]=[(0,s.Lk)("div",{class:"loading-spinner large"},null,-1),(0,s.Lk)("p",null,"Loading your NFTs...",-1)]))):r.hasNfts?((0,s.uX)(),(0,s.CE)("div",Z,[(0,s.Lk)("div",aa,[(0,s.Lk)("button",{class:(0,o.C4)(["nft-tab-button",{active:"owned"===r.activeNftTab}]),onClick:e[1]||(e[1]=a=>r.activeNftTab="owned")}," Owned ("+(0,o.v_)(r.nftsData.owned.pagination.total)+") ",3),(0,s.Lk)("button",{class:(0,o.C4)(["nft-tab-button",{active:"rented"===r.activeNftTab}]),onClick:e[2]||(e[2]=a=>r.activeNftTab="rented")}," Rented ("+(0,o.v_)(r.nftsData.rented.pagination.total)+") ",3),(0,s.Lk)("button",{class:(0,o.C4)(["nft-tab-button",{active:"created"===r.activeNftTab}]),onClick:e[3]||(e[3]=a=>r.activeNftTab="created")}," Created ("+(0,o.v_)(r.nftsData.created.pagination.total)+") ",3)]),(0,s.Lk)("div",ea,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.currentNfts,((a,e)=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:(0,o.C4)(["nft-item",{selected:r.selectedNft&&r.selectedNft.createdAt===a.createdAt}]),onClick:e=>r.selectNft(a)},[(0,s.Lk)("div",sa,[(0,s.Lk)("img",{src:a.imageUri,alt:a.name,class:"nft-image"},null,8,oa)]),(0,s.Lk)("div",ra,(0,o.v_)(a.name),1)],10,ta)))),128))]),0===r.currentNfts.length?((0,s.uX)(),(0,s.CE)("div",la,e[12]||(e[12]=[(0,s.Lk)("p",null,"No NFTs found in this category.",-1)]))):(0,s.Q3)("",!0),r.showPagination?((0,s.uX)(),(0,s.CE)("div",na,[(0,s.Lk)("button",{class:"pagination-button",disabled:1===r.currentPage,onClick:e[4]||(e[4]=a=>r.changePage(r.currentPage-1))}," Previous ",8,ia),(0,s.Lk)("span",ua,"Page "+(0,o.v_)(r.currentPage)+" of "+(0,o.v_)(r.totalPages),1),(0,s.Lk)("button",{class:"pagination-button",disabled:r.currentPage===r.totalPages,onClick:e[5]||(e[5]=a=>r.changePage(r.currentPage+1))}," Next ",8,ca)])):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("div",H,e[11]||(e[11]=[(0,s.Lk)("p",null,"You don't have any NFTs to use as avatar.",-1)])))])):(r.activeTab,(0,s.Q3)("",!0)),(0,s.Lk)("div",da,[(0,s.Lk)("button",{class:"btn-cancel",onClick:e[7]||(e[7]=e=>a.$emit("close")),disabled:r.loading}," Cancel ",8,va),(0,s.Lk)("button",{class:"btn-default",onClick:e[8]||(e[8]=(...a)=>r.setDefaultAvatar&&r.setDefaultAvatar(...a)),disabled:r.loading}," Set Default ",8,pa),(0,s.Lk)("button",{class:"btn-save",onClick:e[9]||(e[9]=(...a)=>r.saveAvatar&&r.saveAvatar(...a)),disabled:r.loading||!r.isValid},[r.loading?((0,s.uX)(),(0,s.CE)("span",ga)):((0,s.uX)(),(0,s.CE)("span",ma,"Save Avatar"))],8,fa)]),r.error?((0,s.uX)(),(0,s.CE)("div",ka,(0,o.v_)(r.error),1)):(0,s.Q3)("",!0)])}t(14603),t(47566),t(98721);var ba=t(29096),ha=t(94348),La={name:"AvatarForm",props:{userTag:{type:String,required:!0},userSettings:{type:Object,required:!0}},emits:["updated","close"],setup(a,{emit:e}){const t=(0,N.KR)(a.userSettings.avatar||""),o=(0,N.KR)(""),r=(0,N.KR)(!1),l=(0,N.KR)(""),n=(0,N.KR)("nft"),i=(0,N.KR)("owned"),u=(0,N.KR)({owned:{nfts:[],pagination:{total:0,totalPages:0}},rented:{nfts:[],pagination:{total:0,totalPages:0}},created:{nfts:[],pagination:{total:0,totalPages:0}}}),c=(0,N.KR)(1),d=(0,N.KR)(null),v=(0,s.EW)((()=>{if(!t.value)return!0;try{return new URL(t.value),!0}catch(a){return!1}}));(0,s.wB)(t,(a=>{a&&v.value?o.value=a:o.value="",l.value=""}));const p=async()=>{r.value=!0,l.value="";try{const t=await K.A.put(`/user-settings/${a.userTag}/avatar`,{avatar:null},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});t.data&&t.data.success?(e("updated",{avatar:null}),X.A.commit("setDefaultAvatar")):l.value="Failed to reset avatar"}catch(t){ha.error("Error resetting avatar:",t),l.value=t.response?.data?.message||"Failed to reset avatar"}finally{r.value=!1}},f=async()=>{if("url"!==n.value||v.value){r.value=!0,l.value="";try{let s={};if("url"===n.value)s={avatar:t.value};else{if("nft"!==n.value||!d.value)return l.value="Please select an NFT or enter a valid URL",void(r.value=!1);s={nftMint:d.value.assetPublicKey}}const o=await K.A.put(`/user-settings/${a.userTag}/avatar`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});o.data&&o.data.success?"url"===n.value?e("updated",{avatar:t.value}):(X.A.commit("setAvatar",d.value.imageUri),e("updated",{avatar:d.value.imageUri})):l.value="Failed to update avatar"}catch(s){ha.error("Error updating avatar:",s),l.value=s.response?.data?.message||"Failed to update avatar"}finally{r.value=!1}}else l.value="Please enter a valid URL"},g=async(e="owned",t=1)=>{r.value=!0,l.value="";try{const s=await K.A.get(`/nft-bitcat/user/${a.userTag}/nfts`,{params:{tab:e,page:t,limit:9}});s.data&&s.data.success?u.value=s.data:l.value="Failed to load NFTs"}catch(s){ha.error("Error fetching user NFTs:",s),l.value=s.response?.data?.message||"Failed to load NFTs"}finally{r.value=!1}},m=a=>{d.value=a,o.value=a.imageUri},k=a=>{c.value=a,g(i.value,a)};(0,s.wB)(i,(a=>{c.value=1})),(0,s.wB)(n,(a=>{"nft"===a&&g(i.value,c.value)}));const w=(0,s.EW)((()=>u.value&&u.value[i.value]?.nfts||[])),b=(0,s.EW)((()=>u.value&&u.value[i.value]?.pagination?.totalPages||1)),h=(0,s.EW)((()=>b.value>1)),L=(0,s.EW)((()=>u.value.owned.pagination.total>0||u.value.rented.pagination.total>0||u.value.created.pagination.total>0));return(0,s.sV)((()=>{g(i.value,c.value)})),{avatarUrl:t,previewUrl:o,loading:r,error:l,isValid:v,activeTab:n,activeNftTab:i,nftsData:u,currentPage:c,totalPages:b,selectedNft:d,currentNfts:w,showPagination:h,hasNfts:L,saveAvatar:f,fetchUserNfts:g,selectNft:m,changePage:k,setDefaultAvatar:p,bitcatImage:ba}}};const ya=(0,Q.A)(La,[["render",wa],["__scopeId","data-v-f0b09ee2"]]);var Ca=ya;const Pa={class:"profile-info-form"},Ta={class:"form-group"},Aa={class:"form-group"},Ea={class:"form-group"},Sa={class:"form-actions"},_a=["disabled"],Ia=["disabled"],Ra={key:0,class:"loading-spinner"},Fa={key:1},Na={key:0,class:"error-message"};function Xa(a,e,t,r,l,n){return(0,s.uX)(),(0,s.CE)("div",Pa,[(0,s.Lk)("div",Ta,[e[5]||(e[5]=(0,s.Lk)("label",{for:"bio",class:"form-label"},"Bio",-1)),(0,s.bo)((0,s.Lk)("textarea",{id:"bio","onUpdate:modelValue":e[0]||(e[0]=a=>r.bio=a),class:"form-textarea",placeholder:"Tell us about yourself (max 500 characters)",rows:"4",maxlength:"500",autocomplete:"off"},null,512),[[U.Jo,r.bio]])]),(0,s.Lk)("div",Aa,[e[6]||(e[6]=(0,s.Lk)("label",{for:"telegram",class:"form-label"},"Telegram",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"telegram","onUpdate:modelValue":e[1]||(e[1]=a=>r.telegram=a),class:"form-input",placeholder:"Your Telegram username (without @)",autocomplete:"off"},null,512),[[U.Jo,r.telegram]])]),(0,s.Lk)("div",Ea,[e[7]||(e[7]=(0,s.Lk)("label",{for:"twitter",class:"form-label"},"Twitter",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"twitter","onUpdate:modelValue":e[2]||(e[2]=a=>r.twitter=a),class:"form-input",placeholder:"Your Twitter username (without @)",autocomplete:"off"},null,512),[[U.Jo,r.twitter]])]),(0,s.Lk)("div",Sa,[(0,s.Lk)("button",{class:"btn-cancel",onClick:e[3]||(e[3]=e=>a.$emit("close")),disabled:r.loading}," Cancel ",8,_a),(0,s.Lk)("button",{class:"btn-save",onClick:e[4]||(e[4]=(...a)=>r.saveProfileInfo&&r.saveProfileInfo(...a)),disabled:r.loading},[r.loading?((0,s.uX)(),(0,s.CE)("span",Ra)):((0,s.uX)(),(0,s.CE)("span",Fa,"Save Information"))],8,Ia)]),r.error?((0,s.uX)(),(0,s.CE)("div",Na,(0,o.v_)(r.error),1)):(0,s.Q3)("",!0)])}var Ka=t(94348),Ua={name:"ProfileInfoForm",props:{userTag:{type:String,required:!0},userSettings:{type:Object,required:!0}},emits:["updated","close"],setup(a,{emit:e}){const t=(0,N.KR)(a.userSettings.bio||""),s=(0,N.KR)(a.userSettings.telegram||""),o=(0,N.KR)(a.userSettings.twitter||""),r=(0,N.KR)(!1),l=(0,N.KR)(""),n=async()=>{r.value=!0,l.value="";try{const r=await K.A.put(`/user-settings/${a.userTag}/bio`,{bio:t.value,telegram:s.value,twitter:o.value},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});r.data&&r.data.success?e("updated",{bio:t.value,telegram:s.value,twitter:o.value}):l.value="Failed to update profile information"}catch(n){Ka.error("Error updating profile info:",n),l.value=n.response?.data?.message||"Failed to update profile information"}finally{r.value=!1}};return{bio:t,telegram:s,twitter:o,loading:r,error:l,saveProfileInfo:n}}};const Va=(0,Q.A)(Ua,[["render",Xa],["__scopeId","data-v-19baa746"]]);var Ma=Va;const $a={class:"password-form"},Ba={key:0,class:"form-group"},Wa={class:"form-group"},xa={for:"new-password",class:"form-label"},Qa={class:"form-group"},Da={key:0,class:"validation-error"},Ja={class:"form-actions"},qa=["disabled"],za=["disabled"],Oa={key:0,class:"loading-spinner"},Ya={key:1},Ga={key:1,class:"error-message"};function ja(a,e,t,r,l,n){return(0,s.uX)(),(0,s.CE)("div",$a,[t.hasPassword?((0,s.uX)(),(0,s.CE)("div",Ba,[e[5]||(e[5]=(0,s.Lk)("label",{for:"current-password",class:"form-label"},"Current Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"current-password","onUpdate:modelValue":e[0]||(e[0]=a=>r.currentPassword=a),class:"form-input",placeholder:"Enter your current password"},null,512),[[U.Jo,r.currentPassword]])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Wa,[(0,s.Lk)("label",xa,(0,o.v_)(t.hasPassword?"New Password":"Password"),1),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"new-password","onUpdate:modelValue":e[1]||(e[1]=a=>r.newPassword=a),class:"form-input",placeholder:"Enter new password"},null,512),[[U.Jo,r.newPassword]])]),(0,s.Lk)("div",Qa,[e[6]||(e[6]=(0,s.Lk)("label",{for:"confirm-password",class:"form-label"},"Confirm Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"confirm-password","onUpdate:modelValue":e[2]||(e[2]=a=>r.confirmPassword=a),class:"form-input",placeholder:"Confirm new password"},null,512),[[U.Jo,r.confirmPassword]]),r.passwordMismatch?((0,s.uX)(),(0,s.CE)("div",Da," Passwords do not match ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ja,[(0,s.Lk)("button",{class:"btn-cancel",onClick:e[3]||(e[3]=e=>a.$emit("close")),disabled:r.loading}," Cancel ",8,qa),(0,s.Lk)("button",{class:"btn-save",onClick:e[4]||(e[4]=(...a)=>r.savePassword&&r.savePassword(...a)),disabled:r.loading||!r.isValid},[r.loading?((0,s.uX)(),(0,s.CE)("span",Oa)):((0,s.uX)(),(0,s.CE)("span",Ya,(0,o.v_)(t.hasPassword?"Change Password":"Set Password"),1))],8,za)]),r.error?((0,s.uX)(),(0,s.CE)("div",Ga,(0,o.v_)(r.error),1)):(0,s.Q3)("",!0)])}var Ha=t(94348),Za={name:"PasswordForm",props:{userTag:{type:String,required:!0},hasPassword:{type:Boolean,default:!1}},emits:["updated","close"],setup(a,{emit:e}){const t=(0,N.KR)(""),o=(0,N.KR)(""),r=(0,N.KR)(""),l=(0,N.KR)(!1),n=(0,N.KR)(""),i=(0,s.EW)((()=>o.value&&r.value&&o.value!==r.value)),u=(0,s.EW)((()=>!(a.hasPassword&&!t.value)&&(!(!o.value||!r.value)&&!i.value))),c=async()=>{if(u.value){l.value=!0,n.value="";try{let s="/auth/set-password",r={userTag:a.userTag,password:o.value};a.hasPassword&&(s="/auth/change-password",r={userTag:a.userTag,currentPassword:t.value,newPassword:o.value});const l=await K.A.post(s,r,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});l.data&&l.data.success?e("updated",{passwordChanged:!0}):n.value="Failed to update password"}catch(s){Ha.error("Error updating password:",s),n.value=s.response?.data?.message||"Failed to update password",403===s.response?.status&&(n.value="Current password is incorrect")}finally{l.value=!1}}};return{currentPassword:t,newPassword:o,confirmPassword:r,loading:l,error:n,passwordMismatch:i,isValid:u,savePassword:c}}};const ae=(0,Q.A)(Za,[["render",ja],["__scopeId","data-v-37c147c7"]]);var ee=ae,te=t(10587),se=t(94348),oe={name:"UserSettingsPage",components:{ModalPopup:J,AvatarForm:Ca,ProfileInfoForm:Ma,PasswordForm:ee,AppToast:te.A},setup(){const a=(0,s.EW)((()=>X.A.getters.userTag)),e=(0,s.EW)((()=>X.A.getters.isAuthenticated)),t=(0,N.KR)(!1),o=(0,N.KR)(null),r=(0,N.KR)(!1),l=(0,N.Kh)({avatar:null,bio:null,telegram:null,twitter:null,isVip:!1}),n=(0,N.Kh)({show:!1,message:"",type:"info",duration:5e3}),i=(0,N.KR)(!1),u=(0,N.KR)(""),c=(0,N.KR)(null),d=async()=>{if(e.value)try{const e=await K.A.get(`/user-settings/${a.value}`);if(e.data&&e.data.success){const a=e.data.settings;l.avatar=a.avatar,l.bio=a.bio,l.telegram=a.telegram,l.twitter=a.twitter,l.isVip=a.isVip}const s=await K.A.get("/auth/me");s.data&&s.data.exists&&(t.value=s.data.hasPassword)}catch(s){se.error("Error fetching user settings:",s),n.type="error",n.message="Failed to load user settings",n.show=!0}},v=()=>{u.value="Change Avatar",c.value="AvatarForm",i.value=!0},p=()=>{u.value="Edit Profile Information",c.value="ProfileInfoForm",i.value=!0},f=()=>{u.value=t.value?"Change Password":"Set Password",c.value="PasswordForm",i.value=!0},g=()=>{i.value=!1},m=async()=>{try{const e=`https://solanabitcat.com/?r=${a.value}`;await navigator.clipboard.writeText(e),r.value=!0,setTimeout((()=>{r.value=!1}),2e3),n.type="success",n.message="Referral link copied to clipboard",n.show=!0}catch(e){se.error("Failed to copy text: ",e),n.type="error",n.message="Failed to copy referral link",n.show=!0}},k=a=>{void 0!==a.avatar&&(l.avatar=a.avatar),void 0!==a.bio&&(l.bio=a.bio),void 0!==a.telegram&&(l.telegram=a.telegram),void 0!==a.twitter&&(l.twitter=a.twitter),a.passwordChanged&&(t.value=!0),n.type="success",n.message="Settings updated successfully",n.show=!0,g()};return(0,s.sV)((()=>{d()})),{userTag:a,isAuthenticated:e,userSettings:l,hasPassword:t,showModal:i,modalTitle:u,currentModalComponent:c,toast:n,openAvatarModal:v,openProfileInfoModal:p,openPasswordModal:f,closeModal:g,handleSettingsUpdated:k,bitcatImage:ba,referralLinkInput:o,referralLinkCopied:r,copyReferralLink:m}}};const re=(0,Q.A)(oe,[["render",F],["__scopeId","data-v-c4344d36"]]);var le=re},29096:function(a,e,t){a.exports=t.p+"img/bitcat.cd4ff007.webp"}}]);
//# sourceMappingURL=1801.c3038a00.js.map