"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[6852],{56852:function(e,t,n){n.d(t,{q:function(){return Ja}});var a=n(50153),r=n(75538),i=n(20483),s=n(66652),o=n(93084),d=n(10974),c=n(48354),u=n(63896),l=n(55968),y=n(65913),m=n(64216),g=(n(44114),n(97767)),p=n(75290);const h=32,f=10,M=200,b=5,A=34,w=4+h+4+M,S=154+f+2+4+b*A+8+1+1+1+4+h+4+M+32+4+8+1+1+1+9+32+1+32+1;var k=n(70288),C=n(5348);function G(e){const t=e.slice(S,S+4);return(0,k.ni)(t,"le")}function x(e){const t=S+4,n=[],a=G(e).toNumber();for(let r=0;r<a;r++){const[a]=g.configLineBeet.deserialize(e,t+r*w);n.push({name:(0,C.NN)(a.name),uri:(0,C.NN)(a.uri)})}return n}function P(e){if(null!=e.hiddenSettings)return S;const t=(0,k.ni)(e.itemsAvailable).toNumber();return Math.ceil(S+4+t*w+8+2*(t/8+1))}const K=e=>e.toBase58().slice(0,6);n(98992),n(72577);var B=n(90712),I=n(42336),T=n(90712)["Buffer"];const v=[51,173,177,113,25,241,109,189],E=v.length,W=E+p.PublicKey.default.toBytes().byteLength;class F extends I.I{whereDiscriminator(e){return this.where(0,T.from(e))}candyMachineAccounts(){return this.whereDiscriminator(v)}candyMachineAccountsForWallet(e){return this.candyMachineAccounts().where(W,e.toBase58())}candyMachineAccountsForAuthority(e){return this.candyMachineAccounts().where(E,e.toBase58())}}const R={publicKey:g.PROGRAM_ID,accounts(e){return new F(e,this.publicKey)}};var z=n(76792);const O=(e,t=R.publicKey)=>z.G.find(t,[B.Buffer.from("candy_machine","utf8"),e.toBuffer()]),L=(e,t=R.publicKey)=>z.G.find(t,[B.Buffer.from("collection","utf8"),e.toBuffer()]);var D=n(24925),N=n(22123),$=n(13588);const U=(e,t,n,a)=>{(0,D.Ay)(null===a||null!==e.data.tokenMint&&a.address.equals(e.data.tokenMint));const r=(0,k.ni)(e.data.data.itemsAvailable),i=(0,k.ni)(e.data.itemsRedeemed),{endSettings:s}=e.data.data,{hiddenSettings:o}=e.data.data,{whitelistMintSettings:d}=e.data.data,{gatekeeper:c}=e.data.data,u=t.data,l=o?(0,k.ni)(0):G(u),y=o?[]:x(u);return{model:"candyMachineV2",address:e.publicKey,programAddress:e.owner,version:e.owner.equals(R.publicKey)?2:1,authorityAddress:e.data.authority,walletAddress:e.data.wallet,tokenMintAddress:e.data.tokenMint,collectionMintAddress:n&&n.exists?n.data.mint:null,uuid:e.data.data.uuid,price:(0,N.vj)(e.data.data.price,a?a.currency:N.VU),symbol:(0,C.NN)(e.data.data.symbol),sellerFeeBasisPoints:e.data.data.sellerFeeBasisPoints,isMutable:e.data.data.isMutable,retainAuthority:e.data.data.retainAuthority,goLiveDate:(0,$.kf)(e.data.data.goLiveDate),maxEditionSupply:(0,k.ni)(e.data.data.maxSupply),items:y,itemsAvailable:r,itemsMinted:i,itemsRemaining:(0,k.ni)(r.sub(i)),itemsLoaded:l,isFullyLoaded:r.lte(l),endSettings:s?s.endSettingType===g.EndSettingType.Date?{endSettingType:g.EndSettingType.Date,date:(0,$.$r)(s.number)}:{endSettingType:g.EndSettingType.Amount,number:(0,k.ni)(s.number)}:null,hiddenSettings:o,whitelistMintSettings:d?{...d,discountPrice:d.discountPrice?(0,N.pR)(d.discountPrice):null}:null,gatekeeper:c?{...c,network:c.gatekeeperNetwork}:null,creators:e.data.data.creators}},V=e=>({wallet:e.walletAddress,tokenMint:e.tokenMintAddress,...e}),j=(e,t)=>{const{endSettings:n}=t,{whitelistMintSettings:a}=t,{gatekeeper:r}=t;return{wallet:t.wallet,tokenMint:t.tokenMint,data:{...t,uuid:K(e),price:t.price.basisPoints,maxSupply:t.maxEditionSupply,endSettings:n?{...n,number:n.endSettingType===g.EndSettingType.Date?n.date:n.number}:null,whitelistMintSettings:a?{...a,discountPrice:a.discountPrice?.basisPoints??null}:null,gatekeeper:r?{...r,gatekeeperNetwork:r.network}:null}}};var Y=n(28694),Q=n(9209),_=n(56402),q=n(3397),J=n(54977);const H="CreateCandyMachineV2Operation",X=(0,Y.j)(H),Z={async handle(e,t,n){const a=await ee(t,e.input,n);n.throwIfCanceled();const r=(0,Y.Y)(t,n.confirmOptions),i=await a.sendAndConfirm(t,r);n.throwIfCanceled();const s=await t.candyMachinesV2().findByAddress({address:i.candyMachineSigner.publicKey},n);return{...i,candyMachine:s}}},ee=async(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,i=t.candyMachine??p.Keypair.generate(),s=t.authority??e.identity(),o=t.collection??null,{data:d,wallet:c,tokenMint:u}=j(i.publicKey,{...t,wallet:t.wallet??e.identity().publicKey,tokenMint:t.tokenMint??null,symbol:t.symbol??"",maxEditionSupply:t.maxEditionSupply??(0,k.ni)(0),isMutable:t.isMutable??!0,retainAuthority:t.retainAuthority??!0,goLiveDate:t.goLiveDate??null,endSettings:t.endSettings??null,creators:t.creators??[{address:e.identity().publicKey,share:100,verified:!1}],hiddenSettings:t.hiddenSettings??null,whitelistMintSettings:t.whitelistMintSettings??null,gatekeeper:t.gatekeeper??null}),l=(0,g.createInitializeCandyMachineInstruction)({candyMachine:i.publicKey,wallet:c,authority:(0,Q.G)(s),payer:r.publicKey},{data:d});return u?l.keys.push({pubkey:u,isWritable:!1,isSigner:!1}):(0,N.EY)(t.price,N.VU),_.Q.make().setFeePayer(r).setContext({candyMachineSigner:i,wallet:c,authority:(0,Q.G)(s),creators:d.creators}).add(await e.system().builders().createAccount({newAccount:i,space:P(d),program:R.publicKey,instructionKey:t.createAccountInstructionKey??"createAccount"},{payer:r,programs:a})).add({instruction:l,signers:[i,r],key:t.initializeCandyMachineInstructionKey??"initializeCandyMachine"}).when(!!o,(n=>{if(!(0,q.Jz)(s))throw new J.fC("authority","PublicKey",'You are trying to create a Candy Machine with a Collection NFT. In order for the Collection NFT to be set successfully, you must provide the authority as a Signer. Please provide the "authority" parameter as a Signer if you want to set the Collection NFT upon creation. Alternatively, you may remove the "collection" parameter to create a Candy Machine without an associated Collection NFT.');const d=o,c=e.nfts().pdas().metadata({mint:d,programs:a}),u=e.nfts().pdas().masterEdition({mint:d,programs:a}),l=L(i.publicKey),y=e.nfts().pdas().collectionAuthorityRecord({mint:d,collectionAuthority:l,programs:a});return n.add({instruction:(0,g.createSetCollectionInstruction)({candyMachine:i.publicKey,authority:(0,Q.G)(s),collectionPda:l,payer:r.publicKey,metadata:c,mint:d,edition:u,collectionAuthorityRecord:y,tokenMetadataProgram:e.programs().getTokenMetadata().address}),signers:[s],key:t.setCollectionInstructionKey??"setCollection"})}))},te="DeleteCandyMachineV2Operation",ne=(0,Y.j)(te),ae={async handle(e,t,n){return re(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},re=(e,t,n={})=>{const{payer:a=e.rpc().getDefaultFeePayer()}=n,r=t.authority??e.identity(),{candyMachine:i}=t,s=(0,g.createWithdrawFundsInstruction)({candyMachine:i.address,authority:r.publicKey});if(i.collectionMintAddress){const e=L(i.address);s.keys.push({pubkey:e,isWritable:!0,isSigner:!1})}return _.Q.make().setFeePayer(a).add({instruction:s,signers:[r],key:t.instructionKey??"withdrawFunds"})};var ie=n(11723),se=n(70519);class oe extends se.j{constructor(e,t){super(e,"plugin","Candy Machine V2",t),(0,ie.n8)(this,"name","CandyMachineV2Error")}}class de extends oe{constructor(e,t){const n=`Trying to add asset number ${e.addn(1)}, but candy machine only can hold ${t} assets. Limit number of assets you are adding or create a new Candy Machine that can hold more.`;super(n),(0,ie.n8)(this,"name","CandyMachineV2IsFullError")}}class ce extends oe{constructor(e){const t=`You're trying to mint from an empty candy machine. All ${e} items have been minted. You can no longer mint from this Candy Machine.`;super(t),(0,ie.n8)(this,"name","CandyMachineV2IsEmptyError")}}class ue extends oe{constructor(e,t,n){const a=`Trying to add ${t} assets to candy machine that already has ${e} assets and can only hold ${n} assets.Limit number of assets you are adding or create a new Candy Machine that can hold more.`;super(a),(0,ie.n8)(this,"name","CandyMachineV2CannotAddAmountError")}}class le extends oe{constructor(e,t,n){const a=`Trying to add an asset with name "${t.name}" and uri: "${t.uri}" to candy machine at index ${e} that violates constraints. Fix the name or URI of this asset and try again.`;super(a,n),(0,ie.n8)(this,"name","CandyMachineV2AddItemConstraintsViolatedError")}}class ye extends oe{constructor(e){const t="You're trying to mint from a Candy Machine which is not live yet. "+(e?`It will go live on ${(0,$.r6)(e)}.`:"Its live date has not been set yet.")+'You need to wait until the Candy Machine is live to mint from it. If this is your Candy Machine, use "metaplex.candyMachinesV2().update(...)" to set the live date. Note that the authority of the Candy Machine can mint regardless of the live date.';super(t),(0,ie.n8)(this,"name","CandyMachineV2NotLiveError")}}class me extends oe{constructor(e){const t=e.endSettingType===g.EndSettingType.Amount?"Amount":"Date",n=e.endSettingType===g.EndSettingType.Amount?`All ${e.number} items have been minted.`:`It ended on ${(0,$.r6)(e.date)}.`,a=`The end condition [${t}] of this Candy Machine has been reached. `+n;super(a),(0,ie.n8)(this,"name","CandyMachineV2EndedError")}}class ge extends oe{constructor(e,t){const n=`The NFT couldn't be fetched after being minted. This is most likely due to a bot tax that occured during minting. When someone tries to mint an NFT from a Candy Machine which cannot be minted from, the program will succeed and charge a small tax to fight against bots. Ensure you can mint from the Candy Machine. You may want to check the transaction logs for more details: [${e}].`;super(n,t),(0,ie.n8)(this,"name","CandyMachineV2BotTaxError")}}const pe=e=>{(0,D.Ay)(e.length<=h,`Candy Machine name too long: ${e} (max ${h})`)},he=e=>{(0,D.Ay)(e.length<=M,`Candy Machine URI too long: ${e} (max ${M})`)},fe=(e,t)=>{if(e.itemsAvailable.lte(e.itemsLoaded))throw new de(t,e.itemsAvailable)},Me=e=>{if(e.itemsRemaining.isZero())throw new ce(e.itemsAvailable)},be=(e,t,n)=>{if(t.addn(n).gt(e.itemsAvailable))throw new ue(t,n,e.itemsAvailable)},Ae=e=>{for(let n=0;n<e.length;n++)try{pe(e[n].name),he(e[n].uri)}catch(t){throw new le((0,k.ni)(n),e[n],t)}},we=e=>{const t=e.whitelistMintSettings?.presale??!1;if(t)return;const n=e.goLiveDate;if(!n||n.gte((0,$.tB)()))throw new ye(n)},Se=e=>{const{endSettings:t}=e;if(!t)return;const n=t.endSettingType===g.EndSettingType.Amount&&e.itemsMinted.gte(t.number),a=t.endSettingType===g.EndSettingType.Date&&t.date.lt((0,$.tB)());if(n||a)throw new me(t)},ke=(e,t)=>{Me(e),e.authorityAddress.equals(t.publicKey)||(we(e),Se(e))},Ce="InsertItemsToCandyMachineV2Operation",Ge=(0,Y.j)(Ce),xe={async handle(e,t,n){return Pe(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},Pe=(e,t,n={})=>{const{payer:a=e.rpc().getDefaultFeePayer()}=n,r=t.authority??e.identity(),i=t.index??t.candyMachine.itemsLoaded,{items:s}=t;return fe(t.candyMachine,i),be(t.candyMachine,i,s.length),Ae(s),_.Q.make().setFeePayer(a).add({instruction:(0,g.createAddConfigLinesInstruction)({candyMachine:t.candyMachine.address,authority:r.publicKey},{index:i.toNumber(),configLines:s}),signers:[r],key:t.instructionKey??"insertItems"})};var Ke=n(98884);const Be=(0,Ke.C3)(g.CandyMachine),Ie=(0,Ke.dd)(g.CandyMachine),Te=(0,Ke.C3)(g.CollectionPDA),ve=((0,Ke.dd)(g.CollectionPDA),"MintCandyMachineV2Operation"),Ee=(0,Y.j)(ve),We={async handle(e,t,n){ke(e.input.candyMachine,n.payer);const a=await Fe(t,e.input,n);n.throwIfCanceled();const r=(0,Y.Y)(t,n.confirmOptions),i=await a.sendAndConfirm(t,r);let s;n.throwIfCanceled();try{s=await t.nfts().findByMint({mintAddress:i.mintSigner.publicKey,tokenAddress:i.tokenAddress},n)}catch(o){throw new ge(t.rpc().getSolanaExporerUrl(i.response.signature),o)}return{nft:s,...i}}},Fe=async(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyMachine:i,newMint:s=p.Keypair.generate(),newOwner:o=e.identity().publicKey,newToken:d}=t,c=e.programs().getTokenMetadata(a).address,u=e.nfts().pdas().metadata({mint:s.publicKey,programs:a}),l=e.nfts().pdas().masterEdition({mint:s.publicKey,programs:a}),y=O(i.address),m=L(i.address),h=Te(await e.rpc().getAccount(m)),f=await e.tokens().builders().createTokenWithMint({decimals:0,initialSupply:(0,N.Sh)(1),mint:s,mintAuthority:r,freezeAuthority:r.publicKey,owner:o,token:d,createMintAccountInstructionKey:t.createMintAccountInstructionKey,initializeMintInstructionKey:t.initializeMintInstructionKey,createAssociatedTokenAccountInstructionKey:t.createAssociatedTokenAccountInstructionKey,createTokenAccountInstructionKey:t.createTokenAccountInstructionKey,initializeTokenInstructionKey:t.initializeTokenInstructionKey,mintTokensInstructionKey:t.mintTokensInstructionKey},{payer:r,programs:a}),{tokenAddress:M}=f.getContext(),b=(0,g.createMintNftInstruction)({candyMachine:i.address,candyMachineCreator:y,payer:r.publicKey,wallet:i.walletAddress,metadata:u,mint:s.publicKey,mintAuthority:r.publicKey,updateAuthority:r.publicKey,masterEdition:l,tokenMetadataProgram:c,clock:p.SYSVAR_CLOCK_PUBKEY,recentBlockhashes:p.SYSVAR_SLOT_HASHES_PUBKEY,instructionSysvarAccount:p.SYSVAR_INSTRUCTIONS_PUBKEY},{creatorBump:y.bump});if(i.whitelistMintSettings){const n=t.whitelistToken??e.tokens().pdas().associatedTokenAccount({mint:i.whitelistMintSettings.mint,owner:r.publicKey});b.keys.push({pubkey:n,isWritable:!0,isSigner:!1},{pubkey:i.whitelistMintSettings.mint,isWritable:!0,isSigner:!1},{pubkey:r.publicKey,isWritable:!1,isSigner:!0})}if(i.tokenMintAddress){const n=t.payerToken??e.tokens().pdas().associatedTokenAccount({mint:i.tokenMintAddress,owner:r.publicKey});b.keys.push({pubkey:n,isWritable:!0,isSigner:!1},{pubkey:r.publicKey,isWritable:!1,isSigner:!0})}return _.Q.make().setFeePayer(r).setContext({mintSigner:s,tokenAddress:M}).add(f).add({instruction:b,signers:[r,s],key:t.mintNftInstructionKey??"mintNft"}).when(h.exists,(n=>{(0,Ke.WJ)(h);const s=h.data.mint,o=e.nfts().pdas().metadata({mint:s,programs:a}),d=e.nfts().pdas().masterEdition({mint:s,programs:a}),l=e.nfts().pdas().collectionAuthorityRecord({mint:s,collectionAuthority:h.publicKey,programs:a});return n.add({instruction:(0,g.createSetCollectionDuringMintInstruction)({candyMachine:i.address,metadata:u,payer:r.publicKey,collectionPda:h.publicKey,tokenMetadataProgram:c,instructions:p.SYSVAR_INSTRUCTIONS_PUBKEY,collectionMint:h.data.mint,collectionMetadata:o,collectionMasterEdition:d,authority:i.authorityAddress,collectionAuthorityRecord:l}),signers:[r],key:t.setCollectionInstructionKey??"setCollection"})}))};var Re=n(31029);const ze="UpdateCandyMachineV2Operation",Oe=(0,Y.j)(ze),Le={async handle(e,t,n){const{candyMachine:a,authority:r=t.identity(),newAuthority:i,newCollection:s,...o}=e.input,d=V(a),c=j(a.address,d),u=j(a.address,{...d,...o}),{data:l,wallet:y,tokenMint:m}=u,g=!Re(u,c),p=De(t,{candyMachine:a,authority:r,newData:g?{...l,wallet:y,tokenMint:m}:void 0,newCollection:s,newAuthority:i},n);if(p.isEmpty())throw new J._j(ze);return p.sendAndConfirm(t,n.confirmOptions)}},De=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyMachine:i,authority:s=e.identity(),newData:o,newAuthority:d,newCollection:c}=t,u=e.programs().getTokenMetadata(a).address,l=!!d&&!d.equals(s.publicKey),y=c&&i.collectionMintAddress&&i.collectionMintAddress.equals(c),m=!!c&&!y,p=!m&&null===c&&null!==i.collectionMintAddress;return _.Q.make().setFeePayer(r).when(!!o,(e=>{const n=o,a=o?.wallet,r=o?.tokenMint,d=(0,g.createUpdateCandyMachineInstruction)({candyMachine:i.address,authority:s.publicKey,wallet:a},{data:n});return r&&d.keys.push({pubkey:r,isWritable:!1,isSigner:!1}),e.add({instruction:d,signers:[s],key:t.updateInstructionKey??"update"})})).when(m,(n=>{const o=c,d=e.nfts().pdas().metadata({mint:o,programs:a}),l=e.nfts().pdas().masterEdition({mint:o,programs:a}),y=L(i.address),m=e.nfts().pdas().collectionAuthorityRecord({mint:o,collectionAuthority:y,programs:a});return n.add({instruction:(0,g.createSetCollectionInstruction)({candyMachine:i.address,authority:s.publicKey,collectionPda:y,payer:r.publicKey,metadata:d,mint:o,edition:l,collectionAuthorityRecord:m,tokenMetadataProgram:u}),signers:[r,s],key:t.setCollectionInstructionKey??"setCollection"})})).when(p,(n=>{const r=i.collectionMintAddress,o=e.nfts().pdas().metadata({mint:r,programs:a}),d=L(i.address),c=e.nfts().pdas().collectionAuthorityRecord({mint:r,collectionAuthority:d,programs:a});return n.add({instruction:(0,g.createRemoveCollectionInstruction)({candyMachine:i.address,authority:s.publicKey,collectionPda:d,metadata:o,mint:r,collectionAuthorityRecord:c,tokenMetadataProgram:u}),signers:[s],key:t.removeCollectionInstructionKey??"removeCollection"})})).when(l,(e=>e.add({instruction:(0,g.createUpdateAuthorityInstruction)({candyMachine:i.address,authority:s.publicKey,wallet:o?.wallet??i.walletAddress},{newAuthority:d}),signers:[s],key:t.updateAuthorityInstructionKey??"updateAuthority"})))};class Ne{constructor(e){this.metaplex=e}create(e,t){return ee(this.metaplex,e,t)}delete(e,t){return re(this.metaplex,e,t)}insertItems(e,t){return Pe(this.metaplex,e,t)}mint(e,t){return Fe(this.metaplex,e,t)}update(e,t){return De(this.metaplex,e,t)}}n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698),n(54520),n(81454);var $e=n(25293),Ue=n(51244);const Ve="FindCandyMachinesV2ByPublicKeyOperation",je=(0,Y.j)(Ve),Ye={handle:async(e,t,n)=>{const{commitment:a}=n,{type:r,publicKey:i}=e.input,s=R.accounts(t).mergeConfig({commitment:a});let o;switch(r){case"authority":o=s.candyMachineAccountsForAuthority(i);break;case"wallet":o=s.candyMachineAccountsForWallet(i);break;default:throw new J.N6(r)}const d=await o.get();n.throwIfCanceled();const c=d.map((e=>L(e.publicKey))),u=Object.fromEntries(d.map((e=>[e.publicKey.toString(),Be(e)]))),l=[...new Set(Object.values(u).map((e=>e.data.tokenMint?.toString())).filter((e=>void 0!==e)))].map((e=>new p.PublicKey(e))),y=await t.rpc().getMultipleAccounts(l.concat(c),a);n.throwIfCanceled();const m=y.slice(0,l.length),g=y.slice(-c.length),h=Object.fromEntries(m.map((e=>[e.publicKey.toString(),(0,$e.MX)((0,Ue.RH)(e))])));return(0,C.gu)(d,g,((e,t)=>{const n=u[e.publicKey.toString()],a=t?Te(t):null,r=n.data.tokenMint?.toString();return U(n,e,a,r?h[r]:null)}))}},Qe="FindCandyMachineV2ByAddressOperation",_e=(0,Y.j)(Qe),qe={handle:async(e,t,n)=>{const{commitment:a}=n,{address:r}=e.input,i=L(r),s=await t.rpc().getMultipleAccounts([r,i],a),o=s[0];(0,Ke.WJ)(o);const d=Ie(o),c=Te(s[1]),u=d.data.tokenMint?await t.tokens().findMintByAddress({address:d.data.tokenMint},n):null;return U(d,o,c,u)}},Je="FindMintedNftsByCandyMachineV2Operation",He=(0,Y.j)(Je),Xe={handle:async(e,t,n)=>{const{candyMachine:a,version:r=2}=e.input,i=2===r?O(a):a,s=await t.nfts().findAllByCreator({creator:i,position:1},n);return s}};class Ze{constructor(e){this.metaplex=e}builders(){return new Ne(this.metaplex)}create(e,t){return this.metaplex.operations().execute(X(e),t)}delete(e,t){return this.metaplex.operations().execute(ne(e),t)}findAllBy(e,t){return this.metaplex.operations().execute(je(e),t)}findByAddress(e,t){return this.metaplex.operations().execute(_e(e),t)}findMintedNfts(e,t){return this.metaplex.operations().execute(He(e),t)}insertItems(e,t){return this.metaplex.operations().execute(Ge(e),t)}mint(e,t){return this.metaplex.operations().execute(Ee(e),t)}refresh(e,t){return this.findByAddress({address:(0,Q.G)(e)},t)}update(e,t){return this.metaplex.operations().execute(Oe(e),t)}}const et=()=>({install(e){const t=e.operations();t.register(X,Z),t.register(ne,ae),t.register(_e,qe),t.register(je,Ye),t.register(He,Xe),t.register(Ge,xe),t.register(Ee,We),t.register(Oe,Le),e.candyMachinesV2=function(){return new Ze(this)}}});var tt=n(98940);const nt="UpdateCandyGuardAuthorityOperation",at=(0,Y.j)(nt),rt={async handle(e,t,n){return it(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},it=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyGuard:i,newAuthority:s,authority:o=e.identity()}=t,d=e.programs().getCandyGuard(a);return _.Q.make().setFeePayer(r).add({instruction:(0,tt.createSetAuthorityInstruction)({candyGuard:i,authority:o.publicKey},{newAuthority:s},d.address),signers:[o,r],key:t.instructionKey??"updateCandyGuardAuthority"})};var st=n(44536);class ot extends se.j{constructor(e,t){super(e,"plugin","Candy Machine V3",t),(0,ie.n8)(this,"name","CandyMachineV3Error")}}class dt extends ot{constructor(e){const t=`The SDK is trying to access a custom Candy Guard named [${e}] but that guard was not registered in the SDK Register your custom guard by calling the \`metaplex.candyMachines().guards().register()\` method.`;super(t),(0,ie.n8)(this,"name","UnregisteredCandyGuardError")}}class ct extends ot{constructor(e,t,n){const a=`You are trying to add ${t} items to candy machine starting at index ${e}  but it can only hold a maximum of ${n} items. Limit number of assets you are adding or create a Candy Machine that can hold more of them.`;super(a),(0,ie.n8)(this,"name","CandyMachineCannotAddAmountError")}}class ut extends ot{constructor(e,t,n,a){const r=`You are trying to add an item to a Candy Machine but its ${t} is too long. The item settings define the ${t} limit as ${a} characters but the following content was provided [${n}] for the item at index ${e} Reduce the size of the ${t} for the item at index ${e}.`;super(r),(0,ie.n8)(this,"name","CandyMachineItemTextTooLongError")}}class lt extends ot{constructor(e,t){const n=`The NFT couldn't be fetched after being minted. This is most likely due to a bot tax that occured during minting. When someone tries to mint an NFT from a Candy Machine which cannot be minted from, the program will succeed and charge a small tax to fight against bots. Ensure you can mint from the Candy Machine. You may want to check the transaction logs for more details: [${e}].`;super(n,t),(0,ie.n8)(this,"name","CandyMachineBotTaxError")}}class yt extends ot{constructor(e){const t=`The provided Candy Machine defines groups of guards but nogroup label was provided to identity which group we should select. Please provide the label of the group you wish to select from via the \`group\` parameter. The available groups are [${e.join(", ")}]`;super(t),(0,ie.n8)(this,"name","GuardGroupRequiredError")}}class mt extends ot{constructor(e,t){const n=`You're trying to select the guard group [${e}] from a Candy Machine but this group does not exists on this Candy Machine. `+(t.length>0?`Please provide the label of a group that exists on the Candy Machine. The available groups are [${t.join(", ")}]`:"There are no guard groups defined on the Candy Machine. Please set the `group` parameter to `null` or remove it altogether.");super(n),(0,ie.n8)(this,"name","SelectedGuardGroupDoesNotExistError")}}class gt extends ot{constructor(e){const t=`The Candy Machine you are trying to mint from has the [${e}] guard enabled. This guard requires you to provide some additional settings when minting which you did not provide. Please provide some minting settings for the [${e}] guard via the \`guards\` parameter like so: \`guards.${e} = {...}\`.`;super(t),(0,ie.n8)(this,"name","GuardMintSettingsMissingError")}}class pt extends ot{constructor(e){const t=`You are trying to call the route instruction of the [${e}] guard but this guard does not support this feature or did not register it on the SDK. Please select a guard that support the route instruction feature. If you are using a custom guard, make sure you registered the route instruction feature by implementing the \`routeSettingsParser\` method on the guard manifest.`;super(t),(0,ie.n8)(this,"name","GuardRouteNotSupportedError")}}class ht extends ot{constructor(){const e="The provided Candy Machine does not have a Candy Guard associated with it yet, it is required for the operation you are trying to execute. Please provide a Candy Machine with an associated Candy Guard account.";super(e),(0,ie.n8)(this,"name","CandyGuardRequiredOnCandyMachineError")}}class ft extends ot{constructor(e,t){const n=(t?`The guard [${e}] is not enabled on the group [${t}] of the Candy Machine.`:`The guard [${e}] is not enabled on the Candy Machine. `)+"Please provide a different guard or select a different group such that the provided guard is enabled on the selected group.";super(n),(0,ie.n8)(this,"name","GuardNotEnabledError")}}class Mt extends ot{constructor(e,t){const n=`The provided group label [${e}] is too long. Group labels cannot be longer than ${t} characters. Please provide a shorter group label.`;super(n),(0,ie.n8)(this,"name","GuardGroupLabelTooLongError")}}class bt extends ot{constructor(e,t){const n=`The provided path [${t}] does not exist on the route instruction of the [${e}] guard. Please provide a recognized path.`;super(n),(0,ie.n8)(this,"name","UnrecognizePathForRouteInstructionError")}}class At extends ot{constructor(e){const t=`The payer must be the owner when using the [${e}] guard. Please remove the \`owner\` attribute from the mint input so they can be the same.`;super(t),(0,ie.n8)(this,"name","MintOwnerMustBeMintPayerError")}}class wt extends ot{constructor(){const e="There is a maximum of five additional programs when using the [programGate] guard. Please reduce the number of additional programs to <= 5.";super(e),(0,ie.n8)(this,"name","MaximumOfFiveAdditionalProgramsError")}}const St="CallCandyGuardRouteOperation",kt=Ct;function Ct(e){return{key:St,input:e}}Ct.key=St;const Gt={async handle(e,t,n){const a=xt(t,e.input,n);return a.sendAndConfirm(t,n.confirmOptions)}},xt=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyMachine:i,guard:s,settings:o,group:d=null}=t;if(!i.candyGuard)throw new ht;const c=e.candyMachines().guards().parseRouteSettings(i.address,i.candyGuard,r,s,o,d,a),u=[r,...c.signers],l=(0,tt.createRouteInstruction)({candyGuard:i.candyGuard.address,candyMachine:i.address,payer:r.publicKey},{args:{guard:0,data:c.arguments},label:d},e.programs().getCandyGuard(a).address);l.keys.push(...c.accountMetas);const y=e.candyMachines().guards().forCandyGuardProgram(a),m=y.findIndex((e=>e.name===s));return st.u8.write(l.data,8,m),_.Q.make().setFeePayer(r).add({instruction:l,signers:u,key:t.instructionKey??"callGuardRoute"})};var Pt=n(19656);const Kt=32,Bt=10,It=200,Tt=5,vt=34,Et=132+Bt+2+8+1+4+Tt*vt+1+4+Kt+4+4+It+4+1+1+4+Kt+4+It+32,Wt=6,Ft=73;n(3949);var Rt=n(62332);const zt=(e,t,n,a,r=0)=>{const i=st.u32.read(e,r);r+=4;const{nameLength:s}=a,{uriLength:o}=a,d=s+o,c=d*t,u=e.slice(r,r+c);r+=c;const l=e.slice(r,r+t),y=(0,Rt.r)(l,t),m=Math.floor(t/8)+1;r+=m;const g=st.uniformFixedSizeArray(st.u32,t).read(e,r).slice(0,n),p=t-n,h=e=>a.isSequential?e<p:!g.includes(e),f=[];return y.forEach(((e,t)=>{if(!e)return;const n=t*d,r=n+s,i=u.slice(n,n+s).toString("utf8"),c=u.slice(r,r+o).toString("utf8"),l=Ot(a.prefixName,t),y=Ot(a.prefixUri,t);f.push({index:t,minted:h(t),name:l+(0,C.NN)(i),uri:y+(0,C.NN)(c)})})),{itemsLoaded:i,items:f,itemsLoadedMap:y,itemsLeftToMint:g}},Ot=(e,t)=>e.replace("$ID+1$",`${t+1}`).replace("$ID$",`${t}`);var Lt=n(50758),Dt=n(51611);const Nt=e=>(0,Lt.y)("candyMachine",e);const $t=(e,t=null)=>{const n=(0,Dt.R9)(Pt.CandyMachine,Pt.candyMachineBeet.description),a=(0,Dt.Vn)(e,n),r=(0,k.ni)(a.data.data.itemsAvailable),i=(0,k.ni)(a.data.itemsRedeemed),s=(0,k.ni)(r.sub(i));let o=[],d=0,c=!0;const{hiddenSettings:u}=a.data.data,{configLineSettings:l}=a.data.data;let y;if(u)y={...u,type:"hidden"};else{(0,D.Ay)(!!l,"Expected either hidden or config line settings"),y={...l,type:"configLines"};const t=zt(e.data,r.toNumber(),s.toNumber(),y,Et);o=t.items,d=t.itemsLoaded,c=t.itemsLoaded>=r.toNumber()}return{model:"candyMachine",address:e.publicKey,accountInfo:(0,Ke.fS)(e),authorityAddress:a.data.authority,mintAuthorityAddress:a.data.mintAuthority,collectionMintAddress:a.data.collectionMint,symbol:(0,C.NN)(a.data.data.symbol),sellerFeeBasisPoints:a.data.data.sellerFeeBasisPoints,isMutable:a.data.data.isMutable,maxEditionSupply:(0,k.ni)(a.data.data.maxSupply),creators:a.data.data.creators.map((e=>({...e,share:e.percentageShare}))),items:o,itemsAvailable:r,itemsMinted:i,itemsRemaining:s,itemsLoaded:d,isFullyLoaded:c,itemSettings:y,featureFlags:(0,Rt.r)((0,k.ni)(a.data.features).toArrayLike(B.Buffer,"le",8).reverse(),64),candyGuard:t}},Ut=e=>({itemsAvailable:e.itemsAvailable,symbol:e.symbol,sellerFeeBasisPoints:e.sellerFeeBasisPoints,maxSupply:e.maxEditionSupply,isMutable:e.isMutable,creators:e.creators.map((e=>({...e,verified:!1,percentageShare:e.share}))),configLineSettings:"configLines"===e.itemSettings.type?e.itemSettings:null,hiddenSettings:"hidden"===e.itemSettings.type?e.itemSettings:null}),Vt=e=>{if(e.hiddenSettings)return Et;(0,D.Ay)(!!e.configLineSettings,"No config line settings nor hidden settings were provided. Please provide one of them.");const t=(0,k.ni)(e.itemsAvailable).toNumber(),n=e.configLineSettings.nameLength+e.configLineSettings.uriLength;return Math.ceil(Et+4+t*n+(4+Math.floor(t/8)+1)+(4+4*t))},jt="CreateCandyMachineOperation",Yt=Qt;function Qt(e){return{key:jt,input:e}}Qt.key=jt;const _t={async handle(e,t,n){const a=await qt(t,e.input,n);n.throwIfCanceled();const r=(0,Y.Y)(t,n.confirmOptions),i=await a.sendAndConfirm(t,r);n.throwIfCanceled();const s=await t.candyMachines().findByAddress({address:i.candyMachineSigner.publicKey},n);return n.throwIfCanceled(),{...i,candyMachine:s}}},qt=async(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyMachine:i=p.Keypair.generate(),authority:s=e.identity(),collection:o,sellerFeeBasisPoints:d,itemsAvailable:c,symbol:u="",maxEditionSupply:l=(0,k.ni)(0),isMutable:y=!0,withoutCandyGuard:m=!1}=t,g=t.creators??[{address:(0,Q.G)(s),share:100}],h=t.itemSettings??{type:"configLines",prefixName:"",nameLength:32,prefixUri:"",uriLength:200,isSequential:!1},f=e.candyMachines().pdas().authority({candyMachine:i.publicKey,programs:a}),M=e.nfts().pdas().metadata({mint:o.address,programs:a}),b=e.nfts().pdas().masterEdition({mint:o.address,programs:a}),A=e.nfts().pdas().collectionAuthorityRecord({mint:o.address,collectionAuthority:f,programs:a}),w=e.programs().getCandyMachine(a),S=e.programs().getTokenMetadata(a),C=Ut({itemsAvailable:c,symbol:u,sellerFeeBasisPoints:d,maxEditionSupply:l,isMutable:y,creators:g,itemSettings:h}),G=_.Q.make().setFeePayer(r).setContext({candyMachineSigner:i});let x=(0,Q.G)(s);if(!m){const n=e.candyMachines().builders().createCandyGuard({base:i,authority:(0,Q.G)(s),guards:t.guards??{},groups:t.groups},{programs:a,payer:r}),{candyGuardAddress:o}=n.getContext();x=o,G.add(n)}return G.add(await e.system().builders().createAccount({space:Vt(C),newAccount:i,program:w.address},{payer:r,programs:a})).add({instruction:(0,Pt.createInitializeInstruction)({candyMachine:i.publicKey,authorityPda:f,authority:(0,Q.G)(s),payer:r.publicKey,collectionMetadata:M,collectionMint:o.address,collectionMasterEdition:b,collectionUpdateAuthority:o.updateAuthority.publicKey,collectionAuthorityRecord:A,tokenMetadataProgram:S.address},{data:C},w.address),signers:[r,i,o.updateAuthority],key:t.initializeCandyMachineInstructionKey??"initializeCandyMachine"}).when(!m,(n=>{if(!(0,q.Jz)(s))throw new J.fC("authority","PublicKey","In order to create a Candy Machine with an associated Candy Guard you must provide the authority as a Signer.");return n.add(e.candyMachines().builders().wrapCandyGuard({candyMachine:i.publicKey,candyMachineAuthority:s,candyGuard:x,candyGuardAuthority:s,wrapCandyGuardInstructionKey:t.wrapCandyGuardInstructionKey},{payer:r,programs:a}))}))},Jt="CreateCandyGuardOperation",Ht=Xt;function Xt(e){return{key:Jt,input:e}}Xt.key=Jt;const Zt={async handle(e,t,n){const a=en(t,e.input,n),r=(0,Y.Y)(t,n.confirmOptions),i=await a.sendAndConfirm(t,r);n.throwIfCanceled();const s=await t.candyMachines().findCandyGuardByBaseAddress({address:i.base.publicKey},n);return{...i,candyGuard:s}}},en=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,i=t.base??p.Keypair.generate(),s=t.authority??e.identity().publicKey,o=e.programs().getCandyGuard(a),d=e.candyMachines().pdas().candyGuard({base:i.publicKey,programs:a}),c=e.candyMachines().guards().serializeSettings(t.guards,t.groups??[],a);return _.Q.make().setFeePayer(r).setContext({base:i,candyGuardAddress:d}).add({instruction:(0,tt.createInitializeInstruction)({candyGuard:d,base:i.publicKey,authority:s,payer:r.publicKey},{data:c},o.address),signers:[i,r],key:t.createCandyGuardInstructionKey??"createCandyGuard"})},tn="DeleteCandyMachineOperation",nn=(0,Y.j)(tn),an={async handle(e,t,n){return rn(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},rn=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyMachine:i,candyGuard:s,authority:o=e.identity(),candyGuardAuthority:d=o}=t,c=e.programs().getCandyMachine(a),u=_.Q.make().setFeePayer(r).add({instruction:(0,Pt.createWithdrawInstruction)({candyMachine:i,authority:o.publicKey},c.address),signers:[o],key:t.deleteCandyMachineInstructionKey??"deleteCandyMachine"});return s&&u.add(e.candyMachines().builders().deleteCandyGuard({candyGuard:s,authority:d},{payer:r,programs:a})),u},sn="DeleteCandyGuardOperation",on=(0,Y.j)(sn),dn={async handle(e,t,n){return cn(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},cn=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyGuard:i,authority:s=e.identity()}=t,o=e.programs().getCandyGuard(a);return _.Q.make().setFeePayer(r).add({instruction:(0,tt.createWithdrawInstruction)({candyGuard:i,authority:s.publicKey},o.address),signers:[s],key:t.deleteCandyGuardInstructionKey??"deleteCandyGuard"})},un=(e,t,n)=>{if(t+n>e.itemsAvailable.toNumber())throw new ct(t,n,e.itemsAvailable.toNumber())},ln=(e,t)=>{if("configLines"!==e.itemSettings.type)return;const{nameLength:n}=e.itemSettings,{uriLength:a}=e.itemSettings;for(let r=0;r<t.length;r++){if(t[r].name.length>n)throw new ut(r,"name",t[r].name,n);if(t[r].uri.length>a)throw new ut(r,"uri",t[r].uri,a)}},yn="InsertCandyMachineItemsOperation",mn=(0,Y.j)(yn),gn={async handle(e,t,n){return pn(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},pn=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,i=t.authority??e.identity(),s=t.index??t.candyMachine.itemsLoaded,{items:o}=t;un(t.candyMachine,s,o.length),ln(t.candyMachine,o);const d=e.programs().getCandyMachine(a);return _.Q.make().setFeePayer(r).add({instruction:(0,Pt.createAddConfigLinesInstruction)({candyMachine:t.candyMachine.address,authority:i.publicKey},{index:s,configLines:o},d.address),signers:[i],key:t.instructionKey??"insertItems"})},hn="MintFromCandyMachineOperation",fn=Mn;function Mn(e){return{key:hn,input:e}}Mn.key=hn;const bn={async handle(e,t,n){const a=await An(t,e.input,n);n.throwIfCanceled();const r=(0,Y.Y)(t,n.confirmOptions),i=await a.sendAndConfirm(t,r);let s;n.throwIfCanceled();try{s=await t.nfts().findByMint({mintAddress:i.mintSigner.publicKey,tokenAddress:i.tokenAddress},n)}catch(o){const{candyGuard:n}=e.input.candyMachine;if(!n)throw o;const a=t.candyMachines().guards().resolveGroupSettings(n.guards,n.groups,e.input.group??null);if(!("botTax"in a))throw o;throw new lt(t.rpc().getSolanaExporerUrl(i.response.signature),o)}return{nft:s,...i}}},An=async(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyMachine:i,collectionUpdateAuthority:s,mintAuthority:o=e.identity(),mint:d=p.Keypair.generate(),owner:c=r.publicKey,group:u=null,guards:l={},token:y}=t,m=e.programs().getCandyMachine(a),g=e.programs().getCandyGuard(a),h=e.programs().getTokenMetadata(a),f=e.programs().getToken(a),M=e.programs().getSystem(a),b=e.candyMachines().pdas().authority({candyMachine:i.address,programs:a}),A=e.nfts().pdas().metadata({mint:d.publicKey,programs:a}),w=e.nfts().pdas().masterEdition({mint:d.publicKey,programs:a}),S=e.nfts().pdas().metadata({mint:i.collectionMintAddress,programs:a}),k=e.nfts().pdas().masterEdition({mint:i.collectionMintAddress,programs:a}),C=e.nfts().pdas().collectionAuthorityRecord({mint:i.collectionMintAddress,collectionAuthority:b,programs:a}),G=await e.tokens().builders().createTokenWithMint({decimals:0,initialSupply:(0,N.Sh)(1),mint:d,mintAuthority:r,freezeAuthority:r.publicKey,owner:c,token:y,createMintAccountInstructionKey:t.createMintAccountInstructionKey,initializeMintInstructionKey:t.initializeMintInstructionKey,createAssociatedTokenAccountInstructionKey:t.createAssociatedTokenAccountInstructionKey,createTokenAccountInstructionKey:t.createTokenAccountInstructionKey,initializeTokenInstructionKey:t.initializeTokenInstructionKey,mintTokensInstructionKey:t.mintTokensInstructionKey},{payer:r,programs:a}),{tokenAddress:x}=G.getContext(),P={candyMachine:i.address,payer:r.publicKey,nftMetadata:A,nftMint:d.publicKey,nftMintAuthority:r.publicKey,nftMasterEdition:w,collectionAuthorityRecord:C,collectionMint:i.collectionMintAddress,collectionMetadata:S,collectionMasterEdition:k,collectionUpdateAuthority:s,candyMachineProgram:m.address,tokenMetadataProgram:h.address,tokenProgram:f.address,systemProgram:M.address,recentSlothashes:p.SYSVAR_SLOT_HASHES_PUBKEY,instructionSysvarAccount:p.SYSVAR_INSTRUCTIONS_PUBKEY};let K,B;if(i.candyGuard){const{candyGuard:t}=i,n=e.candyMachines().guards(),s=n.parseMintSettings(i.address,t,c,r,d,l,u,a);B=[r,d,...s.signers],K=(0,tt.createMintInstruction)({...P,candyGuard:i.candyGuard.address,candyMachineAuthorityPda:b},{mintArgs:s.arguments,label:u},g.address),K.keys.push(...s.accountMetas)}else B=[r,d,o],K=(0,Pt.createMintInstruction)({...P,authorityPda:b,mintAuthority:o.publicKey},m.address);return _.Q.make().setFeePayer(r).setContext({tokenAddress:x,mintSigner:d}).add(G).add({instruction:K,signers:B,key:t.mintFromCandyMachineInstructionKey??"mintNft"})},wn="UnwrapCandyGuardOperation",Sn=(0,Y.j)(wn),kn={async handle(e,t,n){return Cn(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},Cn=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyGuard:i,candyGuardAuthority:s=e.identity(),candyMachine:o,candyMachineAuthority:d=e.identity()}=t,c=e.programs().getCandyMachine(a),u=e.programs().getCandyGuard(a);return _.Q.make().setFeePayer(r).add({instruction:(0,tt.createUnwrapInstruction)({candyGuard:i,authority:s.publicKey,candyMachine:o,candyMachineProgram:c.address,candyMachineAuthority:d.publicKey},u.address),signers:[s,d],key:t.unwrapCandyGuardInstructionKey??"unwrapCandyGuard"})},Gn="UpdateCandyMachineOperation",xn=Pn;function Pn(e){return{key:Gn,input:e}}Pn.key=Gn;const Kn={async handle(e,t,n){const a=Bn(t,e.input,n);if(a.isEmpty())throw new J._j(Gn);return a.sendAndConfirm(t,n.confirmOptions)}},Bn=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{authority:i=e.identity(),candyGuardAuthority:s=i}=t;return _.Q.make().setFeePayer(r).add(In(e,t,i,a)).add(Tn(e,t,i,r,a)).add(vn(e,t,s,r,a)).add(En(e,t,i,a)).add(Wn(e,t,i,a)).add(Fn(e,t,s,r,a))},In=(e,t,n,a)=>{const r=(0,C.Eo)({itemsAvailable:t.itemsAvailable,symbol:t.symbol,sellerFeeBasisPoints:t.sellerFeeBasisPoints,maxEditionSupply:t.maxEditionSupply,isMutable:t.isMutable,creators:t.creators,itemSettings:t.itemSettings}),i=e.programs().getCandyMachine(a);let s;return 0===Object.keys(r).length?_.Q.make():(Nt(t.candyMachine)?s=Ut({...t.candyMachine,...r}):((0,D.rr)(r,["itemsAvailable","symbol","sellerFeeBasisPoints","maxEditionSupply","isMutable","creators","itemSettings"],Rn),s=Ut(r)),_.Q.make().add({instruction:(0,Pt.createUpdateInstruction)({candyMachine:(0,Q.G)(t.candyMachine),authority:n.publicKey},{data:s},i.address),signers:[n],key:t.updateDataInstructionKey??"updateCandyMachineData"}))},Tn=(e,t,n,a,r)=>{if(!t.collection)return _.Q.make();const i=t.collection.currentCollectionAddress??(Nt(t.candyMachine)?t.candyMachine.collectionMintAddress:null);if(!i)throw Rn(["collection.currentCollectionAddress"]);const s=e.programs().getTokenMetadata(r),o=e.programs().getCandyMachine(r),d=(0,Q.G)(t.candyMachine),c=t.collection.address,u=t.collection.updateAuthority,l=e.candyMachines().pdas().authority({candyMachine:d,programs:r}),y=e.nfts().pdas().metadata({mint:i}),m=e.nfts().pdas().collectionAuthorityRecord({mint:i,collectionAuthority:l}),g=e.nfts().pdas().metadata({mint:c}),p=e.nfts().pdas().masterEdition({mint:c}),h=e.nfts().pdas().collectionAuthorityRecord({mint:c,collectionAuthority:l});return _.Q.make().add({instruction:(0,Pt.createSetCollectionInstruction)({candyMachine:d,authority:n.publicKey,authorityPda:l,payer:a.publicKey,collectionMint:i,collectionMetadata:y,collectionAuthorityRecord:m,newCollectionUpdateAuthority:u.publicKey,newCollectionMetadata:g,newCollectionMint:c,newCollectionMasterEdition:p,newCollectionAuthorityRecord:h,tokenMetadataProgram:s.address},o.address),signers:[n,a,u],key:t.setCollectionInstructionKey??"setCandyMachineCollection"})},vn=(e,t,n,a,r)=>{const i=(0,C.Eo)({candyGuard:t.candyGuard,guards:t.guards,groups:t.groups});let s;return 0===Object.keys(i).length?_.Q.make():(Nt(t.candyMachine)&&t.candyMachine.candyGuard?s={candyGuard:t.candyMachine.candyGuard.address,guards:t.candyMachine.candyGuard.guards,groups:t.candyMachine.candyGuard.groups,...i}:((0,D.rr)(i,["candyGuard","guards","groups"],Rn),s=i),e.candyMachines().builders().updateCandyGuard({candyGuard:s.candyGuard,guards:s.guards,groups:s.groups,authority:n,updateInstructionKey:t.updateCandyGuardInstructionKey??"updateCandyGuard"},{payer:a,programs:r}))},En=(e,t,n,a)=>{if(!t.newMintAuthority)return _.Q.make();const r=e.programs().getCandyMachine(a);return _.Q.make().add({instruction:(0,Pt.createSetMintAuthorityInstruction)({candyMachine:(0,Q.G)(t.candyMachine),authority:n.publicKey,mintAuthority:t.newMintAuthority.publicKey},r.address),signers:[n,t.newMintAuthority],key:t.setAuthorityInstructionKey??"setCandyMachineAuthority"})},Wn=(e,t,n,a)=>{if(!t.newAuthority)return _.Q.make();const r=e.programs().getCandyMachine(a);return _.Q.make().add({instruction:(0,Pt.createSetAuthorityInstruction)({candyMachine:(0,Q.G)(t.candyMachine),authority:n.publicKey},{newAuthority:t.newAuthority},r.address),signers:[n],key:t.setAuthorityInstructionKey??"setCandyMachineAuthority"})},Fn=(e,t,n,a,r)=>{if(!t.newCandyGuardAuthority)return _.Q.make();const i=t.candyGuard??(Nt(t.candyMachine)&&t.candyMachine.candyGuard?t.candyMachine.candyGuard.address:null);if(!i)throw Rn(["candyGuard"]);return _.Q.make().add(e.candyMachines().builders().updateCandyGuardAuthority({candyGuard:i,authority:n,newAuthority:t.newCandyGuardAuthority,instructionKey:t.setCandyGuardAuthorityInstructionKey},{payer:a,programs:r}))},Rn=e=>new J.ZG(e,"When passing the Candy Machine as a `PublicKey` instead of a Candy Machine model the SDK cannot rely on current data to fill the gaps within the provided input. Alternatively, you can pass the Candy Machine model instead."),zn="UpdateCandyGuardOperation",On=Ln;function Ln(e){return{key:zn,input:e}}Ln.key=zn;const Dn={async handle(e,t,n){return Nn(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},Nn=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyGuard:i,guards:s,groups:o,authority:d=e.identity()}=t,c=e.programs().getCandyGuard(a),u=e.candyMachines().guards().serializeSettings(s,o,a);return _.Q.make().setFeePayer(r).add({instruction:(0,tt.createUpdateInstruction)({candyGuard:i,authority:d.publicKey,payer:r.publicKey},{data:u},c.address),signers:[d,r],key:t.updateInstructionKey??"updateCandyGuard"})},$n="WrapCandyGuardOperation",Un=(0,Y.j)($n),Vn={async handle(e,t,n){return jn(t,e.input,n).sendAndConfirm(t,n.confirmOptions)}},jn=(e,t,n={})=>{const{programs:a,payer:r=e.rpc().getDefaultFeePayer()}=n,{candyGuard:i,candyGuardAuthority:s=e.identity(),candyMachine:o,candyMachineAuthority:d=e.identity()}=t,c=e.programs().getCandyMachine(a),u=e.programs().getCandyGuard(a);return _.Q.make().setFeePayer(r).add({instruction:(0,tt.createWrapInstruction)({candyGuard:i,authority:s.publicKey,candyMachine:o,candyMachineProgram:c.address,candyMachineAuthority:d.publicKey},u.address),signers:[s,d],key:t.wrapCandyGuardInstructionKey??"wrapCandyGuard"})};class Yn{constructor(e){this.metaplex=e}callGuardRoute(e,t){return xt(this.metaplex,e,t)}create(e,t){return qt(this.metaplex,e,t)}createCandyGuard(e,t){return en(this.metaplex,e,t)}delete(e,t){return rn(this.metaplex,e,t)}deleteCandyGuard(e,t){return cn(this.metaplex,e,t)}insertItems(e,t){return pn(this.metaplex,e,t)}mint(e,t){return An(this.metaplex,e,t)}unwrapCandyGuard(e,t){return Cn(this.metaplex,e,t)}update(e,t){return Bn(this.metaplex,e,t)}updateCandyGuard(e,t){return Nn(this.metaplex,e,t)}updateCandyGuardAuthority(e,t){return it(this.metaplex,e,t)}wrapCandyGuard(e,t){return jn(this.metaplex,e,t)}}n(8872);class Qn{constructor(e){(0,ie.n8)(this,"guards",[]),this.metaplex=e}register(...e){this.guards.push(...e)}get(e){const t=this.guards.find((t=>t.name===e));if(!t)throw new dt(e);return t}all(){return this.guards}forProgram(e="CandyGuardProgram"){const t="object"===typeof e&&"availableGuards"in e?e:this.metaplex.programs().get(e);return t.availableGuards.map((e=>this.get(e)))}forCandyGuardProgram(e=[]){const t=this.metaplex.programs().getCandyGuard(e);return this.forProgram(t)}serializeSettings(e,t=[],n=[]){const a=this.forCandyGuardProgram(n);this.assertGuardsAreRegistered(e,t,a.map((({name:e})=>e)));const r=e=>{const{features:t,buffer:n}=a.reduce(((t,n,a)=>{const r=e[n.name]??null;return t.features[a]=Boolean(r),r&&(t.buffer=B.Buffer.concat([t.buffer,(0,Dt.lK)(r,n.settingsSerializer)])),t}),{features:[],buffer:B.Buffer.from([])}),r=(0,Rt.k)(t,8,!0);return r.reverse(),B.Buffer.concat([r,n])};let i=r(e);const s=B.Buffer.alloc(4);return st.u32.write(s,0,t.length),i=B.Buffer.concat([i,s]),t.forEach((e=>{if(e.label.length>Wt)throw new Mt(e.label,Wt);const t=B.Buffer.alloc(Wt);t.write((0,C.k3)(e.label,Wt),0,Wt,"utf8"),i=B.Buffer.concat([i,t,r(e.guards)])})),i}deserializeSettings(e,t="CandyGuardProgram"){const n=this.forProgram(t),a=()=>{const t=e.slice(0,8);t.reverse();const a=(0,Rt.r)(t,64,!0);return e=e.slice(8),n.reduce(((t,n,r)=>{const i=a[r]??!1;if(t[n.name]=null,!i)return t;const[s]=(0,Dt.iu)(e,n.settingsSerializer);return e=e.slice(n.settingsBytes),t[n.name]=s,t}),{})},r=a(),i=[],s=st.u32.read(e,0);e=e.slice(4);for(let o=0;o<s;o++){const t=(0,C.NN)(e.slice(0,Wt).toString("utf8"));e=e.slice(Wt),i.push({label:t,guards:a()})}return{guards:r,groups:i}}resolveGroupSettings(e,t=[],n){const a=t.map((e=>e.label)),r=t.find((e=>e.label===n));if(n&&!r)throw new mt(n,a);if(0===t.length)return e;if(!r)throw new yt(a);const i=Object.fromEntries(Object.entries(r.guards).filter((([,e])=>null!=e)));return{...e,...i}}parseMintSettings(e,t,n,a,r,i,s,o=[]){const d=this.forCandyGuardProgram(o),c=this.resolveGroupSettings(t.guards,t.groups,s),u={arguments:B.Buffer.from([]),accountMetas:[],signers:[]};return d.reduce(((s,d)=>{const u=c[d.name]??null,l=i[d.name]??null;if(!d.mintSettingsParser||!u)return s;const y=d.mintSettingsParser({metaplex:this.metaplex,settings:u,mintSettings:l,owner:n,payer:a,mint:r,candyMachine:e,candyGuard:t.address,candyGuardAuthority:t.authorityAddress,programs:o}),m=this.getAccountMetas(y.remainingAccounts),g=this.getSigners(y.remainingAccounts);return s.arguments=B.Buffer.concat([s.arguments,y.arguments]),s.accountMetas.push(...m),s.signers.push(...g),s}),u)}parseRouteSettings(e,t,n,a,r,i,s=[]){const o=this.get(a);if(!o.routeSettingsParser)throw new pt(a);const d=this.resolveGroupSettings(t.guards,t.groups,i),c=d[a]??null;if(!c)throw new ft(a,i);const u=o.routeSettingsParser({metaplex:this.metaplex,settings:c,routeSettings:r,payer:n,candyMachine:e,candyGuard:t.address,candyGuardAuthority:t.authorityAddress,programs:s});return{arguments:u.arguments,accountMetas:this.getAccountMetas(u.remainingAccounts),signers:this.getSigners(u.remainingAccounts)}}getAccountMetas(e){return e.map((e=>({pubkey:e.isSigner?e.address.publicKey:e.address,isSigner:e.isSigner,isWritable:e.isWritable})))}getSigners(e){return e.filter((e=>e.isSigner)).map((e=>e.address))}assertGuardsAreRegistered(e,t,n){const a=new Set,r=e=>{Object.keys(e).forEach((t=>{e[t]&&a.add(t)}))};r(e),t.forEach((e=>r(e.guards))),a.forEach((e=>{if(!n.includes(e))throw new dt(e)}))}}class _n{constructor(e){this.metaplex=e}authority({candyMachine:e,programs:t}){const n=this.metaplex.programs().getCandyMachine(t);return z.G.find(n.address,[B.Buffer.from("candy_machine","utf8"),e.toBuffer()])}candyGuard({base:e,programs:t}){const n=this.metaplex.programs().getCandyGuard(t);return z.G.find(n.address,[B.Buffer.from("candy_guard","utf8"),e.toBuffer()])}mintLimitCounter({id:e,user:t,candyMachine:n,candyGuard:a,programs:r}){const i=this.metaplex.programs().getCandyGuard(r);return z.G.find(i.address,[B.Buffer.from("mint_limit","utf8"),B.Buffer.from([e]),t.toBuffer(),a.toBuffer(),n.toBuffer()])}merkleProof({merkleRoot:e,user:t,candyMachine:n,candyGuard:a,programs:r}){const i=this.metaplex.programs().getCandyGuard(r);return z.G.find(i.address,[B.Buffer.from("allow_list","utf8"),e,t.toBuffer(),a.toBuffer(),n.toBuffer()])}freezeEscrow({destination:e,candyMachine:t,candyGuard:n,programs:a}){const r=this.metaplex.programs().getCandyGuard(a);return z.G.find(r.address,[B.Buffer.from("freeze_escrow","utf8"),e.toBuffer(),n.toBuffer(),t.toBuffer()])}}const qn=(e,t)=>{const n=(0,Dt.R9)(tt.CandyGuard,tt.candyGuardBeet.description),a=(0,Dt.Vn)(e,n),{guards:r,groups:i}=t.candyMachines().guards().deserializeSettings(e.data.slice(Ft),e.owner);return{model:"candyGuard",address:new z.G(a.publicKey,a.data.bump),accountInfo:(0,Ke.fS)(e),baseAddress:a.data.base,authorityAddress:a.data.authority,guards:r,groups:i}},Jn="FindCandyGuardsByAuthorityOperation",Hn=Xn;function Xn(e){return{key:Jn,input:e}}Xn.key=Jn;const Zn={handle:async(e,t,n)=>{const{authority:a}=e.input,{programs:r,commitment:i}=n,s=t.programs().getCandyGuard(r),o=tt.CandyGuard.gpaBuilder(s.address).addFilter("authority",a),d=new I.I(t,s.address);return d.mergeConfig({...o.config,commitment:i}),d.getAndMap((e=>qn(e,t)))}},ea=["botTax","solPayment","tokenPayment","startDate","thirdPartySigner","tokenGate","gatekeeper","endDate","allowList","mintLimit","nftPayment","redeemedAmount","addressGate","nftGate","nftBurn","tokenBurn","freezeSolPayment","freezeTokenPayment","programGate"],ta=(ea.reduce(((e,t)=>(e[t]=null,e)),{}),{name:"CandyMachineProgram",address:Pt.PROGRAM_ID,errorResolver:e=>Pt.cusper.errorFromProgramLogs(e.logs,!1)}),na=e=>"object"===typeof e&&"availableGuards"in e;function aa(e){(0,D.Ay)(na(e),"Expected CandyGuardProgram model")}const ra={name:"CandyGuardProgram",address:tt.PROGRAM_ID,errorResolver:e=>tt.cusper.errorFromProgramLogs(e.logs,!1),availableGuards:ea},ia={name:"GatewayProgram",address:new p.PublicKey("gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs")},sa="FindCandyMachineByAddressOperation",oa=da;function da(e){return{key:sa,input:e}}da.key=sa;const ca={async handle(e,t,n){const{address:a}=e.input,{commitment:r,programs:i}=n,s=t.candyMachines().pdas().candyGuard({base:a,programs:i}),[o,d]=await t.rpc().getMultipleAccounts([a,s],r);n.throwIfCanceled(),(0,Ke.WJ)(o,"CandyMachine");const c=$t(o),u=c.mintAuthorityAddress;if(d.exists&&d.publicKey.equals(u))return{...c,candyGuard:qn(d,t)};if(p.PublicKey.isOnCurve(u))return c;const l=await t.rpc().getAccount(u,r);n.throwIfCanceled();try{(0,Ke.WJ)(l);const e=t.programs().get(l.owner);return aa(e),{...c,candyGuard:qn(l,t)}}catch(y){return c}}},ua="FindCandyGuardByAddressOperation",la=ya;function ya(e){return{key:ua,input:e}}ya.key=ua;const ma={handle:async(e,t,n)=>{const{address:a}=e.input,r=await t.rpc().getAccount(a,n.commitment);return(0,Ke.WJ)(r),qn(r,t)}};class ga{constructor(e){this.metaplex=e,this.guardsClient=new Qn(e)}guards(){return this.guardsClient}builders(){return new Yn(this.metaplex)}pdas(){return new _n(this.metaplex)}callGuardRoute(e,t){return this.metaplex.operations().execute(kt(e),t)}create(e,t){return this.metaplex.operations().execute(Yt(e),t)}createCandyGuard(e,t){return this.metaplex.operations().execute(Ht(e),t)}delete(e,t){return this.metaplex.operations().execute(nn(e),t)}deleteCandyGuard(e,t){return this.metaplex.operations().execute(on(e),t)}findAllCandyGuardsByAuthority(e,t){return this.metaplex.operations().execute(Hn(e),t)}findByAddress(e,t){return this.metaplex.operations().execute(oa(e),t)}findCandyGuardByAddress(e,t){return this.metaplex.operations().execute(la(e),t)}findCandyGuardByBaseAddress(e,t){const n=this.pdas().candyGuard({base:e.address});return this.findCandyGuardByAddress({...e,address:n},t)}insertItems(e,t){return this.metaplex.operations().execute(mn(e),t)}mint(e,t){return this.metaplex.operations().execute(fn(e),t)}async refresh(e,t){const n={address:(0,Q.G)(e)},a=Nt(e)?await this.findByAddress(n,t):await this.findCandyGuardByAddress(n,t);return a}unwrapCandyGuard(e,t){return this.metaplex.operations().execute(Sn(e),t)}update(e,t){return this.metaplex.operations().execute(xn(e),t)}updateCandyGuard(e,t){return this.metaplex.operations().execute(On(e),t)}updateCandyGuardAuthority(e,t){return this.metaplex.operations().execute(at(e),t)}wrapCandyGuard(e,t){return this.metaplex.operations().execute(Un(e),t)}}const pa={name:"freezeSolPayment",settingsBytes:40,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.freezeSolPaymentBeet),(e=>({amount:(0,N.pR)(e.lamports),destination:e.destination})),(e=>({lamports:e.amount.basisPoints,destination:e.destination}))),mintSettingsParser:({metaplex:e,settings:t,owner:n,payer:a,mint:r,candyMachine:i,candyGuard:s,programs:o})=>{if(!n.equals(a.publicKey))throw new At("freezeSolPayment");const d=e.candyMachines().pdas().freezeEscrow({destination:t.destination,candyMachine:i,candyGuard:s,programs:o}),c=e.tokens().pdas().associatedTokenAccount({mint:r.publicKey,owner:a.publicKey,programs:o});return{arguments:B.Buffer.from([]),remainingAccounts:[{isSigner:!1,address:d,isWritable:!0},{isSigner:!1,address:c,isWritable:!1}]}},routeSettingsParser:e=>{switch(e.routeSettings.path){case"initialize":return ha(e);case"thaw":return fa(e);case"unlockFunds":return Ma(e);default:throw new bt("freezeSolPayment",e.routeSettings.path)}}};function ha({metaplex:e,settings:t,routeSettings:n,candyMachine:a,candyGuard:r,programs:i}){(0,D.Ay)("initialize"===n.path);const s=e.candyMachines().pdas().freezeEscrow({destination:t.destination,candyMachine:a,candyGuard:r,programs:i}),o=e.programs().getSystem(i),d=B.Buffer.alloc(9);return st.u8.write(d,0,tt.FreezeInstruction.Initialize),st.u64.write(d,1,n.period),{arguments:d,remainingAccounts:[{isSigner:!1,address:s,isWritable:!0},{isSigner:!0,address:n.candyGuardAuthority,isWritable:!1},{isSigner:!1,address:o.address,isWritable:!1}]}}function fa({metaplex:e,settings:t,routeSettings:n,candyMachine:a,candyGuard:r,programs:i}){(0,D.Ay)("thaw"===n.path);const s=e.candyMachines().pdas().freezeEscrow({destination:t.destination,candyMachine:a,candyGuard:r,programs:i}),o=e.tokens().pdas().associatedTokenAccount({mint:n.nftMint,owner:n.nftOwner,programs:i}),d=e.nfts().pdas().masterEdition({mint:n.nftMint,programs:i}),c=e.programs().getToken(i),u=e.programs().getTokenMetadata(i),l=B.Buffer.alloc(1);return st.u8.write(l,0,tt.FreezeInstruction.Thaw),{arguments:l,remainingAccounts:[{isSigner:!1,address:s,isWritable:!0},{isSigner:!1,address:n.nftMint,isWritable:!1},{isSigner:!1,address:n.nftOwner,isWritable:!1},{isSigner:!1,address:o,isWritable:!0},{isSigner:!1,address:d,isWritable:!1},{isSigner:!1,address:c.address,isWritable:!1},{isSigner:!1,address:u.address,isWritable:!1}]}}function Ma({metaplex:e,settings:t,routeSettings:n,candyMachine:a,candyGuard:r,programs:i}){(0,D.Ay)("unlockFunds"===n.path);const s=e.candyMachines().pdas().freezeEscrow({destination:t.destination,candyMachine:a,candyGuard:r,programs:i}),o=e.programs().getSystem(i),d=B.Buffer.alloc(1);return st.u8.write(d,0,tt.FreezeInstruction.UnlockFunds),{arguments:d,remainingAccounts:[{isSigner:!1,address:s,isWritable:!0},{isSigner:!0,address:n.candyGuardAuthority,isWritable:!1},{isSigner:!1,address:t.destination,isWritable:!0},{isSigner:!1,address:o.address,isWritable:!1}]}}const ba={name:"freezeTokenPayment",settingsBytes:72,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.freezeTokenPaymentBeet),(e=>({mint:e.mint,amount:(0,N.Sh)(e.amount),destinationAta:e.destinationAta})),(e=>({mint:e.mint,amount:e.amount.basisPoints,destinationAta:e.destinationAta}))),mintSettingsParser:({metaplex:e,settings:t,owner:n,payer:a,mint:r,candyMachine:i,candyGuard:s,programs:o})=>{if(!n.equals(a.publicKey))throw new At("freezeTokenPayment");const d=e.candyMachines().pdas().freezeEscrow({destination:t.destinationAta,candyMachine:i,candyGuard:s,programs:o}),c=e.tokens().pdas().associatedTokenAccount({mint:r.publicKey,owner:a.publicKey}),u=e.tokens().pdas().associatedTokenAccount({mint:t.mint,owner:a.publicKey,programs:o}),l=e.tokens().pdas().associatedTokenAccount({mint:t.mint,owner:d,programs:o});return{arguments:B.Buffer.from([]),remainingAccounts:[{isSigner:!1,address:d,isWritable:!0},{isSigner:!1,address:c,isWritable:!1},{isSigner:!1,address:u,isWritable:!0},{isSigner:!1,address:l,isWritable:!0}]}},routeSettingsParser:e=>{switch(e.routeSettings.path){case"initialize":return Aa(e);case"thaw":return wa(e);case"unlockFunds":return Sa(e);default:throw new bt("freezeTokenPayment",e.routeSettings.path)}}};function Aa({metaplex:e,settings:t,routeSettings:n,candyMachine:a,candyGuard:r,programs:i}){(0,D.Ay)("initialize"===n.path);const s=e.candyMachines().pdas().freezeEscrow({destination:t.destinationAta,candyMachine:a,candyGuard:r,programs:i}),o=e.tokens().pdas().associatedTokenAccount({mint:t.mint,owner:s,programs:i}),d=e.programs().getSystem(i),c=e.programs().getToken(i),u=e.programs().getAssociatedToken(i),l=B.Buffer.alloc(9);return st.u8.write(l,0,tt.FreezeInstruction.Initialize),st.u64.write(l,1,n.period),{arguments:l,remainingAccounts:[{isSigner:!1,address:s,isWritable:!0},{isSigner:!0,address:n.candyGuardAuthority,isWritable:!1},{isSigner:!1,address:d.address,isWritable:!1},{isSigner:!1,address:o,isWritable:!0},{isSigner:!1,address:t.mint,isWritable:!1},{isSigner:!1,address:c.address,isWritable:!1},{isSigner:!1,address:u.address,isWritable:!1},{isSigner:!1,address:t.destinationAta,isWritable:!0}]}}function wa({metaplex:e,settings:t,routeSettings:n,candyMachine:a,candyGuard:r,programs:i}){(0,D.Ay)("thaw"===n.path);const s=e.candyMachines().pdas().freezeEscrow({destination:t.destinationAta,candyMachine:a,candyGuard:r,programs:i}),o=e.tokens().pdas().associatedTokenAccount({mint:n.nftMint,owner:n.nftOwner,programs:i}),d=e.nfts().pdas().masterEdition({mint:n.nftMint,programs:i}),c=e.programs().getToken(i),u=e.programs().getTokenMetadata(i),l=B.Buffer.alloc(1);return st.u8.write(l,0,tt.FreezeInstruction.Thaw),{arguments:l,remainingAccounts:[{isSigner:!1,address:s,isWritable:!0},{isSigner:!1,address:n.nftMint,isWritable:!1},{isSigner:!1,address:n.nftOwner,isWritable:!1},{isSigner:!1,address:o,isWritable:!0},{isSigner:!1,address:d,isWritable:!1},{isSigner:!1,address:c.address,isWritable:!1},{isSigner:!1,address:u.address,isWritable:!1}]}}function Sa({metaplex:e,settings:t,routeSettings:n,candyMachine:a,candyGuard:r,programs:i}){(0,D.Ay)("unlockFunds"===n.path);const s=e.candyMachines().pdas().freezeEscrow({destination:t.destinationAta,candyMachine:a,candyGuard:r,programs:i}),o=e.tokens().pdas().associatedTokenAccount({mint:t.mint,owner:s,programs:i}),d=e.programs().getSystem(i),c=e.programs().getToken(i),u=B.Buffer.alloc(1);return st.u8.write(u,0,tt.FreezeInstruction.UnlockFunds),{arguments:u,remainingAccounts:[{isSigner:!1,address:s,isWritable:!0},{isSigner:!0,address:n.candyGuardAuthority,isWritable:!1},{isSigner:!1,address:o,isWritable:!0},{isSigner:!1,address:t.destinationAta,isWritable:!0},{isSigner:!1,address:c.address,isWritable:!1},{isSigner:!1,address:d.address,isWritable:!1}]}}const ka={name:"botTax",settingsBytes:9,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.botTaxBeet),(e=>({...e,lamports:(0,N.pR)(e.lamports)})),(e=>({...e,lamports:e.lamports.basisPoints})))},Ca={name:"solPayment",settingsBytes:40,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.solPaymentBeet),(e=>({...e,amount:(0,N.pR)(e.lamports)})),(e=>({...e,lamports:e.amount.basisPoints}))),mintSettingsParser:({settings:e})=>({arguments:B.Buffer.from([]),remainingAccounts:[{isSigner:!1,address:e.destination,isWritable:!0}]})},Ga={name:"tokenPayment",settingsBytes:72,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.tokenPaymentBeet),(e=>({mint:e.mint,amount:(0,N.Sh)(e.amount),destinationAta:e.destinationAta})),(e=>({mint:e.mint,amount:e.amount.basisPoints,destinationAta:e.destinationAta}))),mintSettingsParser:({metaplex:e,settings:t,payer:n,programs:a})=>{const r=e.tokens().pdas().associatedTokenAccount({mint:t.mint,owner:n.publicKey,programs:a});return{arguments:B.Buffer.from([]),remainingAccounts:[{isSigner:!1,address:r,isWritable:!0},{isSigner:!1,address:t.destinationAta,isWritable:!0}]}}},xa={name:"startDate",settingsBytes:8,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.startDateBeet),(e=>({date:(0,$.$r)(e.date)})),(e=>e))},Pa={name:"thirdPartySigner",settingsBytes:32,settingsSerializer:(0,Dt.Rk)(tt.thirdPartySignerBeet),mintSettingsParser:({mintSettings:e})=>{if(!e)throw new gt("thirdPartySigner");return{arguments:B.Buffer.from([]),remainingAccounts:[{isSigner:!0,address:e.signer,isWritable:!0}]}}};var Ka=n(90712)["Buffer"];const Ba={name:"tokenGate",settingsBytes:40,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.tokenGateBeet),(e=>({...e,amount:(0,N.Sh)(e.amount)})),(e=>({...e,amount:e.amount.basisPoints}))),mintSettingsParser:({metaplex:e,settings:t,payer:n,programs:a})=>{const r=e.tokens().pdas().associatedTokenAccount({mint:t.mint,owner:n.publicKey,programs:a});return{arguments:Ka.from([]),remainingAccounts:[{isSigner:!1,address:r,isWritable:!1}]}}},Ia={name:"gatekeeper",settingsBytes:33,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.gatekeeperBeet),(e=>({...e,network:e.gatekeeperNetwork})),(e=>({...e,gatekeeperNetwork:e.network}))),mintSettingsParser:({metaplex:e,settings:t,mintSettings:n,payer:a,programs:r})=>{const i=e.programs().getGateway(r),s=n?.tokenAccount??z.G.find(i.address,[a.publicKey.toBuffer(),B.Buffer.from("gateway"),B.Buffer.from([0,0,0,0,0,0,0,0]),t.network.toBuffer()]),o=[{isSigner:!1,address:s,isWritable:!0}];if(t.expireOnUse){const e=z.G.find(i.address,[t.network.toBuffer(),B.Buffer.from("expire")]);o.push({isSigner:!1,address:i.address,isWritable:!1}),o.push({isSigner:!1,address:e,isWritable:!1})}return{arguments:B.Buffer.from([]),remainingAccounts:o}}},Ta={name:"endDate",settingsBytes:8,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.endDateBeet),(e=>({date:(0,$.$r)(e.date)})),(e=>e))};n(16573),n(78100),n(77936),n(37467),n(44732),n(79577);const va={name:"allowList",settingsBytes:32,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.allowListBeet),(e=>({merkleRoot:new Uint8Array(e.merkleRoot)})),(e=>({merkleRoot:Array.from(e.merkleRoot)}))),mintSettingsParser:({metaplex:e,settings:t,payer:n,candyMachine:a,candyGuard:r})=>({arguments:B.Buffer.from([]),remainingAccounts:[{isSigner:!1,isWritable:!1,address:e.candyMachines().pdas().merkleProof({merkleRoot:t.merkleRoot,user:n.publicKey,candyMachine:a,candyGuard:r})}]}),routeSettingsParser:({metaplex:e,settings:t,routeSettings:n,programs:a,candyMachine:r,candyGuard:i,payer:s})=>{const o=n.merkleProof,d=B.Buffer.alloc(4);return st.u32.write(d,0,o.length),{arguments:B.Buffer.concat([d,...o]),remainingAccounts:[{isSigner:!1,isWritable:!0,address:e.candyMachines().pdas().merkleProof({merkleRoot:t.merkleRoot,user:s.publicKey,candyMachine:r,candyGuard:i})},{isSigner:!1,isWritable:!1,address:e.programs().getSystem(a).address}]}}},Ea={name:"mintLimit",settingsBytes:3,settingsSerializer:(0,Dt.Rk)(tt.mintLimitBeet),mintSettingsParser:({metaplex:e,settings:t,payer:n,candyMachine:a,candyGuard:r,programs:i})=>{const s=e.candyMachines().pdas().mintLimitCounter({id:t.id,user:n.publicKey,candyMachine:a,candyGuard:r,programs:i});return{arguments:B.Buffer.from([]),remainingAccounts:[{address:s,isSigner:!1,isWritable:!0}]}}};var Wa=n(90712)["Buffer"];const Fa={name:"nftPayment",settingsBytes:64,settingsSerializer:(0,Dt.Rk)(tt.nftPaymentBeet),mintSettingsParser:({metaplex:e,settings:t,mintSettings:n,payer:a,programs:r})=>{if(!n)throw new gt("nftPayment");const i=e.programs().getAssociatedToken(r),s=n.tokenAccount??e.tokens().pdas().associatedTokenAccount({mint:n.mint,owner:a.publicKey,programs:r}),o=e.nfts().pdas().metadata({mint:n.mint,programs:r}),d=e.tokens().pdas().associatedTokenAccount({mint:n.mint,owner:t.destination,programs:r});return{arguments:Wa.from([]),remainingAccounts:[{isSigner:!1,address:s,isWritable:!0},{isSigner:!1,address:o,isWritable:!0},{isSigner:!1,address:n.mint,isWritable:!1},{isSigner:!1,address:t.destination,isWritable:!1},{isSigner:!1,address:d,isWritable:!0},{isSigner:!1,address:i.address,isWritable:!1}]}}},Ra={name:"redeemedAmount",settingsBytes:8,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.redeemedAmountBeet),(e=>({maximum:(0,k.ni)(e.maximum)})),(e=>e))},za={name:"addressGate",settingsBytes:32,settingsSerializer:(0,Dt.Rk)(tt.addressGateBeet)};var Oa=n(90712)["Buffer"];const La={name:"nftGate",settingsBytes:32,settingsSerializer:(0,Dt.Rk)(tt.nftGateBeet),mintSettingsParser:({metaplex:e,mintSettings:t,payer:n,programs:a})=>{if(!t)throw new gt("nftGate");const r=t.tokenAccount??e.tokens().pdas().associatedTokenAccount({mint:t.mint,owner:n.publicKey,programs:a}),i=e.nfts().pdas().metadata({mint:t.mint,programs:a});return{arguments:Oa.from([]),remainingAccounts:[{isSigner:!1,address:r,isWritable:!1},{isSigner:!1,address:i,isWritable:!1}]}}};var Da=n(90712)["Buffer"];const Na={name:"nftBurn",settingsBytes:32,settingsSerializer:(0,Dt.Rk)(tt.nftBurnBeet),mintSettingsParser:({metaplex:e,settings:t,mintSettings:n,payer:a,programs:r})=>{if(!n)throw new gt("nftBurn");const i=n.tokenAccount??e.tokens().pdas().associatedTokenAccount({mint:n.mint,owner:a.publicKey,programs:r}),s=e.nfts().pdas().metadata({mint:n.mint,programs:r}),o=e.nfts().pdas().masterEdition({mint:n.mint,programs:r}),d=e.nfts().pdas().metadata({mint:t.requiredCollection,programs:r});return{arguments:Da.from([]),remainingAccounts:[{isSigner:!1,address:i,isWritable:!0},{isSigner:!1,address:s,isWritable:!0},{isSigner:!1,address:o,isWritable:!0},{isSigner:!1,address:n.mint,isWritable:!0},{isSigner:!1,address:d,isWritable:!0}]}}};var $a=n(90712)["Buffer"];const Ua={name:"tokenBurn",settingsBytes:40,settingsSerializer:(0,Dt.bP)((0,Dt.Rk)(tt.tokenBurnBeet),(e=>({...e,amount:(0,N.Sh)(e.amount)})),(e=>({...e,amount:e.amount.basisPoints}))),mintSettingsParser:({metaplex:e,settings:t,payer:n,programs:a})=>{const r=e.tokens().pdas().associatedTokenAccount({mint:t.mint,owner:n.publicKey,programs:a});return{arguments:$a.from([]),remainingAccounts:[{isSigner:!1,address:r,isWritable:!0},{isSigner:!1,address:t.mint,isWritable:!0}]}}};var Va=n(90712)["Buffer"];const ja=5,Ya=4+32*ja,Qa={name:"programGate",settingsBytes:Ya,settingsSerializer:{description:tt.programGateBeet.description,serialize:e=>{if(e.additional.length>=ja)throw new wt;const t=tt.programGateBeet.toFixedFromValue(e),n=new st.BeetWriter(t.byteSize);n.write(t,e);const a=Va.alloc(Ya);return a.fill(n.buffer),a},deserialize:(e,t)=>{const n=tt.programGateBeet.toFixedFromData(e,t??0),a=new st.BeetReader(e,t??0),r=a.read(n);return[r,a.offset]}}},_a=()=>({install(e){const t=new ga(e);e.candyMachines=()=>t,e.programs().register(ta),e.programs().getCandyMachine=function(e){return this.get(ta.name,e)},e.programs().register(ra),e.programs().getCandyGuard=function(e){return this.get(ra.name,e)},e.programs().register(ia),e.programs().getGateway=function(e){return this.get(ia.name,e)},t.guards().register(ka),t.guards().register(Ca),t.guards().register(Ga),t.guards().register(xa),t.guards().register(Pa),t.guards().register(Ba),t.guards().register(Ia),t.guards().register(Ta),t.guards().register(va),t.guards().register(Ea),t.guards().register(Fa),t.guards().register(Ra),t.guards().register(za),t.guards().register(La),t.guards().register(Na),t.guards().register(Ua),t.guards().register(pa),t.guards().register(ba),t.guards().register(Qa);const n=e.operations();n.register(kt,Gt),n.register(Ht,Zt),n.register(Yt,_t),n.register(on,dn),n.register(nn,an),n.register(la,ma),n.register(Hn,Zn),n.register(oa,ca),n.register(mn,gn),n.register(fn,bn),n.register(Sn,kn),n.register(at,rt),n.register(On,Dn),n.register(xn,Kn),n.register(Un,Vn)}});var qa=n(63410);const Ja=()=>({install(e){e.use((0,a.l)()),e.use((0,r.s)()),e.use((0,i.Y)()),e.use((0,s.m)()),e.use((0,o.N)()),e.use((0,d.k)()),e.use((0,c.l)()),e.use((0,u.f)()),e.use((0,l.A)()),e.use((0,y.a)()),e.use((0,m.b)()),e.use(et()),e.use(_a()),e.use((0,qa.W)())}})}}]);
//# sourceMappingURL=6852.2fac00ce.js.map