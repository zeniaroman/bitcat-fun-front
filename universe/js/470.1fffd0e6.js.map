{"version":3,"file":"js/470.1fffd0e6.js","mappings":"+gCA4JA,MAAMA,GAAQC,EAAAA,EAAAA,MACRC,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAETC,GAAQC,EAAAA,EAAAA,IAAI,MACZC,GAAUD,EAAAA,EAAAA,KAAI,GACdE,GAAQF,EAAAA,EAAAA,IAAI,MACZG,GAAkBH,EAAAA,EAAAA,KAAI,GACtBI,GAAaJ,EAAAA,EAAAA,KAAI,GAEjBK,EAAoBC,GACjB,kEAAkEA,QAGrEC,EAAcC,IAClB,MAAMC,EAAO,IAAIC,KAAKF,GACtB,OAAOC,EAAKE,mBAAmB,QAAS,CACtCC,KAAM,UACNC,MAAO,QACPC,IAAK,WACL,EAGEC,EAAWA,KAEfpB,EAAMqB,OAAO,eAAgB,CAC3BC,KAAMlB,EAAMmB,MAAMD,KAClBE,SAAUpB,EAAMmB,MAAMC,SACtBC,YAAarB,EAAMmB,MAAME,YACzBC,OAAQtB,EAAMmB,MAAMG,SAMtB1B,EAAMqB,OAAO,oBAAqB,CAChCC,KAAMlB,EAAMmB,MAAMD,KAClBE,SAAUpB,EAAMmB,MAAMC,SACtBE,OAAQtB,EAAMmB,MAAMG,SAItBC,aAAaC,QAAQ,gBAAiBC,KAAKC,UAAU,CACnDR,KAAMlB,EAAMmB,MAAMD,KAClBE,SAAUpB,EAAMmB,MAAMC,SAEtBE,OAAQtB,EAAMmB,MAAMG,UAItB,IAAIK,EAAcF,KAAKG,MAAML,aAAaM,QAAQ,gBAAkB,MAG/DF,EAAY3B,EAAMmB,MAAMC,YAC3BO,EAAY3B,EAAMmB,MAAMC,UAAY,CAAC,CACnCU,KAAM,QACNC,QAAS/B,EAAMmB,MAAME,YACrBW,WAAW,IAAIrB,MAAOsB,gBAExBV,aAAaC,QAAQ,cAAeC,KAAKC,UAAUC,KAIrD/B,EAAMqB,OAAO,oBAAqB,CAChCC,KAAMlB,EAAMmB,MAAMD,KAClBE,SAAUpB,EAAMmB,MAAMC,SAEtBE,OAAQtB,EAAMmB,MAAMG,SAItB1B,EAAMqB,OAAO,sBAAsB,GACnCrB,EAAMqB,OAAO,eAAe,EAAK,EAG7BiB,EAAcC,UAClB9B,EAAWc,OAAQ,EACnB,UACQiB,EAAAA,EAAMC,KAAK,mBAAoB,CAAEjB,SAAU1B,EAAM4C,OAAOlB,WAE9DtB,EAAOyC,KAAK,aACd,CAAE,MAAOC,GACPrC,EAAMgB,MAAQqB,EAAIC,UAAUC,MAAMvC,OAAS,wBAC7C,CAAE,QACAE,EAAWc,OAAQ,EACnBf,EAAgBe,OAAQ,CAC1B,GAGIwB,EAAaR,UACjBjC,EAAQiB,OAAQ,EAChBhB,EAAMgB,MAAQ,KAEd,IACE,MAAM,KAAEuB,SAAeN,EAAAA,EAAMQ,IAAI,sBAAsBlD,EAAM4C,OAAOlB,YACpEpB,EAAMmB,MAAQuB,CAChB,CAAE,MAAOF,GACPrC,EAAMgB,MAAQqB,EAAIC,UAAUC,MAAMvC,OAAS,2BAC7C,CAAE,QACAD,EAAQiB,OAAQ,CAClB,G,OAIF0B,EAAAA,EAAAA,KAAM,IAAMnD,EAAM4C,OAAOlB,WAAU,KACjCuB,GAAY,KAGdG,EAAAA,EAAAA,KAAU,KACRH,GAAY,I,snKCnQd,MAAMI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://app/./src/pages/AiAgentPage.vue","webpack://app/./src/pages/AiAgentPage.vue?ba21"],"sourcesContent":["<template>\n  <div class=\"agent-page\">\n    <div class=\"container\">\n      <!-- Loading State -->\n      <div v-if=\"loading\" class=\"loading-container\">\n        <div class=\"loading-spinner\"></div>\n        <p>Loading agent data...</p>\n      </div>\n\n      <!-- Error State -->\n      <div v-else-if=\"error\" class=\"error-container\">\n        <i class=\"fas fa-exclamation-circle\"></i>\n        <h3>Error Loading Agent</h3>\n        <p>{{ error }}</p>\n        <router-link to=\"/ai-agents\" class=\"back-button error\">\n          <i class=\"fas fa-arrow-left\"></i> Back to Agents\n        </router-link>\n      </div>\n\n      <!-- if agent main_agent -->\n      <div v-else-if=\"route.params.agentTag === 'main_agent'\" class=\"error-container system-agent\">\n        <i class=\"fas fa-cat\"></i>\n        <h3>BITCAT System AI Agent</h3>\n        <p>This is the main system AI agent. Statistics are not available for system agents.</p>\n        <router-link to=\"/ai-agents\" class=\"back-button error\">\n          <i class=\"fas fa-arrow-left\"></i> Back to Agents\n        </router-link>\n      </div>\n\n      <!-- if agent not found -->\n      <div v-else-if=\"!agent && !loading && !error\" class=\"error-container\">\n        <i class=\"fas fa-robot\"></i>\n        <h3>Agent Not Found</h3>\n        <p>The AI agent you're looking for doesn't exist or has been removed</p>\n        <router-link to=\"/ai-agents\" class=\"back-button error\">\n          <i class=\"fas fa-arrow-left\"></i> Back to Agents\n        </router-link>\n      </div>\n\n      <!-- Agent Data -->\n      <div v-else-if=\"agent\" class=\"agent-container\">\n        <div class=\"header-section\">\n          <router-link to=\"/ai-agents\" class=\"back-button\">\n            <i class=\"fas fa-arrow-left\"></i> Back to Agents\n          </router-link>\n          <h1>AI Agent Profile</h1>\n        </div>\n\n        <div class=\"agent-card\">\n          <div class=\"avatar-section\">\n            <div class=\"avatar-container\">\n              <div class=\"avatar-glow\"></div>\n              <img :src=\"prepareAvatarUrl(agent.avatar)\" :alt=\"agent.name\" class=\"avatar\">\n              <div class=\"status-badge\" :class=\"{ 'online': agent.available }\">\n                {{ agent.available ? 'Online' : 'Offline' }}\n              </div>\n            </div>\n          </div>\n\n          <div class=\"info-section\">\n            <h2 class=\"agent-name\">{{ agent.name }}</h2>\n            <div class=\"tag\">{{ agent.agentTag }}</div>\n            <p class=\"description\">{{ agent.description }}</p>\n\n            <div class=\"stats-grid\">\n              <div class=\"stat-item\">\n                <i class=\"fas fa-user\"></i>\n                <span class=\"label\">Creator</span>\n                <span class=\"value\"><router-link :to=\"`/player/${agent.userTag}`\">{{ agent.userTag }}</router-link></span>\n              </div>\n              <div class=\"stat-item\">\n                <i class=\"fas fa-comments\"></i>\n                <span class=\"label\">Chats with</span>\n                <span class=\"value\">{{ agent.chats}} <small>user(s)</small></span>\n              </div>\n              <div class=\"stat-item\">\n                <i class=\"fas fa-chart-line\"></i>\n                <span class=\"label\">Used</span>\n                <span class=\"value\">{{ agent.used}} <small>time(s)</small></span>\n              </div>\n              <!-- <div class=\"stat-item\">\n                <i class=\"fas fa-image\"></i>\n                <span class=\"label\">Images</span>\n                <span class=\"value\">{{ agent.withImage ? 'Enabled' : 'Disabled' }}</span>\n              </div> -->\n              <div class=\"stat-item\">\n                <i class=\"fas fa-calendar\"></i>\n                <span class=\"label\">Created</span>\n                <span class=\"value\">{{ formatDate(agent.createdAt) }}</span>\n              </div>\n            </div>\n\n            <div class=\"actions\">\n              <button class=\"action-button primary\" @click=\"useAgent\">\n                <i class=\"fas fa-comments\"></i>\n                Chat with Agent\n              </button>\n              <router-link v-if=\"agent.userTag === store.getters.userTag\" class=\"action-button\" :to=\"`/ai-agent/update/${agent.agentTag}`\">\n                <i class=\"fas fa-edit\"></i>\n                Update Agent\n              </router-link>\n              <button \n                v-if=\"agent.userTag === store.getters.userTag\"\n                class=\"action-button\" \n                @click=\"showDeleteModal = true\"\n              >\n                <i class=\"fas fa-trash\"></i>\n                Delete Agent\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Модальное окно для подтверждения удаления -->\n    <Transition name=\"fade\">\n      <div v-if=\"showDeleteModal\" class=\"modal-overlay\">\n        <div class=\"modal-content delete-modal\">\n          <i class=\"fas fa-exclamation-triangle warning-icon\"></i>\n          <h3>Delete AI Agent?</h3>\n          <p>Are you sure you want to delete this AI agent? This action cannot be undone.</p>\n          <ul class=\"delete-consequences\">\n            <li><i class=\"fas fa-times-circle\"></i> Agent will be permanently deleted</li>\n            <li><i class=\"fas fa-times-circle\"></i> All statistics will be lost</li>\n            <li><i class=\"fas fa-times-circle\"></i> All chats will stop working</li>\n          </ul>\n          <div class=\"modal-actions\">\n            <button \n              class=\"delete-button\" \n              :disabled=\"isDeleting\"\n              @click=\"deleteAgent\"\n            >\n              <i class=\"fas fa-trash\"></i>\n              {{ isDeleting ? 'Deleting...' : 'Delete' }}\n            </button>\n            <button \n              class=\"cancel-button\"\n              :disabled=\"isDeleting\"\n              @click=\"showDeleteModal = false\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    </Transition>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport axios from 'axios'\n\nconst route = useRoute()\nconst store = useStore()\nconst router = useRouter()\n\nconst agent = ref(null)\nconst loading = ref(true)\nconst error = ref(null)\nconst showDeleteModal = ref(false)\nconst isDeleting = ref(false)\n\nconst prepareAvatarUrl = (avatarNum) => {\n  return `https://solanabitcat.com/data/ai-agents/bitcat-ai-agent-avatar-${avatarNum}.png`\n}\n\nconst formatDate = (dateString) => {\n  const date = new Date(dateString)\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  })\n}\n\nconst useAgent = () => {\n  // Set current agent and open chat\n  store.commit('SELECT_AGENT', {\n    name: agent.value.name,\n    agentTag: agent.value.agentTag,\n    description: agent.value.description,\n    avatar: agent.value.avatar\n  })\n\n\n\n  // Update agent info in store\n  store.commit('UPDATE_AGENT_INFO', {\n    name: agent.value.name,\n    agentTag: agent.value.agentTag,\n    avatar: agent.value.avatar\n  })\n  \n  // Сохраняем выбранного агента в localStorage\n  localStorage.setItem('selectedAgent', JSON.stringify({\n    name: agent.value.name,\n    agentTag: agent.value.agentTag,\n    // description: props.description,\n    avatar: agent.value.avatar\n  }))\n  \n  // Получаем историю чата для этого агента\n  let chatHistory = JSON.parse(localStorage.getItem('chatHistory') || '{}')\n  \n  // Если нет истории для этого агента, создаем первое сообщение с описанием\n  if (!chatHistory[agent.value.agentTag]) {\n    chatHistory[agent.value.agentTag] = [{\n      type: 'agent',\n      content: agent.value.description,\n      timestamp: new Date().toISOString()\n    }]\n    localStorage.setItem('chatHistory', JSON.stringify(chatHistory))\n  }\n  \n  // Открываем чат с агентом\n  store.commit('SET_CURRENT_AGENT', {\n    name: agent.value.name,\n    agentTag: agent.value.agentTag,\n    // description: props.description,\n    avatar: agent.value.avatar\n  })\n  \n  // Открываем окно чата\n  store.commit('TOGGLE_AGENTS_LIST', false)\n  store.commit('TOGGLE_CHAT', true)\n}\n\nconst deleteAgent = async () => {\n  isDeleting.value = true\n  try {\n    await axios.post('/ai/agent-delete', { agentTag: route.params.agentTag })\n    // Redirect to agents list\n    router.push('/ai-agents')\n  } catch (err) {\n    error.value = err.response?.data?.error || 'Failed to delete agent'\n  } finally {\n    isDeleting.value = false\n    showDeleteModal.value = false\n  }\n}\n\nconst fetchAgent = async () => {\n  loading.value = true\n  error.value = null\n  \n  try {\n    const { data } = await axios.get(`/ai/agent?agentTag=${route.params.agentTag}`)\n    agent.value = data\n  } catch (err) {\n    error.value = err.response?.data?.error || 'Failed to load agent data'\n  } finally {\n    loading.value = false\n  }\n}\n\n// Watch route changes\nwatch(() => route.params.agentTag, () => {\n  fetchAgent()\n})\n\nonMounted(() => {\n  fetchAgent()\n})\n</script>\n\n<style scoped>\n.agent-page {\n  padding: 40px 20px;\n  background: #f8f9fa;\n  background: linear-gradient(to bottom, #e38f00 0%, rgb(215, 77, 36) 400px);\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.header-section {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  flex-wrap: wrap;\n  margin-bottom: 30px;\n}\n\nh1 {\n  font-size: 2.5rem;\n  color: #2c3e50;\n  margin: 0;\n  background: linear-gradient(135deg, #fff, #f1f1f1);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.back-button {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 16px;\n  /* background: white; */\n  /* border: 2px solid #e0e0e0; */\n  border-radius: 12px;\n  color: #fff;\n  text-decoration: none;\n  font-weight: 600;\n  transition: all 0.3s ease;\n}\n\n.back-button.error {\n  color: #000;\n  border: 2px solid #ff5722;\n}\n\n.back-button:hover {\n  transform: translateX(-2px);\n}\n\n.agent-card {\n  background: white;\n  border-radius: 24px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n  display: flex;\n  gap: 40px;\n  padding: 40px;\n}\n\n.avatar-section {\n  flex-shrink: 0;\n}\n\n.avatar-container {\n  position: relative;\n  width: 200px;\n  height: 200px;\n}\n\n.avatar-glow {\n  position: absolute;\n  top: -10px;\n  left: -10px;\n  right: -10px;\n  bottom: -10px;\n  background: radial-gradient(circle at 50% 50%, \n    rgba(255, 152, 0, 0.3),\n    rgba(255, 152, 0, 0) 70%);\n  border-radius: 50%;\n  z-index: 1;\n  animation: pulse 2s infinite;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  object-fit: cover;\n  z-index: 2;\n  position: relative;\n  border: 4px solid #fff;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n}\n\n.status-badge {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background: #e0e0e0;\n  color: #666;\n  padding: 5px 15px;\n  border-radius: 20px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  z-index: 3;\n  transform: translateY(50%);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.status-badge.online {\n  background: #4CAF50;\n  color: white;\n}\n\n.info-section {\n  flex: 1;\n}\n\n.agent-name {\n  font-size: 2rem;\n  color: #2c3e50;\n  margin: 0 0 10px 0;\n}\n\n.tag {\n  display: inline-block;\n  background: #f5f5f5;\n  color: #666;\n  padding: 5px 15px;\n  border-radius: 20px;\n  font-size: 0.875rem;\n  margin-bottom: 20px;\n}\n\n.description {\n  font-size: 1.1rem;\n  color: #666;\n  line-height: 1.6;\n  margin-bottom: 30px;\n}\n\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n}\n\n.stat-item {\n  background: #f8f9fa;\n  padding: 20px;\n  border-radius: 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  transition: transform 0.3s ease;\n}\n\n.stat-item:hover {\n  transform: translateY(-2px);\n}\n\n.stat-item i {\n  font-size: 1.5rem;\n  color: #ff9800;\n  margin-bottom: 10px;\n}\n\n.stat-item .label {\n  color: #666;\n  font-size: 0.875rem;\n  margin-bottom: 5px;\n}\n\n.stat-item .value {\n  color: #2c3e50;\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n\n.stat-item .value a {\n  color: #ff9800;\n}\n\n.actions {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  margin-top: 30px;\n}\n\n.action-button {\n  padding: 12px 24px;\n  border-radius: 12px;\n  font-weight: 600;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border: none;\n  color: #000;\n  background: rgba(239, 239, 239, 1);\n  text-decoration: none;\n}\n.action-button:hover {\n\n  transform: translateY(-1px);\n  box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);\n}\n\n.action-button.primary {\n  background: linear-gradient(135deg, #ff9800, #ff5722);\n  color: white;\n}\n\n.action-button.primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(255, 152, 0, 0.5);\n}\n\n.action-button.primary:disabled {\n  background: #e0e0e0;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n.action-button.delete {\n  background: #ff5722;\n  color: white;\n}\n\n.loading-container,\n.error-container {\n  text-align: center;\n  padding: 60px 20px;\n  background: white;\n  border-radius: 24px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n}\n\n.loading-spinner {\n  width: 50px;\n  height: 50px;\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #ff9800;\n  border-radius: 50%;\n  margin: 0 auto 20px;\n  animation: spin 1s linear infinite;\n}\n\n.error-container i {\n  font-size: 3rem;\n  color: #ff5722;\n  margin-bottom: 20px;\n}\n\n.error-container a {\n  margin-top: 10px;\n}\n\n.error-container a i {\n  font-size: 1rem;\n  color: #ff5722;\n  margin-bottom: 0px;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: #fff;\n  padding: 30px;\n  border-radius: 12px;\n  max-width: 400px;\n  width: 90%;\n  text-align: center;\n}\n\n.delete-modal h3 {\n  margin: 15px 0;\n  color: var(--text-color);\n  font-size: 1.5rem;\n}\n\n.delete-modal p {\n  color: var(--text-secondary);\n  margin-bottom: 20px;\n  line-height: 1.5;\n}\n\n.warning-icon {\n  font-size: 3em;\n  color: #ff5722;\n}\n\n.delete-consequences {\n  list-style: none;\n  padding: 0;\n  margin: 0 0 25px;\n  text-align: left;\n}\n\n.delete-consequences li {\n  margin: 10px 0;\n  color: var(--text-color);\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.delete-consequences li i {\n  color: #ff5722;\n}\n\n.modal-actions {\n  display: flex;\n  gap: 10px;\n  justify-content: center;\n}\n\n.delete-button,\n.cancel-button {\n  padding: 8px 20px;\n  border: none;\n  border-radius: 8px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: opacity 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.delete-button {\n  background: #ff5722;\n  color: white;\n}\n\n.cancel-button {\n  background: rgba(239, 239, 239, 1);\n  color: #000;\n}\n\n.delete-button:hover,\n.cancel-button:hover {\n  opacity: 0.9;\n}\n\n.delete-button:disabled,\n.cancel-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n/* Анимации */\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n@keyframes pulse {\n  0% {\n    transform: scale(1);\n    opacity: 0.6;\n  }\n  50% {\n    transform: scale(1.05);\n    opacity: 0.8;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 0.6;\n  }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n@media (max-width: 768px) {\n  .agent-card {\n    flex-direction: column;\n    padding: 20px;\n    gap: 20px;\n  }\n\n  .avatar-container {\n    width: 150px;\n    height: 150px;\n    margin: 0 auto;\n  }\n\n  .stats-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n</style>\n","import script from \"./AiAgentPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AiAgentPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AiAgentPage.vue?vue&type=style&index=0&id=408948d2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-408948d2\"]])\n\nexport default __exports__"],"names":["route","useRoute","store","useStore","router","useRouter","agent","ref","loading","error","showDeleteModal","isDeleting","prepareAvatarUrl","avatarNum","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","useAgent","commit","name","value","agentTag","description","avatar","localStorage","setItem","JSON","stringify","chatHistory","parse","getItem","type","content","timestamp","toISOString","deleteAgent","async","axios","post","params","push","err","response","data","fetchAgent","get","watch","onMounted","__exports__"],"sourceRoot":""}