import{r as w}from"./crypto-DYaHgGqH.js";import{r as m}from"./keystores-DZ_AKmgs.js";var y={},s={},g;function b(){if(g)return s;g=1;var o=s&&s.__awaiter||function(h,e,t,r){function a(n){return n instanceof t?n:new t(function(c){c(n)})}return new(t||(t=Promise))(function(n,c){function p(i){try{l(r.next(i))}catch(f){c(f)}}function K(i){try{l(r.throw(i))}catch(f){c(f)}}function l(i){i.done?n(i.value):a(i.value).then(p,K)}l((r=r.apply(h,e||[])).next())})};Object.defineProperty(s,"__esModule",{value:!0}),s.BrowserLocalStorageKeyStore=void 0;const u=w(),_=m(),S="near-api-js:keystore:";class v extends _.KeyStore{constructor(e=window.localStorage,t=S){super(),this.localStorage=e,this.prefix=t}setKey(e,t,r){return o(this,void 0,void 0,function*(){this.localStorage.setItem(this.storageKeyForSecretKey(e,t),r.toString())})}getKey(e,t){return o(this,void 0,void 0,function*(){const r=this.localStorage.getItem(this.storageKeyForSecretKey(e,t));return r?u.KeyPair.fromString(r):null})}removeKey(e,t){return o(this,void 0,void 0,function*(){this.localStorage.removeItem(this.storageKeyForSecretKey(e,t))})}clear(){return o(this,void 0,void 0,function*(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)})}getNetworks(){return o(this,void 0,void 0,function*(){const e=new Set;for(const t of this.storageKeys())if(t.startsWith(this.prefix)){const r=t.substring(this.prefix.length).split(":");e.add(r[1])}return Array.from(e.values())})}getAccounts(e){return o(this,void 0,void 0,function*(){const t=new Array;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const a=r.substring(this.prefix.length).split(":");a[1]===e&&t.push(a[0])}return t})}storageKeyForSecretKey(e,t){return`${this.prefix}${t}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}return s.BrowserLocalStorageKeyStore=v,s}var d;function L(){return d||(d=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.BrowserLocalStorageKeyStore=void 0;var u=b();Object.defineProperty(o,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return u.BrowserLocalStorageKeyStore}})}(y)),y}var B=L();export{B as l};
