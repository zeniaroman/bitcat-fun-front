import{b as he}from"../vendor-buffer-DVXvU5G6.js";import{r as z}from"../vendor-borsh-uT6VLZDJ.js";import{r as be}from"../vendor-tweetnacl-DH0kfJ7g.js";import{r as we}from"../vendor-js-sha256-J9Bkl3or.js";var m={},D={},l={},S={},O={},Q;function me(){if(Q)return O;Q=1,Object.defineProperty(O,"__esModule",{value:!0}),O.Assignable=void 0;class e{constructor(c){Object.keys(c).map(a=>{this[a]=c[a]})}}return O.Assignable=e,O}var p={},W;function De(){if(W)return p;W=1,Object.defineProperty(p,"__esModule",{value:!0}),p.ErrorContext=p.TypedError=p.ArgumentTypeError=p.PositionalArgsError=void 0;class e extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}p.PositionalArgsError=e;class t extends Error{constructor(r,i,s){super(`Expected ${i} for '${r}' argument, but got '${JSON.stringify(s)}'`)}}p.ArgumentTypeError=t;class c extends Error{constructor(r,i,s){super(r),this.type=i||"UntypedError",this.context=s}}p.TypedError=c;class a{constructor(r){this.transactionHash=r}}return p.ErrorContext=a,p}var $={},U={},X;function Se(){return X||(X=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.IdType=void 0,function(t){t.Transaction="transaction",t.Receipt="receipt"}(e.IdType||(e.IdType={}))}(U)),U}var L={},Y;function Ee(){return Y||(Y=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=void 0,function(t){t.Unknown="Unknown",t.Pending="Pending",t.Failure="Failure"}(e.ExecutionStatusBasic||(e.ExecutionStatusBasic={})),function(t){t.NotStarted="NotStarted",t.Started="Started",t.Failure="Failure"}(e.FinalExecutionStatusBasic||(e.FinalExecutionStatusBasic={}))}(L)),L}var Z;function Te(){return Z||(Z=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=e.IdType=void 0;var t=Se();Object.defineProperty(e,"IdType",{enumerable:!0,get:function(){return t.IdType}});var c=Ee();Object.defineProperty(e,"ExecutionStatusBasic",{enumerable:!0,get:function(){return c.ExecutionStatusBasic}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return c.FinalExecutionStatusBasic}})}($)),$}var ee;function C(){return ee||(ee=1,function(e){var t=S&&S.__createBinding||(Object.create?function(a,n,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(n,r);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(a,i,s)}:function(a,n,r,i){i===void 0&&(i=r),a[i]=n[r]}),c=S&&S.__exportStar||function(a,n){for(var r in a)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,a,r)};Object.defineProperty(e,"__esModule",{value:!0}),c(me(),e),c(De(),e),c(Te(),e)}(S)),S}var ne;function B(){if(ne)return l;ne=1,Object.defineProperty(l,"__esModule",{value:!0}),l.Action=l.SignedDelegate=l.DeleteAccount=l.DeleteKey=l.AddKey=l.Stake=l.Transfer=l.FunctionCall=l.DeployContract=l.CreateAccount=l.IAction=l.AccessKey=l.AccessKeyPermission=l.FullAccessPermission=l.FunctionCallPermission=void 0;const e=C();class t{constructor(K){if(Object.keys(K).length!==1)throw new Error("Enum can only take single value");Object.keys(K).map(h=>{this[h]=K[h],this.enum=h})}}class c extends e.Assignable{}l.FunctionCallPermission=c;class a extends e.Assignable{}l.FullAccessPermission=a;class n extends t{}l.AccessKeyPermission=n;class r extends e.Assignable{}l.AccessKey=r;class i extends e.Assignable{}l.IAction=i;class s extends i{}l.CreateAccount=s;class d extends i{}l.DeployContract=d;class _ extends i{}l.FunctionCall=_;class o extends i{}l.Transfer=o;class v extends i{}l.Stake=v;class b extends i{}l.AddKey=b;class u extends i{}l.DeleteKey=u;class y extends i{}l.DeleteAccount=y;class f extends i{}l.SignedDelegate=f;class A extends t{}return l.Action=A,l}var te;function ke(){if(te)return D;te=1,Object.defineProperty(D,"__esModule",{value:!0}),D.actionCreators=D.stringifyJsonOrBytes=void 0;const e=B();function t(){return new e.AccessKey({permission:new e.AccessKeyPermission({fullAccess:new e.FullAccessPermission({})})})}function c(u,y,f){return new e.AccessKey({permission:new e.AccessKeyPermission({functionCall:new e.FunctionCallPermission({receiverId:u,allowance:f,methodNames:y})})})}function a(){return new e.Action({createAccount:new e.CreateAccount({})})}function n(u){return new e.Action({deployContract:new e.DeployContract({code:u})})}function r(u){return u.byteLength!==void 0&&u.byteLength===u.length?u:he.Buffer.from(JSON.stringify(u))}D.stringifyJsonOrBytes=r;function i(u,y,f,A,g=r,K=!1){return K?new e.Action({functionCall:new e.FunctionCall({methodName:u,args:y,gas:f,deposit:A})}):new e.Action({functionCall:new e.FunctionCall({methodName:u,args:g(y),gas:f,deposit:A})})}function s(u){return new e.Action({transfer:new e.Transfer({deposit:u})})}function d(u,y){return new e.Action({stake:new e.Stake({stake:u,publicKey:y})})}function _(u,y){return new e.Action({addKey:new e.AddKey({publicKey:u,accessKey:y})})}function o(u){return new e.Action({deleteKey:new e.DeleteKey({publicKey:u})})}function v(u){return new e.Action({deleteAccount:new e.DeleteAccount({beneficiaryId:u})})}function b({delegateAction:u,signature:y}){return new e.Action({signedDelegate:new e.SignedDelegate({delegateAction:u,signature:y})})}return D.actionCreators={addKey:_,createAccount:a,deleteAccount:v,deleteKey:o,deployContract:n,fullAccessKey:t,functionCall:i,functionCallAccessKey:c,signedDelegate:b,stake:d,transfer:s},D}var q={},H={},N={},x={},re;function J(){return re||(re=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.KeyType=void 0,function(t){t[t.ED25519=0]="ED25519"}(e.KeyType||(e.KeyType={}))}(x)),x}var j={},M={},ie;function Ae(){if(ie)return M;ie=1,Object.defineProperty(M,"__esModule",{value:!0}),M.KeyPairBase=void 0;class e{}return M.KeyPairBase=e,M}var E={},T={},ce;function ve(){if(ce)return T;ce=1;var e=T&&T.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(T,"__esModule",{value:!0}),T.PublicKey=void 0;const t=C(),c=z(),a=e(be()),n=J();function r(d){switch(d){case n.KeyType.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${d}`)}}function i(d){switch(d.toLowerCase()){case"ed25519":return n.KeyType.ED25519;default:throw new Error(`Unknown key type ${d}`)}}class s extends t.Assignable{static from(_){return typeof _=="string"?s.fromString(_):_}static fromString(_){const o=_.split(":");if(o.length===1)return new s({keyType:n.KeyType.ED25519,data:(0,c.baseDecode)(o[0])});if(o.length===2)return new s({keyType:i(o[0]),data:(0,c.baseDecode)(o[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${r(this.keyType)}:${(0,c.baseEncode)(this.data)}`}verify(_,o){switch(this.keyType){case n.KeyType.ED25519:return a.default.sign.detached.verify(_,o,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}return T.PublicKey=s,T}var ae;function pe(){if(ae)return E;ae=1;var e=E&&E.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(E,"__esModule",{value:!0}),E.KeyPairEd25519=void 0;const t=z(),c=e(be()),a=J(),n=Ae(),r=ve();class i extends n.KeyPairBase{constructor(d){super();const _=c.default.sign.keyPair.fromSecretKey((0,t.baseDecode)(d));this.publicKey=new r.PublicKey({keyType:a.KeyType.ED25519,data:_.publicKey}),this.secretKey=d}static fromRandom(){const d=c.default.sign.keyPair();return new i((0,t.baseEncode)(d.secretKey))}sign(d){return{signature:c.default.sign.detached(d,(0,t.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(d,_){return this.publicKey.verify(d,_)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}return E.KeyPairEd25519=i,E}var se;function Ce(){if(se)return j;se=1,Object.defineProperty(j,"__esModule",{value:!0}),j.KeyPair=void 0;const e=Ae(),t=pe();class c extends e.KeyPairBase{static fromRandom(n){switch(n.toUpperCase()){case"ED25519":return t.KeyPairEd25519.fromRandom();default:throw new Error(`Unknown curve ${n}`)}}static fromString(n){const r=n.split(":");if(r.length===1)return new t.KeyPairEd25519(r[0]);if(r.length===2)switch(r[0].toUpperCase()){case"ED25519":return new t.KeyPairEd25519(r[1]);default:throw new Error(`Unknown curve: ${r[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}return j.KeyPair=c,j}var ue;function Oe(){return ue||(ue=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PublicKey=e.KeyPairEd25519=e.KeyPair=e.KeyType=void 0;var t=J();Object.defineProperty(e,"KeyType",{enumerable:!0,get:function(){return t.KeyType}});var c=Ce();Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return c.KeyPair}});var a=pe();Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return a.KeyPairEd25519}});var n=ve();Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})}(N)),N}var k={},oe;function Pe(){if(oe)return k;oe=1,Object.defineProperty(k,"__esModule",{value:!0}),k.buildDelegateAction=k.DelegateAction=void 0;const e=C();class t extends e.Assignable{}k.DelegateAction=t;function c({actions:a,maxBlockHeight:n,nonce:r,publicKey:i,receiverId:s,senderId:d}){return new t({senderId:d,receiverId:s,actions:a,nonce:r,maxBlockHeight:n,publicKey:i})}return k.buildDelegateAction=c,k}var F={},le;function qe(){if(le)return F;le=1,Object.defineProperty(F,"__esModule",{value:!0}),F.DelegateActionPrefix=void 0;const e=C(),t=Math.pow(2,30),c={MetaTransactions:366};class a extends e.Assignable{}class n extends a{constructor(s){super({prefix:t+s})}}class r extends n{constructor(){super(c.MetaTransactions)}}return F.DelegateActionPrefix=r,F}var R={},de;function V(){if(de)return R;de=1,Object.defineProperty(R,"__esModule",{value:!0}),R.Signature=void 0;const e=C();class t extends e.Assignable{}return R.Signature=t,R}var fe;function G(){return fe||(fe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SCHEMA=e.SignedTransaction=e.Transaction=e.decodeSignedTransaction=e.decodeTransaction=e.encodeTransaction=e.encodeSignedDelegate=e.encodeDelegateAction=void 0;const t=Oe(),c=C(),a=z(),n=B(),r=Pe(),i=qe(),s=V();function d(f){return new Uint8Array([...(0,a.serialize)(e.SCHEMA,new i.DelegateActionPrefix),...(0,a.serialize)(e.SCHEMA,f)])}e.encodeDelegateAction=d;function _(f){return(0,a.serialize)(e.SCHEMA,f)}e.encodeSignedDelegate=_;function o(f){return(0,a.serialize)(e.SCHEMA,f)}e.encodeTransaction=o;function v(f){return(0,a.deserialize)(e.SCHEMA,u,f)}e.decodeTransaction=v;function b(f){return(0,a.deserialize)(e.SCHEMA,y,f)}e.decodeSignedTransaction=b;class u extends c.Assignable{encode(){return o(this)}static decode(A){return v(A)}}e.Transaction=u;class y extends c.Assignable{encode(){return o(this)}static decode(A){return b(A)}}e.SignedTransaction=y,e.SCHEMA=new Map([[s.Signature,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[y,{kind:"struct",fields:[["transaction",u],["signature",s.Signature]]}],[u,{kind:"struct",fields:[["signerId","string"],["publicKey",t.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[n.Action]]]}],[t.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[n.AccessKey,{kind:"struct",fields:[["nonce","u64"],["permission",n.AccessKeyPermission]]}],[n.AccessKeyPermission,{kind:"enum",field:"enum",values:[["functionCall",n.FunctionCallPermission],["fullAccess",n.FullAccessPermission]]}],[n.FunctionCallPermission,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[n.FullAccessPermission,{kind:"struct",fields:[]}],[n.Action,{kind:"enum",field:"enum",values:[["createAccount",n.CreateAccount],["deployContract",n.DeployContract],["functionCall",n.FunctionCall],["transfer",n.Transfer],["stake",n.Stake],["addKey",n.AddKey],["deleteKey",n.DeleteKey],["deleteAccount",n.DeleteAccount],["signedDelegate",n.SignedDelegate]]}],[n.CreateAccount,{kind:"struct",fields:[]}],[n.DeployContract,{kind:"struct",fields:[["code",["u8"]]]}],[n.FunctionCall,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[n.Transfer,{kind:"struct",fields:[["deposit","u128"]]}],[n.Stake,{kind:"struct",fields:[["stake","u128"],["publicKey",t.PublicKey]]}],[n.AddKey,{kind:"struct",fields:[["publicKey",t.PublicKey],["accessKey",n.AccessKey]]}],[n.DeleteKey,{kind:"struct",fields:[["publicKey",t.PublicKey]]}],[n.DeleteAccount,{kind:"struct",fields:[["beneficiaryId","string"]]}],[r.DelegateAction,{kind:"struct",fields:[["senderId","string"],["receiverId","string"],["actions",[n.Action]],["nonce","u64"],["maxBlockHeight","u64"],["publicKey",t.PublicKey]]}],[i.DelegateActionPrefix,{kind:"struct",fields:[["prefix","u32"]]}],[n.SignedDelegate,{kind:"struct",fields:[["delegateAction",r.DelegateAction],["signature",s.Signature]]}]])}(H)),H}var ye;function Ke(){if(ye)return q;ye=1,Object.defineProperty(q,"__esModule",{value:!0}),q.createTransaction=void 0;const e=G();function t(c,a,n,r,i,s){return new e.Transaction({signerId:c,publicKey:a,nonce:r,receiverId:n,actions:i,blockHash:s})}return q.createTransaction=t,q}var P={},ge;function je(){if(ge)return P;ge=1;var e=P&&P.__awaiter||function(o,v,b,u){function y(f){return f instanceof b?f:new b(function(A){A(f)})}return new(b||(b=Promise))(function(f,A){function g(w){try{h(u.next(w))}catch(I){A(I)}}function K(w){try{h(u.throw(w))}catch(I){A(I)}}function h(w){w.done?f(w.value):y(w.value).then(g,K)}h((u=u.apply(o,v||[])).next())})},t=P&&P.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(P,"__esModule",{value:!0}),P.signDelegateAction=P.signTransaction=void 0;const c=t(we()),a=B(),n=Ke(),r=G(),i=V();function s(o,v,b,u){return e(this,void 0,void 0,function*(){const y=(0,r.encodeTransaction)(o),f=new Uint8Array(c.default.sha256.array(y)),A=yield v.signMessage(y,b,u),g=new r.SignedTransaction({transaction:o,signature:new i.Signature({keyType:o.publicKey.keyType,data:A.signature})});return[f,g]})}function d(...o){return e(this,void 0,void 0,function*(){if(o[0].constructor===r.Transaction){const[v,b,u,y]=o;return s(v,b,u,y)}else{const[v,b,u,y,f,A,g]=o,K=yield f.getPublicKey(A,g),h=(0,n.createTransaction)(A,K,v,b,u,y);return s(h,f,A,g)}})}P.signTransaction=d;function _({delegateAction:o,signer:v}){return e(this,void 0,void 0,function*(){const b=(0,r.encodeDelegateAction)(o),u=yield v.sign(b),y=new a.SignedDelegate({delegateAction:o,signature:new i.Signature({keyType:o.publicKey.keyType,data:u})});return{hash:new Uint8Array(c.default.sha256.array(b)),signedDelegateAction:y}})}return P.signDelegateAction=_,P}var _e;function Me(){return _e||(_e=1,function(e){var t=m&&m.__createBinding||(Object.create?function(a,n,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(n,r);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(a,i,s)}:function(a,n,r,i){i===void 0&&(i=r),a[i]=n[r]}),c=m&&m.__exportStar||function(a,n){for(var r in a)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,a,r)};Object.defineProperty(e,"__esModule",{value:!0}),c(ke(),e),c(B(),e),c(Ke(),e),c(Pe(),e),c(G(),e),c(je(),e),c(V(),e)}(m)),m}var $e=Me();export{$e as l};
