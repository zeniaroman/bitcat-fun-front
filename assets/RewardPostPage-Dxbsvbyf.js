import{u as J}from"./vendor-vuex-KmQPsw4D.js";import{u as O}from"./vendor-vue-router-PmQVL-xb.js";import{a as $}from"./vendor-axios-Hz4xvOoZ.js";import{A as Y}from"./Toast-CHOcTYnn.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as n,E as G,J as H,h as i,j as D,i as e,e as M,k as u,b as K,m as p,F as Q,r as W,o}from"./vendor-vue/runtime-core-CL52-QWR.js";import{r as c}from"./vendor-vue/reactivity-CqT5sv9X.js";import{t as d,b as V,a as P}from"./vendor-vue/shared-lLteBOIO.js";import"./vendor-vue/devtools-api-Cow_pXkh.js";import"./vendor-process-DXjpGiAn.js";import"./solana-vendors-DGPAp7Fj.js";import"./vendor-buffer-DVXvU5G6.js";import"./vendor-base64-js-C2zTC7ec.js";import"./vendor-ieee754-vIlwft-x.js";import"./vendor-events-cQ9mhZQJ.js";import"./vendor-lodash.isequal-D20p4pc-.js";import"./vendor-elliptic-BTxzAQL_.js";import"./vendor-minimalistic-assert-OF9c2MWr.js";import"./vendor-minimalistic-crypto-utils-DpWPKLSp.js";import"./vendor-brorand-6pV8Y5jC.js";import"./vendor-crypto-browserify-NMg_40A5.js";import"./vendor-randombytes-ndKo2FAH.js";import"./vendor-safe-buffer-BPihLaHX.js";import"./vendor-create-hash-BsmGkCgx.js";import"./vendor-inherits-BICa84dG.js";import"./vendor-md5.js-BmCTTIue.js";import"./vendor-hash-base-CXljNKss.js";import"./vendor-readable-stream-BpYOL4VF.js";import"./vendor-asn1.js-Cgb4HcA4.js";import"./vendor-util-deprecate-C5bwERXh.js";import"./vendor-string_decoder-CzqD1_ea.js";import"./vendor-ripemd160-B-g9_ZaO.js";import"./vendor-sha.js-C_Iv65sP.js";import"./vendor-cipher-base-CVoreX1z.js";import"./vendor-stream-browserify-BiXhMpOM.js";import"./vendor-create-hmac-Dt8PQ7js.js";import"./vendor-browserify-sign-DLX2f2Lw.js";import"./vendor-process-nextick-args-DZA8cFXf.js";import"./vendor-core-util-is-OG-hh3cz.js";import"./vendor-browserify-rsa-DRghgnJS.js";import"./vendor-bn.js-CN51n21Z.js";import"./vendor-parse-asn1-CnRUGrVC.js";import"./vendor-evp_bytestokey-V5JLH1pP.js";import"./vendor-browserify-aes-Dzp1Wr7h.js";import"./vendor-buffer-xor-BGVZWPAd.js";import"./vendor-pbkdf2-D8c51p7I.js";import"./vendor-browserify-cipher-CRpPeA_V.js";import"./vendor-browserify-des-7ZFmx5Md.js";import"./vendor-des.js-DyWMuwdI.js";import"./vendor-diffie-hellman-CdruneMD.js";import"./vendor-miller-rabin-D60nYGZr.js";import"./vendor-create-ecdh-D3sJE6Oq.js";import"./vendor-public-encrypt-BRl7BMPZ.js";import"./vendor-randomfill-PyDjCq6P.js";import"./vendor-hash.js-Dda3EUYz.js";import"./vendor-hmac-drbg-Ss9liF53.js";import"./vendor-vue/runtime-dom-Ll8vq9eS.js";import"./vendor-vueuse/core-Dowf-keF.js";import"./vendor-vueuse/shared-D4hqHlE2.js";import"./vendor-eventemitter3-C1FPriCL.js";import"./vendor-bignumber.js-Dj_rIxHg.js";import"./vendor-bigint-buffer-5mUCZ2jv.js";import"./vendor-noble/ed25519-DHS8bCE8.js";import"./vendor-node-fetch-DFwHyKwz.js";import"./vendor-url-Fv_L5Bhg.js";import"./vendor-qs-CKXrMD_V.js";import"./vendor-side-channel-CjkecZmv.js";import"./vendor-es-errors-CxTyLFAO.js";import"./vendor-object-inspect-C0kqJKki.js";import"./vendor-side-channel-list-DJbPV7dX.js";import"./vendor-side-channel-map-OCAkmCSB.js";import"./vendor-get-intrinsic-Ci-jyTpD.js";import"./vendor-es-object-atoms-BR76m4z7.js";import"./vendor-math-intrinsics-DP1tGiab.js";import"./vendor-gopd-C1lCZ5Qs.js";import"./vendor-es-define-property-D_7cP-M3.js";import"./vendor-has-symbols-CySAGvJ4.js";import"./vendor-get-proto-BI0zWv-p.js";import"./vendor-dunder-proto-5sdYuMkY.js";import"./vendor-call-bind-apply-helpers-BfAPCzjd.js";import"./vendor-function-bind-CHqF18-c.js";import"./vendor-hasown-CH2RbkDu.js";import"./vendor-call-bound-nPIHF2bX.js";import"./vendor-side-channel-weakmap-D938crsm.js";import"./vendor-whatwg-url-BNoC3hI6.js";import"./vendor-webidl-conversions-DuBT_cRJ.js";import"./vendor-punycode-BGZJxaHx.js";import"./vendor-tr46-_6nBz5KS.js";import"./vendor-mime-DOJa-gVj.js";import"./vendor-assert-CCtLV3vt.js";import"./vendor-util-BEO2nGWh.js";import"./vendor-is-arguments-D-oLGwWh.js";import"./vendor-has-tostringtag-BU9GnA_1.js";import"./vendor-is-generator-function-Bk_W3rfd.js";import"./vendor-safe-regex-test-BtqTbUmV.js";import"./vendor-is-regex-BKTFpgjH.js";import"./vendor-which-typed-array-Bufg-IXZ.js";import"./vendor-for-each-HvIZAWYy.js";import"./vendor-is-callable-BYFz_UGF.js";import"./vendor-available-typed-arrays-uQGnJldC.js";import"./vendor-possible-typed-array-names-BKRybAhF.js";import"./vendor-call-bind-3YpglFCb.js";import"./vendor-set-function-length-Cm7PFPrZ.js";import"./vendor-define-data-property-BppnLwnj.js";import"./vendor-has-property-descriptors-ChC8uhsk.js";import"./vendor-is-typed-array-CZaxorcA.js";import"./vendor-object.assign-D0NKsUk4.js";import"./vendor-object-keys-BRu_Tray.js";import"./vendor-object-is-DkNyiNMZ.js";import"./vendor-define-properties-CgTwYkbs.js";import"./vendor-is-nan-BtAA6g8u.js";import"./vendor-debug-DLVl9QA3.js";import"./vendor-ms-CzQ2E3wO.js";import"./vendor-babel/runtime-w7AU6ifp.js";import"./vendor-js-sha3-DkKfOMXT.js";import"./vendor-typescript-collections-DaJ0MJpz.js";import"./vendor-lodash.clonedeep-C3jeG2fR.js";import"./vendor-ansicolors-BFAL4nhq.js";import"./vendor-bs58-DhqqakFZ.js";import"./vendor-base-x-BHV1Xppf.js";import"./vendor-base64url-D1J1q9RC.js";import"./vendor-arbundles-CR3XhIxB.js";import"./vendor-async-retry-DWdC6xTk.js";import"./vendor-retry-ByBYrtbW.js";import"./vendor-irys/arweave-CO_npObX.js";import"./vendor-safer-buffer-CIAg7E_-.js";import"./vendor-secp256k1-gx_3s_gH.js";import"./vendor-keccak-Bl_8Z6TM.js";import"./vendor-ethersproject/bytes-BFUO92dS.js";import"./vendor-ethersproject/logger-BIOSViGG.js";import"./vendor-ethersproject/wallet-_-D8aoNy.js";import"./vendor-ethersproject/address-C-94Rlzo.js";import"./vendor-ethersproject/keccak256-BpI13PIi.js";import"./vendor-ethersproject/rlp-L8r_OHwd.js";import"./vendor-ethersproject/bignumber-DuyZ-PBD.js";import"./vendor-ethersproject/abstract-provider-BJATZ19F.js";import"./vendor-ethersproject/properties-Bism-GXA.js";import"./vendor-ethersproject/abstract-signer-vaofOY7d.js";import"./vendor-ethersproject/strings-BqJBhWqj.js";import"./vendor-ethersproject/hdnode-De1GriMn.js";import"./vendor-ethersproject/basex-GbQJAx3e.js";import"./vendor-ethersproject/signing-key-DZY4IiDE.js";import"./vendor-ethersproject/sha2-C3DRumhS.js";import"./vendor-ethersproject/wordlists-Bgp1_tq6.js";import"./vendor-ethersproject/pbkdf2-RF0eycJB.js";import"./vendor-ethersproject/json-wallets-DmRppK22.js";import"./vendor-aes-js-CVO7b-af.js";import"./vendor-scrypt-js-pU08l4Iy.js";import"./vendor-ethersproject/random-UwHXQyRf.js";import"./vendor-ethersproject/hash-CaQkUgof.js";import"./vendor-ethersproject/transactions-DgEmUiir.js";import"./vendor-irys/sdk-zMcAFY0m.js";import"./vendor-irys/query-BJ-9co3k.js";import"./vendor-near-js/crypto-DYaHgGqH.js";import"./vendor-borsh-uT6VLZDJ.js";import"./vendor-text-encoding-utf-8-CyyJ4wbt.js";import"./vendor-tweetnacl-DH0kfJ7g.js";import"./vendor-crypto-js-TDtrdbi3.js";import"./vendor-near-js/types-BW5UzBhQ.js";import"./vendor-near-js/keystores-browser-C7Ipq7jt.js";import"./vendor-near-js/keystores-DZ_AKmgs.js";import"./vendor-near-js/transactions-CNW8gb_X.js";import"./vendor-js-sha256-J9Bkl3or.js";import"./vendor-ethersproject/contracts-BfB5cMkz.js";import"./vendor-ethersproject/abi-BZPj2eRn.js";import"./vendor-ethersproject/constants-DnPC-4nq.js";import"./vendor-aptos-COdaePwy.js";import"./vendor-scure/base-BmqIkRj2.js";import"./vendor-supercharge/promise-pool-CxlJr3BL.js";import"./vendor-noble/curves-Bi3lEKLw.js";import"./vendor-noble/hashes-DJrKYuPd.js";import"./vendor-jayson-C-feTq4c.js";import"./vendor-uuid-42xqzRtG.js";import"./vendor-rpc-websockets-CS_NMCMZ.js";const X={class:"reward-post-page"},Z={class:"reward-post-page-wrap"},tt={class:"page-header"},et={key:0,class:"post-container"},st={class:"post-card"},ot={class:"post-header"},rt={class:"post-author"},it={key:1,class:"system-badge"},at={class:"post-status"},pt={key:0,class:"status-badge rejected"},lt={key:1,class:"status-badge inactive"},nt={key:2,class:"status-badge active"},mt={class:"post-date"},ut={key:0},dt={key:1},vt={class:"post-content"},ct={class:"tweet-embed"},ft=["href"],wt={key:1,class:"blocked-tweet"},gt={key:2,class:"tweet-stats"},ht={class:"stat-item"},yt={class:"stat-item"},kt={key:3,class:"tweet-stats tweet-stats-with-text"},_t={key:4,class:"tweet-stats tweet-stats-with-text"},Tt={class:"reward-info"},bt={key:0},jt={key:0,class:"voting-section"},Rt={key:0,class:"voting-closed"},At={key:0,class:"vote-actions"},xt={key:1,class:"approval-stats"},It={key:2,class:"voting-ended"},Ct={key:2,class:"voting-results"},$t={class:"approval-bar"},Dt={class:"approval-stats"},Mt={class:"approval-text"},Vt={class:"approval-count"},Pt={class:"rejection-count"},Et={key:1,class:"loading-container"},Bt={__name:"RewardPostPage",setup(Lt){const h=J(),E=O(),B=n(()=>h.getters.isAuthenticated),v=n(()=>{var r;return(r=h.state.user)==null?void 0:r.userTag}),s=c(null),y=c(!0),w=c(!1),k=c(""),_=c("info"),T=async()=>{try{y.value=!0;const r=E.params.tweetId,t=await $.get(`/rewards/post/${r}`);t.data.success&&(s.value=t.data.post,R())}catch(r){console.error("Error fetching post:",r)}finally{y.value=!1}};n(()=>!v.value||!s.value?!1:s.value.usersApproved.includes(v.value)||s.value.usersRejected.includes(v.value));const L=n(()=>!v.value||!s.value?!1:s.value.usersApproved.includes(v.value)),S=n(()=>!v.value||!s.value?!1:s.value.usersRejected.includes(v.value)),m=n(()=>{if(!s.value||!s.value.endedTime||s.value.checkTime)return!1;const r=new Date;return new Date(s.value.endedTime)>r&&!s.value.checkTime}),b=n(()=>!m.value),N=n(()=>{if(!s.value)return 50;const r=s.value.usersApproved.length,t=s.value.usersRejected.length,a=r+t;return a===0?50:Math.round(r/a*100)}),z=n(()=>{if(!s.value)return 50;const r=s.value.usersApproved.length,t=s.value.usersRejected.length,a=r+t;return a===0?50:Math.round(t/a*100)}),j=c(0),f=c(""),R=()=>{if(!s.value||!s.value.endedTime){f.value="Loading...";return}if(!m.value){f.value="Inactive";return}const r=new Date,a=new Date(s.value.endedTime)-r;if(a<=0){j.value=0,f.value="Ended";return}const l=Math.floor(a/6e4),I=Math.floor(l/60),C=l%60;j.value=l,I>0?f.value=`${I}h ${C}m left`:f.value=`${C}m left`},F=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=(r,t="info")=>{k.value=r,_.value=t,w.value=!0},U=()=>{w.value=!1},x=async r=>{var t,a;if(s.value)try{const l=await $.post("/rewards/vote",{postId:s.value.id,approve:r});l.data.success&&(await T(),A(l.data.message,"success"))}catch(l){console.error("Error voting for post:",l),A(((a=(t=l.response)==null?void 0:t.data)==null?void 0:a.message)||"Error voting for post","error")}};let g=null;return G(()=>{T(),g=setInterval(R,6e4)}),H(()=>{g&&clearInterval(g)}),(r,t)=>{const a=W("router-link");return o(),i("div",X,[D(Y,{message:k.value,type:_.value,show:w.value,onClose:U},null,8,["message","type","show"]),e("div",Z,[e("div",tt,[D(a,{to:"/rewards",class:"back-link"},{default:M(()=>t[2]||(t[2]=[e("i",{class:"fas fa-arrow-left"},null,-1),p(" Back to Rewards ")])),_:1}),t[3]||(t[3]=e("h1",null,"Tweet Details",-1))]),s.value?(o(),i("div",et,[e("div",st,[e("div",ot,[e("div",rt,[t[4]||(t[4]=e("i",{class:"fas fa-user-circle"},null,-1)),s.value.userTag!=="system"?(o(),K(a,{key:0,to:`/player/${s.value.userTag}`,class:"post-user"},{default:M(()=>[p(d(s.value.userTag),1)]),_:1},8,["to"])):(o(),i("span",it,"Official"))]),e("div",at,[s.value.approved?b.value?(o(),i("span",lt,t[6]||(t[6]=[e("i",{class:"fas fa-clock"},null,-1),p(" Inactive ")]))):m.value?(o(),i("span",nt,t[7]||(t[7]=[e("i",{class:"fas fa-check"},null,-1),p(" Active ")]))):u("",!0):(o(),i("span",pt,t[5]||(t[5]=[e("i",{class:"fas fa-ban"},null,-1),p(" Rejected ")])))])]),e("div",mt,[t[8]||(t[8]=e("i",{class:"fas fa-calendar-alt"},null,-1)),m.value?(o(),i("span",ut,d(f.value),1)):(o(),i("span",dt,d(F(s.value.createdAt)),1))]),e("div",vt,[e("div",ct,[s.value.approved?(o(),i("a",{key:0,href:`https://twitter.com/i/status/${s.value.tweetId}`,target:"_blank",class:"tweet-link"},[t[9]||(t[9]=e("i",{class:"fab fa-twitter"},null,-1)),p(" View Tweet "+d(s.value.tweetId),1)],8,ft)):(o(),i("div",wt,t[10]||(t[10]=[e("i",{class:"fas fa-lock"},null,-1),p(" Post has been blocked due to community moderation ")]))),s.value.approved&&!m.value?(o(),i("div",gt,[e("div",ht,[t[11]||(t[11]=e("i",{class:"fas fa-heart"},null,-1)),e("span",null,d(s.value.usersLiked.length)+" likes",1)]),e("div",yt,[t[12]||(t[12]=e("i",{class:"fas fa-retweet"},null,-1)),e("span",null,d(s.value.usersRetweeted.length)+" retweets",1)])])):u("",!0),s.value.approved&&!m.value?(o(),i("div",kt,t[13]||(t[13]=[e("p",{class:"tweet-stats-text"},"Interactions verified, rewards awarded",-1)]))):u("",!0),s.value.approved&&m.value?(o(),i("div",_t,t[14]||(t[14]=[e("p",{class:"tweet-stats-text"},"You can interact with this tweet. After the post is finished, we will check the results and reward you",-1)]))):u("",!0)]),e("div",Tt,[t[18]||(t[18]=e("h3",null,"Reward Info",-1)),t[19]||(t[19]=e("p",null,"Interact with this tweet to earn:",-1)),e("ul",null,[t[16]||(t[16]=e("li",null,[e("i",{class:"fas fa-heart"}),p(" Like: +1 power")],-1)),t[17]||(t[17]=e("li",null,[e("i",{class:"fas fa-retweet"}),p(" Retweet: +3 power")],-1)),s.value.userTag!=="system"?(o(),i("li",bt,t[15]||(t[15]=[e("i",{class:"fas fa-vote-yea"},null,-1),p(" Vote: +1 power")]))):u("",!0)])])])]),B.value?(o(),i("div",jt,[s.value.approved?(o(),i(Q,{key:1},[s.value.userTag!=="system"&&m.value?(o(),i("div",At,[e("button",{onClick:t[0]||(t[0]=l=>x(!0)),class:V(["approve-button",{active:L.value}])},t[21]||(t[21]=[e("i",{class:"fas fa-thumbs-up"},null,-1),p(" Approve ")]),2),e("button",{onClick:t[1]||(t[1]=l=>x(!1)),class:V(["reject-button",{active:S.value}])},t[22]||(t[22]=[e("i",{class:"fas fa-thumbs-down"},null,-1),p(" Reject ")]),2)])):(o(),i("div",xt,t[23]||(t[23]=[e("div",{class:"approval-text"},[e("span",null,"This post is created by the system and cannot be voted on")],-1)]))),b.value&&s.value.approved&&s.value.userTag!=="system"?(o(),i("div",It,t[24]||(t[24]=[e("div",{class:"ended-message"},[e("i",{class:"fas fa-clock"}),e("p",null,"This post has ended and voting is closed.")],-1)]))):u("",!0)],64)):(o(),i("div",Rt,t[20]||(t[20]=[e("div",{class:"rejection-message"},[e("i",{class:"fas fa-exclamation-triangle"}),e("p",null,"This post has been rejected by community moderation."),e("p",null,"Rewards were awarded to those who voted to reject the post.")],-1)]))),s.value.userTag!=="system"?(o(),i("div",Ct,[t[25]||(t[25]=e("h3",null,"Community Voting",-1)),e("div",$t,[e("div",{class:"approval-progress approval-progress--approve",style:P({width:`${N.value}%`})},null,4),e("div",{class:"approval-progress approval-progress--reject",style:P({width:`${z.value}%`,right:0})},null,4)]),e("div",Dt,[e("div",Mt,[e("span",Vt,d(s.value.usersApproved.length)+" approved",1),e("span",Pt,d(s.value.usersRejected.length)+" rejected",1)])])])):u("",!0)])):u("",!0)])):(o(),i("div",Et,t[26]||(t[26]=[e("div",{class:"loading-spinner"},[e("i",{class:"fas fa-spinner fa-spin"}),e("span",null,"Loading post...")],-1)])))])])}}},Wo=q(Bt,[["__scopeId","data-v-65bb1d90"]]);export{Wo as default};
