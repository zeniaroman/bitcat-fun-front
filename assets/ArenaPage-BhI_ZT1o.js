import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as n,x as J}from"./vendor-vue/reactivity-CqT5sv9X.js";import{E as D,J as I,h as P,o as A,i as a,F as B,l as S,c as G,j as C}from"./vendor-vue/runtime-core-CL52-QWR.js";import{a as x,t as V}from"./vendor-vue/shared-lLteBOIO.js";import{w as T}from"./vendor-vue/runtime-dom-Ll8vq9eS.js";const R={class:"arena-game-field"},X={class:"game-status"},Y={class:"player-info"},H={class:"hp-bar"},K={class:"timer"},N={class:"player-info opponent"},U={class:"hp-bar"},q=.8,L=15,E=50,O=10,z={__name:"ArenaGameField",setup(F,{expose:c}){const e=n({x:50,y:0}),r=n({x:300,y:0}),u=n(100),v=n(100),d=n(120),m=n([{id:1,x:0,y:0,width:600},{id:2,x:100,y:100,width:200},{id:3,x:400,y:150,width:150}]),i=n({x:0,y:0}),p=n(!1),M=n(null),g=o=>{const s=Math.floor(o/60),l=o%60;return`${s}:${l.toString().padStart(2,"0")}`},b=()=>{i.value.y-=q,e.value.y+=i.value.y;for(const o of m.value)if(e.value.y<=o.y&&e.value.y+i.value.y>o.y&&e.value.x>=o.x&&e.value.x<=o.x+o.width){e.value.y=o.y,i.value.y=0,p.value=!1;break}e.value.y<0&&(e.value.y=0,i.value.y=0,p.value=!1)};let h;const f=()=>{d.value>0&&(b(),j()),h=requestAnimationFrame(f)};let t;D(()=>{f(),t=setInterval(()=>{d.value>0&&d.value--},1e3)}),I(()=>{h&&cancelAnimationFrame(h),t&&clearInterval(t)});const y=()=>{p.value||(i.value.y=L,p.value=!0)},_=()=>{Math.abs(e.value.x-r.value.x)<=E&&(v.value=Math.max(0,v.value-O))},j=()=>{const o=r.value.x<e.value.x?2:-2;r.value.x+=o,Math.abs(r.value.x-e.value.x)<=E&&(u.value=Math.max(0,u.value-1))};return c({playerPosition:J(e),updatePlayerPosition:o=>{e.value.x=Math.max(20,Math.min(o,580))},jumpPlayer:y,attackPlayer:_}),(o,s)=>(A(),P("div",R,[a("div",X,[a("div",Y,[a("div",H,[a("div",{style:x({width:u.value+"%"}),class:"hp-fill"},null,4)]),s[0]||(s[0]=a("span",null,"You",-1))]),a("div",K,V(g(d.value)),1),a("div",N,[a("div",U,[a("div",{style:x({width:v.value+"%"}),class:"hp-fill"},null,4)]),s[1]||(s[1]=a("span",null,"Bot",-1))])]),a("div",{class:"game-field",ref_key:"gameField",ref:M},[a("div",{class:"player",style:x({left:e.value.x+"px",bottom:e.value.y+"px"})}," ðŸ˜º ",4),a("div",{class:"player bot",style:x({left:r.value.x+"px",bottom:r.value.y+"px"})}," ðŸ¤– ",4),(A(!0),P(B,null,S(m.value,l=>(A(),P("div",{key:l.id,class:"platform",style:x({left:l.x+"px",bottom:l.y+"px",width:l.width+"px"})},null,4))),128))],512)]))}},W=w(z,[["__scopeId","data-v-b47095ec"]]),Q={class:"arena-controls"},Z={class:"movement-controls"},tt={class:"action-controls"},k=50,et={__name:"ArenaControls",emits:["move","jump","attack"],setup(F,{emit:c}){const e=n(null),r=n(null),u=n({x:0,y:0}),v=n(!1),d=G(()=>({transform:`translate(${u.value.x}px, ${u.value.y}px)`})),m=t=>{const y=t.touches?t.touches[0]:t,_=e.value.getBoundingClientRect();return{x:y.clientX-_.left,y:y.clientY-_.top}},i=t=>{t.preventDefault(),v.value=!0,g(t)},p=t=>{v.value&&(t.preventDefault(),g(t))},M=t=>{t.preventDefault(),v.value=!1,u.value={x:0,y:0},f("move",{x:0,y:0})},g=t=>{const y=m(t),_=e.value,j=_.offsetWidth/2,o=_.offsetHeight/2;let s=y.x-j,l=y.y-o;if(Math.sqrt(s*s+l*l)>k){const $=Math.atan2(l,s);s=Math.cos($)*k,l=Math.sin($)*k}u.value={x:s,y:l},f("move",{x:s/k,y:-l/k})},b=t=>{t.preventDefault(),f("jump")},h=t=>{t.preventDefault(),f("attack")},f=c;return(t,y)=>(A(),P("div",Q,[a("div",Z,[a("div",{ref_key:"joystickContainer",ref:e,class:"joystick-container",onTouchstart:i,onTouchmove:p,onTouchend:M,onMousedown:i,onMousemove:p,onMouseup:M,onMouseleave:M},[a("div",{ref_key:"joystick",ref:r,class:"joystick",style:x(d.value)},null,4)],544)]),a("div",tt,[a("button",{class:"action-button jump",onTouchstart:T(b,["prevent"]),onMousedown:T(b,["prevent"])}," JUMP ",32),a("button",{class:"action-button attack",onTouchstart:T(h,["prevent"]),onMousedown:T(h,["prevent"])}," ATTACK ",32)])]))}},at=w(et,[["__scopeId","data-v-36611956"]]),ot={class:"arena-page"},st={class:"game-container"},nt=5,lt={__name:"ArenaPage",setup(F){const c=n(null),e=({x:v,y:d})=>{if(!c.value)return;const m=c.value.playerPosition,i=m.x+v*nt,p=Math.max(20,Math.min(i,580));c.value.updatePlayerPosition(p,m.y)},r=()=>{c.value&&c.value.jumpPlayer()},u=()=>{c.value&&c.value.attackPlayer()};return(v,d)=>(A(),P("div",ot,[d[0]||(d[0]=a("h1",null,"BITCAT Arena",-1)),a("div",st,[C(W,{ref_key:"gameField",ref:c},null,512)]),C(at,{onMove:e,onJump:r,onAttack:u})]))}},pt=w(lt,[["__scopeId","data-v-6a43c917"]]);export{pt as default};
