import{s as L}from"./index-BFwD7SI8.js";import{a as N}from"./vendor-axios-Hz4xvOoZ.js";import{w as H,v as U}from"./vendor-vue/runtime-dom-Ll8vq9eS.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as l,k as P,i as o,f as J,o as i,c as k,a as R,E as j,F as Q,l as W,H as V,j as E,e as q,m as z,r as G,b as X,K as Z}from"./vendor-vue/runtime-core-CL52-QWR.js";import{t as w,b as x}from"./vendor-vue/shared-lLteBOIO.js";import{b as O}from"./bitcat-CqTLzHsa.js";import{r as m,b as Y}from"./vendor-vue/reactivity-CqT5sv9X.js";import{A as $}from"./Toast-CHOcTYnn.js";import"./solana-vendors-DGPAp7Fj.js";import"./vendor-buffer-DVXvU5G6.js";import"./vendor-base64-js-C2zTC7ec.js";import"./vendor-ieee754-vIlwft-x.js";import"./vendor-events-cQ9mhZQJ.js";import"./vendor-process-DXjpGiAn.js";import"./vendor-lodash.isequal-D20p4pc-.js";import"./vendor-elliptic-BTxzAQL_.js";import"./vendor-minimalistic-assert-OF9c2MWr.js";import"./vendor-minimalistic-crypto-utils-DpWPKLSp.js";import"./vendor-brorand-6pV8Y5jC.js";import"./vendor-crypto-browserify-NMg_40A5.js";import"./vendor-randombytes-ndKo2FAH.js";import"./vendor-safe-buffer-BPihLaHX.js";import"./vendor-create-hash-BsmGkCgx.js";import"./vendor-inherits-BICa84dG.js";import"./vendor-md5.js-BmCTTIue.js";import"./vendor-hash-base-CXljNKss.js";import"./vendor-readable-stream-BpYOL4VF.js";import"./vendor-asn1.js-Cgb4HcA4.js";import"./vendor-util-deprecate-C5bwERXh.js";import"./vendor-string_decoder-CzqD1_ea.js";import"./vendor-ripemd160-B-g9_ZaO.js";import"./vendor-sha.js-C_Iv65sP.js";import"./vendor-cipher-base-CVoreX1z.js";import"./vendor-stream-browserify-BiXhMpOM.js";import"./vendor-create-hmac-Dt8PQ7js.js";import"./vendor-browserify-sign-DLX2f2Lw.js";import"./vendor-process-nextick-args-DZA8cFXf.js";import"./vendor-core-util-is-OG-hh3cz.js";import"./vendor-browserify-rsa-DRghgnJS.js";import"./vendor-bn.js-CN51n21Z.js";import"./vendor-parse-asn1-CnRUGrVC.js";import"./vendor-evp_bytestokey-V5JLH1pP.js";import"./vendor-browserify-aes-Dzp1Wr7h.js";import"./vendor-buffer-xor-BGVZWPAd.js";import"./vendor-pbkdf2-D8c51p7I.js";import"./vendor-browserify-cipher-CRpPeA_V.js";import"./vendor-browserify-des-7ZFmx5Md.js";import"./vendor-des.js-DyWMuwdI.js";import"./vendor-diffie-hellman-CdruneMD.js";import"./vendor-miller-rabin-D60nYGZr.js";import"./vendor-create-ecdh-D3sJE6Oq.js";import"./vendor-public-encrypt-BRl7BMPZ.js";import"./vendor-randomfill-PyDjCq6P.js";import"./vendor-hash.js-Dda3EUYz.js";import"./vendor-hmac-drbg-Ss9liF53.js";import"./vendor-vueuse/core-Dowf-keF.js";import"./vendor-vueuse/shared-D4hqHlE2.js";import"./vendor-eventemitter3-C1FPriCL.js";import"./vendor-bignumber.js-Dj_rIxHg.js";import"./vendor-bigint-buffer-5mUCZ2jv.js";import"./vendor-noble/ed25519-DHS8bCE8.js";import"./vendor-node-fetch-DFwHyKwz.js";import"./vendor-url-Fv_L5Bhg.js";import"./vendor-qs-CKXrMD_V.js";import"./vendor-side-channel-CjkecZmv.js";import"./vendor-es-errors-CxTyLFAO.js";import"./vendor-object-inspect-C0kqJKki.js";import"./vendor-side-channel-list-DJbPV7dX.js";import"./vendor-side-channel-map-OCAkmCSB.js";import"./vendor-get-intrinsic-Ci-jyTpD.js";import"./vendor-es-object-atoms-BR76m4z7.js";import"./vendor-math-intrinsics-DP1tGiab.js";import"./vendor-gopd-C1lCZ5Qs.js";import"./vendor-es-define-property-D_7cP-M3.js";import"./vendor-has-symbols-CySAGvJ4.js";import"./vendor-get-proto-BI0zWv-p.js";import"./vendor-dunder-proto-5sdYuMkY.js";import"./vendor-call-bind-apply-helpers-BfAPCzjd.js";import"./vendor-function-bind-CHqF18-c.js";import"./vendor-hasown-CH2RbkDu.js";import"./vendor-call-bound-nPIHF2bX.js";import"./vendor-side-channel-weakmap-D938crsm.js";import"./vendor-whatwg-url-BNoC3hI6.js";import"./vendor-webidl-conversions-DuBT_cRJ.js";import"./vendor-punycode-BGZJxaHx.js";import"./vendor-tr46-_6nBz5KS.js";import"./vendor-mime-DOJa-gVj.js";import"./vendor-assert-CCtLV3vt.js";import"./vendor-util-BEO2nGWh.js";import"./vendor-is-arguments-D-oLGwWh.js";import"./vendor-has-tostringtag-BU9GnA_1.js";import"./vendor-is-generator-function-Bk_W3rfd.js";import"./vendor-safe-regex-test-BtqTbUmV.js";import"./vendor-is-regex-BKTFpgjH.js";import"./vendor-which-typed-array-Bufg-IXZ.js";import"./vendor-for-each-HvIZAWYy.js";import"./vendor-is-callable-BYFz_UGF.js";import"./vendor-available-typed-arrays-uQGnJldC.js";import"./vendor-possible-typed-array-names-BKRybAhF.js";import"./vendor-call-bind-3YpglFCb.js";import"./vendor-set-function-length-Cm7PFPrZ.js";import"./vendor-define-data-property-BppnLwnj.js";import"./vendor-has-property-descriptors-ChC8uhsk.js";import"./vendor-is-typed-array-CZaxorcA.js";import"./vendor-object.assign-D0NKsUk4.js";import"./vendor-object-keys-BRu_Tray.js";import"./vendor-object-is-DkNyiNMZ.js";import"./vendor-define-properties-CgTwYkbs.js";import"./vendor-is-nan-BtAA6g8u.js";import"./vendor-debug-DLVl9QA3.js";import"./vendor-ms-CzQ2E3wO.js";import"./vendor-babel/runtime-w7AU6ifp.js";import"./vendor-js-sha3-DkKfOMXT.js";import"./vendor-typescript-collections-DaJ0MJpz.js";import"./vendor-lodash.clonedeep-C3jeG2fR.js";import"./vendor-ansicolors-BFAL4nhq.js";import"./vendor-bs58-DhqqakFZ.js";import"./vendor-base-x-BHV1Xppf.js";import"./vendor-base64url-D1J1q9RC.js";import"./vendor-arbundles-CR3XhIxB.js";import"./vendor-async-retry-DWdC6xTk.js";import"./vendor-retry-ByBYrtbW.js";import"./vendor-irys/arweave-CO_npObX.js";import"./vendor-safer-buffer-CIAg7E_-.js";import"./vendor-secp256k1-gx_3s_gH.js";import"./vendor-keccak-Bl_8Z6TM.js";import"./vendor-ethersproject/bytes-BFUO92dS.js";import"./vendor-ethersproject/logger-BIOSViGG.js";import"./vendor-ethersproject/wallet-_-D8aoNy.js";import"./vendor-ethersproject/address-C-94Rlzo.js";import"./vendor-ethersproject/keccak256-BpI13PIi.js";import"./vendor-ethersproject/rlp-L8r_OHwd.js";import"./vendor-ethersproject/bignumber-DuyZ-PBD.js";import"./vendor-ethersproject/abstract-provider-BJATZ19F.js";import"./vendor-ethersproject/properties-Bism-GXA.js";import"./vendor-ethersproject/abstract-signer-vaofOY7d.js";import"./vendor-ethersproject/strings-BqJBhWqj.js";import"./vendor-ethersproject/hdnode-De1GriMn.js";import"./vendor-ethersproject/basex-GbQJAx3e.js";import"./vendor-ethersproject/signing-key-DZY4IiDE.js";import"./vendor-ethersproject/sha2-C3DRumhS.js";import"./vendor-ethersproject/wordlists-Bgp1_tq6.js";import"./vendor-ethersproject/pbkdf2-RF0eycJB.js";import"./vendor-ethersproject/json-wallets-DmRppK22.js";import"./vendor-aes-js-CVO7b-af.js";import"./vendor-scrypt-js-pU08l4Iy.js";import"./vendor-ethersproject/random-UwHXQyRf.js";import"./vendor-ethersproject/hash-CaQkUgof.js";import"./vendor-ethersproject/transactions-DgEmUiir.js";import"./vendor-irys/sdk-zMcAFY0m.js";import"./vendor-irys/query-BJ-9co3k.js";import"./vendor-near-js/crypto-DYaHgGqH.js";import"./vendor-borsh-uT6VLZDJ.js";import"./vendor-text-encoding-utf-8-CyyJ4wbt.js";import"./vendor-tweetnacl-DH0kfJ7g.js";import"./vendor-crypto-js-TDtrdbi3.js";import"./vendor-near-js/types-BW5UzBhQ.js";import"./vendor-near-js/keystores-browser-C7Ipq7jt.js";import"./vendor-near-js/keystores-DZ_AKmgs.js";import"./vendor-near-js/transactions-CNW8gb_X.js";import"./vendor-js-sha256-J9Bkl3or.js";import"./vendor-ethersproject/contracts-BfB5cMkz.js";import"./vendor-ethersproject/abi-BZPj2eRn.js";import"./vendor-ethersproject/constants-DnPC-4nq.js";import"./vendor-aptos-COdaePwy.js";import"./vendor-scure/base-BmqIkRj2.js";import"./vendor-supercharge/promise-pool-CxlJr3BL.js";import"./vendor-noble/curves-Bi3lEKLw.js";import"./vendor-noble/hashes-DJrKYuPd.js";import"./vendor-jayson-C-feTq4c.js";import"./vendor-uuid-42xqzRtG.js";import"./vendor-rpc-websockets-CS_NMCMZ.js";import"./vendor-vue-router-PmQVL-xb.js";import"./vendor-vuex-router-sync-DE8Azp4R.js";import"./vendor-vuex-KmQPsw4D.js";import"./vendor-vue/devtools-api-Cow_pXkh.js";import"./vendor-socket.io-client-Bfvk10tG.js";import"./vendor-engine.io-client-sigXSzQJ.js";import"./vendor-engine.io-parser-BiEtp6m2.js";import"./vendor-socket.io/component-emitter-Dkula2eQ.js";import"./vendor-socket.io-parser-Cuf20g09.js";const tt={name:"ModalPopup",props:{show:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["close"],setup(n,{emit:e}){return{close:()=>{e("close")}}}},et={class:"modal-container"},ot={class:"modal-header"},at={class:"modal-title"},st={class:"modal-content"};function rt(n,e,r,t,d,s){return r.show?(i(),l("div",{key:0,class:"modal-overlay",onClick:e[1]||(e[1]=H((...a)=>t.close&&t.close(...a),["self"]))},[o("div",et,[o("div",ot,[o("h3",at,w(r.title),1),o("button",{class:"close-button",onClick:e[0]||(e[0]=(...a)=>t.close&&t.close(...a))},"Ã—")]),o("div",st,[J(n.$slots,"default",{},void 0,!0)])])])):P("",!0)}const it=B(tt,[["render",rt],["__scopeId","data-v-d4b2eb01"]]),nt={name:"AvatarForm",props:{userTag:{type:String,required:!0},userSettings:{type:Object,required:!0}},emits:["updated","close"],setup(n,{emit:e}){const r=m(n.userSettings.avatar||""),t=m(""),d=m(!1),s=m(""),a=m("nft"),p=m("owned"),u=m({owned:{nfts:[],pagination:{total:0,totalPages:0}},rented:{nfts:[],pagination:{total:0,totalPages:0}},created:{nfts:[],pagination:{total:0,totalPages:0}}}),v=m(1),g=m(null),T=k(()=>{if(!r.value)return!0;try{return new URL(r.value),!0}catch{return!1}});R(r,c=>{c&&T.value?t.value=c:t.value="",s.value=""});const I=async()=>{var c,y;d.value=!0,s.value="";try{const b=await N.put(`/user-settings/${n.userTag}/avatar`,{avatar:null},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});b.data&&b.data.success?(e("updated",{avatar:null}),L.commit("setDefaultAvatar")):s.value="Failed to reset avatar"}catch(b){console.error("Error resetting avatar:",b),s.value=((y=(c=b.response)==null?void 0:c.data)==null?void 0:y.message)||"Failed to reset avatar"}finally{d.value=!1}},_=async()=>{var c,y;if(a.value==="url"&&!T.value){s.value="Please enter a valid URL";return}d.value=!0,s.value="";try{let b={};if(a.value==="url")b={avatar:r.value};else if(a.value==="nft"&&g.value)b={nftMint:g.value.assetPublicKey};else{s.value="Please select an NFT or enter a valid URL",d.value=!1;return}const M=await N.put(`/user-settings/${n.userTag}/avatar`,b,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});M.data&&M.data.success?a.value==="url"?e("updated",{avatar:r.value}):(L.commit("setAvatar",g.value.imageUri),e("updated",{avatar:g.value.imageUri})):s.value="Failed to update avatar"}catch(b){console.error("Error updating avatar:",b),s.value=((y=(c=b.response)==null?void 0:c.data)==null?void 0:y.message)||"Failed to update avatar"}finally{d.value=!1}},h=async(c="owned",y=1)=>{var b,M;d.value=!0,s.value="";try{const F=await N.get(`/nft-bitcat/user/${n.userTag}/nfts`,{params:{tab:c,page:y,limit:9}});F.data&&F.data.success?u.value=F.data:s.value="Failed to load NFTs"}catch(F){console.error("Error fetching user NFTs:",F),s.value=((M=(b=F.response)==null?void 0:b.data)==null?void 0:M.message)||"Failed to load NFTs"}finally{d.value=!1}},A=c=>{g.value=c,t.value=c.imageUri},D=c=>{v.value=c,h(p.value,c)};R(p,c=>{v.value=1}),R(a,c=>{c==="nft"&&h(p.value,v.value)});const f=k(()=>{var c;return u.value?((c=u.value[p.value])==null?void 0:c.nfts)||[]:[]}),S=k(()=>{var c,y;return u.value&&((y=(c=u.value[p.value])==null?void 0:c.pagination)==null?void 0:y.totalPages)||1}),C=k(()=>S.value>1),K=k(()=>u.value.owned.pagination.total>0||u.value.rented.pagination.total>0||u.value.created.pagination.total>0);return j(()=>{h(p.value,v.value)}),{avatarUrl:r,previewUrl:t,loading:d,error:s,isValid:T,activeTab:a,activeNftTab:p,nftsData:u,currentPage:v,totalPages:S,selectedNft:g,currentNfts:f,showPagination:C,hasNfts:K,saveAvatar:_,fetchUserNfts:h,selectNft:A,changePage:D,setDefaultAvatar:I,bitcatImage:O}}},lt={class:"avatar-form"},dt={class:"avatar-preview"},ct=["src"],mt={class:"form-tabs"},ut={key:0,class:"nft-selection"},pt={key:0,class:"loading-container"},vt={key:1,class:"no-nfts-message"},ft={key:2},gt={class:"nft-tabs"},wt={class:"nft-grid"},bt=["onClick"],_t={class:"nft-image-container"},ht=["src","alt"],yt={class:"nft-name"},Pt={key:0,class:"no-nfts-message"},kt={key:1,class:"pagination"},Tt=["disabled"],Ct={class:"pagination-info"},Nt=["disabled"];const It={class:"form-actions"},At=["disabled"],St=["disabled"],Ft=["disabled"],Ut={key:0,class:"loading-spinner"},Vt={key:1},Mt={key:2,class:"error-message"};function xt(n,e,r,t,d,s){return i(),l("div",lt,[o("div",dt,[o("img",{src:t.previewUrl||r.userSettings.avatar||t.bitcatImage,alt:"Avatar Preview",class:"avatar-image"},null,8,ct)]),o("div",mt,[o("button",{class:x(["tab-button",{active:t.activeTab==="nft"}]),onClick:e[0]||(e[0]=a=>t.activeTab="nft")}," My NFTs ",2)]),t.activeTab==="nft"?(i(),l("div",ut,[t.loading?(i(),l("div",pt,e[10]||(e[10]=[o("div",{class:"loading-spinner large"},null,-1),o("p",null,"Loading your NFTs...",-1)]))):t.hasNfts?(i(),l("div",ft,[o("div",gt,[o("button",{class:x(["nft-tab-button",{active:t.activeNftTab==="owned"}]),onClick:e[1]||(e[1]=a=>t.activeNftTab="owned")}," Owned ("+w(t.nftsData.owned.pagination.total)+") ",3),o("button",{class:x(["nft-tab-button",{active:t.activeNftTab==="rented"}]),onClick:e[2]||(e[2]=a=>t.activeNftTab="rented")}," Rented ("+w(t.nftsData.rented.pagination.total)+") ",3),o("button",{class:x(["nft-tab-button",{active:t.activeNftTab==="created"}]),onClick:e[3]||(e[3]=a=>t.activeNftTab="created")}," Created ("+w(t.nftsData.created.pagination.total)+") ",3)]),o("div",wt,[(i(!0),l(Q,null,W(t.currentNfts,(a,p)=>(i(),l("div",{key:p,class:x(["nft-item",{selected:t.selectedNft&&t.selectedNft.createdAt===a.createdAt}]),onClick:u=>t.selectNft(a)},[o("div",_t,[o("img",{src:a.imageUri,alt:a.name,class:"nft-image"},null,8,ht)]),o("div",yt,w(a.name),1)],10,bt))),128))]),t.currentNfts.length===0?(i(),l("div",Pt,e[12]||(e[12]=[o("p",null,"No NFTs found in this category.",-1)]))):P("",!0),t.showPagination?(i(),l("div",kt,[o("button",{class:"pagination-button",disabled:t.currentPage===1,onClick:e[4]||(e[4]=a=>t.changePage(t.currentPage-1))}," Previous ",8,Tt),o("span",Ct,"Page "+w(t.currentPage)+" of "+w(t.totalPages),1),o("button",{class:"pagination-button",disabled:t.currentPage===t.totalPages,onClick:e[5]||(e[5]=a=>t.changePage(t.currentPage+1))}," Next ",8,Nt)])):P("",!0)])):(i(),l("div",vt,e[11]||(e[11]=[o("p",null,"You don't have any NFTs to use as avatar.",-1)])))])):(t.activeTab,P("",!0)),o("div",It,[o("button",{class:"btn-cancel",onClick:e[7]||(e[7]=a=>n.$emit("close")),disabled:t.loading}," Cancel ",8,At),o("button",{class:"btn-default",onClick:e[8]||(e[8]=(...a)=>t.setDefaultAvatar&&t.setDefaultAvatar(...a)),disabled:t.loading}," Set Default ",8,St),o("button",{class:"btn-save",onClick:e[9]||(e[9]=(...a)=>t.saveAvatar&&t.saveAvatar(...a)),disabled:t.loading||!t.isValid},[t.loading?(i(),l("span",Ut)):(i(),l("span",Vt,"Save Avatar"))],8,Ft)]),t.error?(i(),l("div",Mt,w(t.error),1)):P("",!0)])}const Bt=B(nt,[["render",xt],["__scopeId","data-v-70ff36ad"]]),Et={name:"ProfileInfoForm",props:{userTag:{type:String,required:!0},userSettings:{type:Object,required:!0}},emits:["updated","close"],setup(n,{emit:e}){const r=m(n.userSettings.bio||""),t=m(n.userSettings.telegram||""),d=m(n.userSettings.twitter||""),s=m(!1),a=m("");return{bio:r,telegram:t,twitter:d,loading:s,error:a,saveProfileInfo:async()=>{var u,v;s.value=!0,a.value="";try{const g=await N.put(`/user-settings/${n.userTag}/bio`,{bio:r.value,telegram:t.value,twitter:d.value},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});g.data&&g.data.success?e("updated",{bio:r.value,telegram:t.value,twitter:d.value}):a.value="Failed to update profile information"}catch(g){console.error("Error updating profile info:",g),a.value=((v=(u=g.response)==null?void 0:u.data)==null?void 0:v.message)||"Failed to update profile information"}finally{s.value=!1}}}}},Lt={class:"profile-info-form"},Dt={class:"form-group"},Rt={class:"form-group"},qt={class:"form-group"},zt={class:"form-actions"},Gt=["disabled"],Yt=["disabled"],jt={key:0,class:"loading-spinner"},Ot={key:1},Kt={key:0,class:"error-message"};function Ht(n,e,r,t,d,s){return i(),l("div",Lt,[o("div",Dt,[e[5]||(e[5]=o("label",{for:"bio",class:"form-label"},"Bio",-1)),V(o("textarea",{id:"bio","onUpdate:modelValue":e[0]||(e[0]=a=>t.bio=a),class:"form-textarea",placeholder:"Tell us about yourself (max 500 characters)",rows:"4",maxlength:"500",autocomplete:"off"},null,512),[[U,t.bio]])]),o("div",Rt,[e[6]||(e[6]=o("label",{for:"telegram",class:"form-label"},"Telegram",-1)),V(o("input",{type:"text",id:"telegram","onUpdate:modelValue":e[1]||(e[1]=a=>t.telegram=a),class:"form-input",placeholder:"Your Telegram username (without @)",autocomplete:"off"},null,512),[[U,t.telegram]])]),o("div",qt,[e[7]||(e[7]=o("label",{for:"twitter",class:"form-label"},"Twitter",-1)),V(o("input",{type:"text",id:"twitter","onUpdate:modelValue":e[2]||(e[2]=a=>t.twitter=a),class:"form-input",placeholder:"Your Twitter username (without @)",autocomplete:"off"},null,512),[[U,t.twitter]])]),o("div",zt,[o("button",{class:"btn-cancel",onClick:e[3]||(e[3]=a=>n.$emit("close")),disabled:t.loading}," Cancel ",8,Gt),o("button",{class:"btn-save",onClick:e[4]||(e[4]=(...a)=>t.saveProfileInfo&&t.saveProfileInfo(...a)),disabled:t.loading},[t.loading?(i(),l("span",jt)):(i(),l("span",Ot,"Save Information"))],8,Yt)]),t.error?(i(),l("div",Kt,w(t.error),1)):P("",!0)])}const Jt=B(Et,[["render",Ht],["__scopeId","data-v-e1688570"]]),Qt={name:"PasswordForm",props:{userTag:{type:String,required:!0},hasPassword:{type:Boolean,default:!1}},emits:["updated","close"],setup(n,{emit:e}){const r=m(""),t=m(""),d=m(""),s=m(!1),a=m(""),p=k(()=>t.value&&d.value&&t.value!==d.value),u=k(()=>!(n.hasPassword&&!r.value||!t.value||!d.value||p.value));return{currentPassword:r,newPassword:t,confirmPassword:d,loading:s,error:a,passwordMismatch:p,isValid:u,savePassword:async()=>{var g,T,I;if(u.value){s.value=!0,a.value="";try{let _="/auth/set-password",h={userTag:n.userTag,password:t.value};n.hasPassword&&(_="/auth/change-password",h={userTag:n.userTag,currentPassword:r.value,newPassword:t.value});const A=await N.post(_,h,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});A.data&&A.data.success?e("updated",{passwordChanged:!0}):a.value="Failed to update password"}catch(_){console.error("Error updating password:",_),a.value=((T=(g=_.response)==null?void 0:g.data)==null?void 0:T.message)||"Failed to update password",((I=_.response)==null?void 0:I.status)===403&&(a.value="Current password is incorrect")}finally{s.value=!1}}}}}},Wt={class:"password-form"},Xt={key:0,class:"form-group"},Zt={class:"form-group"},$t={for:"new-password",class:"form-label"},te={class:"form-group"},ee={key:0,class:"validation-error"},oe={class:"form-actions"},ae=["disabled"],se=["disabled"],re={key:0,class:"loading-spinner"},ie={key:1},ne={key:1,class:"error-message"};function le(n,e,r,t,d,s){return i(),l("div",Wt,[r.hasPassword?(i(),l("div",Xt,[e[5]||(e[5]=o("label",{for:"current-password",class:"form-label"},"Current Password",-1)),V(o("input",{type:"password",id:"current-password","onUpdate:modelValue":e[0]||(e[0]=a=>t.currentPassword=a),class:"form-input",placeholder:"Enter your current password"},null,512),[[U,t.currentPassword]])])):P("",!0),o("div",Zt,[o("label",$t,w(r.hasPassword?"New Password":"Password"),1),V(o("input",{type:"password",id:"new-password","onUpdate:modelValue":e[1]||(e[1]=a=>t.newPassword=a),class:"form-input",placeholder:"Enter new password"},null,512),[[U,t.newPassword]])]),o("div",te,[e[6]||(e[6]=o("label",{for:"confirm-password",class:"form-label"},"Confirm Password",-1)),V(o("input",{type:"password",id:"confirm-password","onUpdate:modelValue":e[2]||(e[2]=a=>t.confirmPassword=a),class:"form-input",placeholder:"Confirm new password"},null,512),[[U,t.confirmPassword]]),t.passwordMismatch?(i(),l("div",ee," Passwords do not match ")):P("",!0)]),o("div",oe,[o("button",{class:"btn-cancel",onClick:e[3]||(e[3]=a=>n.$emit("close")),disabled:t.loading}," Cancel ",8,ae),o("button",{class:"btn-save",onClick:e[4]||(e[4]=(...a)=>t.savePassword&&t.savePassword(...a)),disabled:t.loading||!t.isValid},[t.loading?(i(),l("span",re)):(i(),l("span",ie,w(r.hasPassword?"Change Password":"Set Password"),1))],8,se)]),t.error?(i(),l("div",ne,w(t.error),1)):P("",!0)])}const de=B(Qt,[["render",le],["__scopeId","data-v-14cbc202"]]),ce={name:"UserSettingsPage",components:{ModalPopup:it,AvatarForm:Bt,ProfileInfoForm:Jt,PasswordForm:de,AppToast:$},setup(){const n=k(()=>L.getters.userTag),e=k(()=>L.getters.isAuthenticated),r=m(!1),t=m(null),d=m(!1),s=Y({avatar:null,bio:null,telegram:null,twitter:null,isVip:!1}),a=Y({show:!1,message:"",type:"info",duration:5e3}),p=m(!1),u=m(""),v=m(null),g=async()=>{if(e.value)try{const f=await N.get(`/user-settings/${n.value}`);if(f.data&&f.data.success){const C=f.data.settings;s.avatar=C.avatar,s.bio=C.bio,s.telegram=C.telegram,s.twitter=C.twitter,s.isVip=C.isVip}const S=await N.get("/auth/me");S.data&&S.data.exists&&(r.value=S.data.hasPassword)}catch(f){console.error("Error fetching user settings:",f),a.type="error",a.message="Failed to load user settings",a.show=!0}},T=()=>{u.value="Change Avatar",v.value="AvatarForm",p.value=!0},I=()=>{u.value="Edit Profile Information",v.value="ProfileInfoForm",p.value=!0},_=()=>{u.value=r.value?"Change Password":"Set Password",v.value="PasswordForm",p.value=!0},h=()=>{p.value=!1},A=async()=>{try{const f=`https://bitcat.fun/?r=${n.value}`;await navigator.clipboard.writeText(f),d.value=!0,setTimeout(()=>{d.value=!1},2e3),a.type="success",a.message="Referral link copied to clipboard",a.show=!0}catch(f){console.error("Failed to copy text: ",f),a.type="error",a.message="Failed to copy referral link",a.show=!0}},D=f=>{f.avatar!==void 0&&(s.avatar=f.avatar),f.bio!==void 0&&(s.bio=f.bio),f.telegram!==void 0&&(s.telegram=f.telegram),f.twitter!==void 0&&(s.twitter=f.twitter),f.passwordChanged&&(r.value=!0),a.type="success",a.message="Settings updated successfully",a.show=!0,h()};return j(()=>{g()}),{userTag:n,isAuthenticated:e,userSettings:s,hasPassword:r,showModal:p,modalTitle:u,currentModalComponent:v,toast:a,openAvatarModal:T,openProfileInfoModal:I,openPasswordModal:_,closeModal:h,handleSettingsUpdated:D,bitcatImage:O,referralLinkInput:t,referralLinkCopied:d,copyReferralLink:A}}},me={class:"page-user-settings"},ue={key:0,class:"auth-message"},pe={key:1,class:"settings-container"},ve={class:"settings-section"},fe={class:"section-content"},ge={class:"current-avatar"},we=["src"],be={class:"settings-section"},_e={class:"section-content"},he={class:"info-item"},ye={class:"info-value"},Pe={class:"info-item"},ke={class:"info-value"},Te={class:"info-item"},Ce={class:"info-value"},Ne={class:"settings-section"},Ie={class:"section-content"},Ae={class:"info-item"},Se={class:"referral-link-container"},Fe=["value"],Ue={key:0},Ve={key:1},Me={class:"referral-actions"},xe={class:"settings-section"},Be={class:"section-content"},Ee={class:"info-item"},Le={class:"info-value"};function De(n,e,r,t,d,s){const a=G("router-link"),p=G("modal-popup"),u=G("AppToast");return i(),l("div",me,[e[23]||(e[23]=o("h2",{class:"page-title"},"User Settings",-1)),t.isAuthenticated?(i(),l("div",pe,[o("div",ve,[e[7]||(e[7]=o("h3",{class:"section-title"},"Profile Avatar",-1)),o("div",fe,[o("div",ge,[o("img",{src:t.userSettings.avatar||t.bitcatImage,alt:"User Avatar",class:"avatar-image"},null,8,we)]),o("button",{class:"action-button",onClick:e[0]||(e[0]=(...v)=>t.openAvatarModal&&t.openAvatarModal(...v))},"Change Avatar")])]),o("div",be,[e[11]||(e[11]=o("h3",{class:"section-title"},"Profile Information",-1)),o("div",_e,[o("div",he,[e[8]||(e[8]=o("span",{class:"info-label"},"Bio:",-1)),o("span",ye,w(t.userSettings.bio||"Not set"),1)]),o("div",Pe,[e[9]||(e[9]=o("span",{class:"info-label"},"Telegram:",-1)),o("span",ke,w(t.userSettings.telegram||"Not set"),1)]),o("div",Te,[e[10]||(e[10]=o("span",{class:"info-label"},"Twitter:",-1)),o("span",Ce,w(t.userSettings.twitter||"Not set"),1)]),o("button",{class:"action-button",onClick:e[1]||(e[1]=(...v)=>t.openProfileInfoModal&&t.openProfileInfoModal(...v))},"Edit Profile Info")])]),P("",!0),o("div",Ne,[e[17]||(e[17]=o("h3",{class:"section-title"},"Referral Program",-1)),o("div",Ie,[o("div",Ae,[e[16]||(e[16]=o("p",null,"Share your referral link with friends and earn up to 5% rewards from their paid actions.",-1)),o("div",Se,[o("input",{type:"text",class:"referral-link",readonly:"",value:`https://bitcat.fun/?r=${t.userTag}`,ref:"referralLinkInput"},null,8,Fe),o("button",{class:"copy-button",onClick:e[3]||(e[3]=(...v)=>t.copyReferralLink&&t.copyReferralLink(...v))},[e[14]||(e[14]=o("i",{class:"fas fa-copy"},null,-1)),t.referralLinkCopied?(i(),l("span",Ue,"Copied!")):(i(),l("span",Ve,"Copy"))])]),o("div",Me,[E(a,{to:"/my/referrals",class:"referral-button"},{default:q(()=>e[15]||(e[15]=[z(" View Referrals ")])),_:1})])])])]),o("div",xe,[e[22]||(e[22]=o("h3",{class:"section-title"},[z("VIP Status"),o("small",null,"(Coming Soon)")],-1)),o("div",Be,[o("div",Ee,[e[18]||(e[18]=o("span",{class:"info-label"},"VIP Status:",-1)),o("span",Le,w(t.userSettings.isVip?"Yes":"No"),1),e[19]||(e[19]=o("button",{class:"action-button",disabled:""}," Get VIP (for BITCAT) ",-1)),e[20]||(e[20]=o("br",null,null,-1)),e[21]||(e[21]=o("small",null,"VIP status can be purchased once. It will distinguish you from other users and give certain advantages. In development, stay tuned for updates",-1))])])])])):(i(),l("div",ue,[e[6]||(e[6]=o("p",null,"Please login to access your settings.",-1)),E(a,{to:"/my",class:"login-link"},{default:q(()=>e[5]||(e[5]=[z("Go to Login Page")])),_:1})])),E(p,{show:t.showModal,title:t.modalTitle,onClose:t.closeModal},{default:q(()=>[(i(),X(Z(t.currentModalComponent),{userTag:t.userTag,userSettings:t.userSettings,hasPassword:t.hasPassword,onUpdated:t.handleSettingsUpdated,onClose:t.closeModal},null,40,["userTag","userSettings","hasPassword","onUpdated","onClose"]))]),_:1},8,["show","title","onClose"]),E(u,{show:t.toast.show,message:t.toast.message,type:t.toast.type,onClose:e[4]||(e[4]=v=>t.toast.show=!1),duration:t.toast.duration},null,8,["show","message","type","duration"])])}const ir=B(ce,[["render",De],["__scopeId","data-v-89a80e22"]]);export{ir as default};
