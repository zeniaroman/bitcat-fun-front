import{v as st,e as ot}from"./vendor-vue/runtime-dom-Ll8vq9eS.js";import{u as W}from"./vendor-vuex-KmQPsw4D.js";import{A as V}from"./Toast-CHOcTYnn.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as v}from"./vendor-vue/reactivity-CqT5sv9X.js";import{c as F,E as U,h as n,i as s,k as w,j as I,e as R,H as it,m as T,r as A,o as i,a as K,F as B,l as E,b as nt,I as at}from"./vendor-vue/runtime-core-CL52-QWR.js";import{t as m,b as G}from"./vendor-vue/shared-lLteBOIO.js";import{b as rt}from"./vendor-buffer-DVXvU5G6.js";import{u as lt,C as j,T as ct}from"./solana-vendors-DGPAp7Fj.js";import{a as x}from"./vendor-axios-Hz4xvOoZ.js";import"./vendor-vue/devtools-api-Cow_pXkh.js";import"./vendor-base64-js-C2zTC7ec.js";import"./vendor-ieee754-vIlwft-x.js";import"./vendor-events-cQ9mhZQJ.js";import"./vendor-process-DXjpGiAn.js";import"./vendor-lodash.isequal-D20p4pc-.js";import"./vendor-elliptic-BTxzAQL_.js";import"./vendor-minimalistic-assert-OF9c2MWr.js";import"./vendor-minimalistic-crypto-utils-DpWPKLSp.js";import"./vendor-brorand-6pV8Y5jC.js";import"./vendor-crypto-browserify-NMg_40A5.js";import"./vendor-randombytes-ndKo2FAH.js";import"./vendor-safe-buffer-BPihLaHX.js";import"./vendor-create-hash-BsmGkCgx.js";import"./vendor-inherits-BICa84dG.js";import"./vendor-md5.js-BmCTTIue.js";import"./vendor-hash-base-CXljNKss.js";import"./vendor-readable-stream-BpYOL4VF.js";import"./vendor-asn1.js-Cgb4HcA4.js";import"./vendor-util-deprecate-C5bwERXh.js";import"./vendor-string_decoder-CzqD1_ea.js";import"./vendor-ripemd160-B-g9_ZaO.js";import"./vendor-sha.js-C_Iv65sP.js";import"./vendor-cipher-base-CVoreX1z.js";import"./vendor-stream-browserify-BiXhMpOM.js";import"./vendor-create-hmac-Dt8PQ7js.js";import"./vendor-browserify-sign-DLX2f2Lw.js";import"./vendor-process-nextick-args-DZA8cFXf.js";import"./vendor-core-util-is-OG-hh3cz.js";import"./vendor-browserify-rsa-DRghgnJS.js";import"./vendor-bn.js-CN51n21Z.js";import"./vendor-parse-asn1-CnRUGrVC.js";import"./vendor-evp_bytestokey-V5JLH1pP.js";import"./vendor-browserify-aes-Dzp1Wr7h.js";import"./vendor-buffer-xor-BGVZWPAd.js";import"./vendor-pbkdf2-D8c51p7I.js";import"./vendor-browserify-cipher-CRpPeA_V.js";import"./vendor-browserify-des-7ZFmx5Md.js";import"./vendor-des.js-DyWMuwdI.js";import"./vendor-diffie-hellman-CdruneMD.js";import"./vendor-miller-rabin-D60nYGZr.js";import"./vendor-create-ecdh-D3sJE6Oq.js";import"./vendor-public-encrypt-BRl7BMPZ.js";import"./vendor-randomfill-PyDjCq6P.js";import"./vendor-hash.js-Dda3EUYz.js";import"./vendor-hmac-drbg-Ss9liF53.js";import"./vendor-vueuse/core-Dowf-keF.js";import"./vendor-vueuse/shared-D4hqHlE2.js";import"./vendor-eventemitter3-C1FPriCL.js";import"./vendor-bignumber.js-Dj_rIxHg.js";import"./vendor-bigint-buffer-5mUCZ2jv.js";import"./vendor-noble/ed25519-DHS8bCE8.js";import"./vendor-node-fetch-DFwHyKwz.js";import"./vendor-url-Fv_L5Bhg.js";import"./vendor-qs-CKXrMD_V.js";import"./vendor-side-channel-CjkecZmv.js";import"./vendor-es-errors-CxTyLFAO.js";import"./vendor-object-inspect-C0kqJKki.js";import"./vendor-side-channel-list-DJbPV7dX.js";import"./vendor-side-channel-map-OCAkmCSB.js";import"./vendor-get-intrinsic-Ci-jyTpD.js";import"./vendor-es-object-atoms-BR76m4z7.js";import"./vendor-math-intrinsics-DP1tGiab.js";import"./vendor-gopd-C1lCZ5Qs.js";import"./vendor-es-define-property-D_7cP-M3.js";import"./vendor-has-symbols-CySAGvJ4.js";import"./vendor-get-proto-BI0zWv-p.js";import"./vendor-dunder-proto-5sdYuMkY.js";import"./vendor-call-bind-apply-helpers-BfAPCzjd.js";import"./vendor-function-bind-CHqF18-c.js";import"./vendor-hasown-CH2RbkDu.js";import"./vendor-call-bound-nPIHF2bX.js";import"./vendor-side-channel-weakmap-D938crsm.js";import"./vendor-whatwg-url-BNoC3hI6.js";import"./vendor-webidl-conversions-DuBT_cRJ.js";import"./vendor-punycode-BGZJxaHx.js";import"./vendor-tr46-_6nBz5KS.js";import"./vendor-mime-DOJa-gVj.js";import"./vendor-assert-CCtLV3vt.js";import"./vendor-util-BEO2nGWh.js";import"./vendor-is-arguments-D-oLGwWh.js";import"./vendor-has-tostringtag-BU9GnA_1.js";import"./vendor-is-generator-function-Bk_W3rfd.js";import"./vendor-safe-regex-test-BtqTbUmV.js";import"./vendor-is-regex-BKTFpgjH.js";import"./vendor-which-typed-array-Bufg-IXZ.js";import"./vendor-for-each-HvIZAWYy.js";import"./vendor-is-callable-BYFz_UGF.js";import"./vendor-available-typed-arrays-uQGnJldC.js";import"./vendor-possible-typed-array-names-BKRybAhF.js";import"./vendor-call-bind-3YpglFCb.js";import"./vendor-set-function-length-Cm7PFPrZ.js";import"./vendor-define-data-property-BppnLwnj.js";import"./vendor-has-property-descriptors-ChC8uhsk.js";import"./vendor-is-typed-array-CZaxorcA.js";import"./vendor-object.assign-D0NKsUk4.js";import"./vendor-object-keys-BRu_Tray.js";import"./vendor-object-is-DkNyiNMZ.js";import"./vendor-define-properties-CgTwYkbs.js";import"./vendor-is-nan-BtAA6g8u.js";import"./vendor-debug-DLVl9QA3.js";import"./vendor-ms-CzQ2E3wO.js";import"./vendor-babel/runtime-w7AU6ifp.js";import"./vendor-js-sha3-DkKfOMXT.js";import"./vendor-typescript-collections-DaJ0MJpz.js";import"./vendor-lodash.clonedeep-C3jeG2fR.js";import"./vendor-ansicolors-BFAL4nhq.js";import"./vendor-bs58-DhqqakFZ.js";import"./vendor-base-x-BHV1Xppf.js";import"./vendor-base64url-D1J1q9RC.js";import"./vendor-arbundles-CR3XhIxB.js";import"./vendor-async-retry-DWdC6xTk.js";import"./vendor-retry-ByBYrtbW.js";import"./vendor-irys/arweave-CO_npObX.js";import"./vendor-safer-buffer-CIAg7E_-.js";import"./vendor-secp256k1-gx_3s_gH.js";import"./vendor-keccak-Bl_8Z6TM.js";import"./vendor-ethersproject/bytes-BFUO92dS.js";import"./vendor-ethersproject/logger-BIOSViGG.js";import"./vendor-ethersproject/wallet-_-D8aoNy.js";import"./vendor-ethersproject/address-C-94Rlzo.js";import"./vendor-ethersproject/keccak256-BpI13PIi.js";import"./vendor-ethersproject/rlp-L8r_OHwd.js";import"./vendor-ethersproject/bignumber-DuyZ-PBD.js";import"./vendor-ethersproject/abstract-provider-BJATZ19F.js";import"./vendor-ethersproject/properties-Bism-GXA.js";import"./vendor-ethersproject/abstract-signer-vaofOY7d.js";import"./vendor-ethersproject/strings-BqJBhWqj.js";import"./vendor-ethersproject/hdnode-De1GriMn.js";import"./vendor-ethersproject/basex-GbQJAx3e.js";import"./vendor-ethersproject/signing-key-DZY4IiDE.js";import"./vendor-ethersproject/sha2-C3DRumhS.js";import"./vendor-ethersproject/wordlists-Bgp1_tq6.js";import"./vendor-ethersproject/pbkdf2-RF0eycJB.js";import"./vendor-ethersproject/json-wallets-DmRppK22.js";import"./vendor-aes-js-CVO7b-af.js";import"./vendor-scrypt-js-pU08l4Iy.js";import"./vendor-ethersproject/random-UwHXQyRf.js";import"./vendor-ethersproject/hash-CaQkUgof.js";import"./vendor-ethersproject/transactions-DgEmUiir.js";import"./vendor-irys/sdk-zMcAFY0m.js";import"./vendor-irys/query-BJ-9co3k.js";import"./vendor-near-js/crypto-DYaHgGqH.js";import"./vendor-borsh-uT6VLZDJ.js";import"./vendor-text-encoding-utf-8-CyyJ4wbt.js";import"./vendor-tweetnacl-DH0kfJ7g.js";import"./vendor-crypto-js-TDtrdbi3.js";import"./vendor-near-js/types-BW5UzBhQ.js";import"./vendor-near-js/keystores-browser-C7Ipq7jt.js";import"./vendor-near-js/keystores-DZ_AKmgs.js";import"./vendor-near-js/transactions-CNW8gb_X.js";import"./vendor-js-sha256-J9Bkl3or.js";import"./vendor-ethersproject/contracts-BfB5cMkz.js";import"./vendor-ethersproject/abi-BZPj2eRn.js";import"./vendor-ethersproject/constants-DnPC-4nq.js";import"./vendor-aptos-COdaePwy.js";import"./vendor-scure/base-BmqIkRj2.js";import"./vendor-supercharge/promise-pool-CxlJr3BL.js";import"./vendor-noble/curves-Bi3lEKLw.js";import"./vendor-noble/hashes-DJrKYuPd.js";import"./vendor-jayson-C-feTq4c.js";import"./vendor-uuid-42xqzRtG.js";import"./vendor-rpc-websockets-CS_NMCMZ.js";const dt={name:"TwitterLinkSection",components:{AppToast:V},setup(){const r=W(),t=v(""),a=v(!1),e=v(!0),y=v(!1),f=F(()=>r.state.session.isAuthenticated),l=F(()=>r.getters.isTwitterLinked),c=F(()=>r.getters.twitterUsername),o=v({show:!1,message:"",type:"info",duration:7e3}),u=(_,h="info")=>{o.value.message=_,o.value.type=h,o.value.show=!0},b=async()=>{if(e.value=!0,!f.value){e.value=!1;return}try{await r.dispatch("checkTwitterLinked")}catch(_){console.error("Error checking linked account:",_)}finally{e.value=!1}},k=async()=>{if(!t.value.trim())return u("Please enter a Twitter username","error");a.value=!0;try{const _=await r.dispatch("linkTwitterAccount",t.value.trim());_.success?(u("Twitter account successfully linked!","success"),t.value=""):u(_.message||"Failed to link Twitter account","error")}catch(_){console.error("Error linking account:",_),u("Error linking Twitter account","error")}finally{a.value=!1}},C=async()=>{if(l.value){a.value=!0;try{const _=await r.dispatch("unlinkTwitterAccount");_.success?u("Twitter account successfully unlinked!","success"):u(_.message||"Failed to unlink Twitter account","error")}catch(_){console.error("Error unlinking account:",_),u("Error unlinking Twitter account","error")}finally{a.value=!1}}};return U(()=>{f.value?b():e.value=!1}),{twitterUsername:t,hasLinkedAccount:l,linkedUsername:c,isAuthenticated:f,isSubmitting:a,isLoading:e,isLinking:y,linkAccount:k,unlinkAccount:C,toast:o}}},ut={class:"twitter-link-section-wrapper"},mt={class:"twitter-link-section-left"},pt={key:0,class:"loading"},ft={key:1,class:"auth-required"},vt={key:2,class:"link-form"},gt={class:"input-group"},ht=["disabled"],wt={key:3,class:"linked-account"},kt={class:"linked-info"},yt={class:"username"},_t=["disabled"],Tt={class:"twitter-link-section-right"};function bt(r,t,a,e,y,f){const l=A("router-link"),c=A("AppToast");return i(),n("div",ut,[s("div",mt,[t[12]||(t[12]=s("h2",null,"Link your Twitter Account",-1)),e.isLoading?(i(),n("div",pt,[t[6]||(t[6]=s("p",null,"To mint NFTs with BITCAT tokens, you need to log in first.",-1)),I(l,{to:"/my",class:"auth-button"},{default:R(()=>t[5]||(t[5]=[s("i",{class:"fas fa-sign-in-alt"},null,-1),T(" Log In ")])),_:1})])):e.isAuthenticated?!e.hasLinkedAccount&&!e.isLinking?(i(),n("div",vt,[t[10]||(t[10]=s("p",null,"Just provide your username to mint NFTs",-1)),s("div",gt,[t[9]||(t[9]=s("span",{class:"input-prefix"},"@",-1)),it(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.twitterUsername=o),type:"text",placeholder:"twitter_username",onKeyup:t[1]||(t[1]=ot((...o)=>e.linkAccount&&e.linkAccount(...o),["enter"]))},null,544),[[st,e.twitterUsername]])]),s("button",{class:"link-button",onClick:t[2]||(t[2]=(...o)=>e.linkAccount&&e.linkAccount(...o)),disabled:e.isSubmitting},m(e.isSubmitting?"Linking...":"Link Account"),9,ht)])):e.hasLinkedAccount?(i(),n("div",wt,[s("div",kt,[s("p",null,[t[11]||(t[11]=T("Linked to ")),s("span",yt,"@"+m(e.linkedUsername),1)])]),s("button",{class:"unlink-button",onClick:t[3]||(t[3]=(...o)=>e.unlinkAccount&&e.unlinkAccount(...o)),disabled:e.isSubmitting},m(e.isSubmitting?"Unlinking...":"Unlink Account"),9,_t)])):w("",!0):(i(),n("div",ft,[t[8]||(t[8]=s("p",null,"To mint NFTs with BITCAT tokens, you need to log in first.",-1)),I(l,{to:"/my",class:"auth-button"},{default:R(()=>t[7]||(t[7]=[s("i",{class:"fas fa-sign-in-alt"},null,-1),T(" Log In ")])),_:1})])),I(c,{show:e.toast.show,message:e.toast.message,type:e.toast.type,onClose:t[4]||(t[4]=o=>e.toast.show=!1),duration:e.toast.duration},null,8,["show","message","type","duration"])]),s("div",Tt,[t[14]||(t[14]=s("h2",null,"Go to NFT Rental Market",-1)),I(l,{to:"/nft-rental",class:"rental-market-button"},{default:R(()=>t[13]||(t[13]=[s("i",{class:"fas fa-store"},null,-1),T(" NFT Rental ")])),_:1})])])}const It=S(dt,[["render",bt],["__scopeId","data-v-f010564a"]]),Ct={name:"MintPopup",props:{show:{type:Boolean,default:!1},txSignature:{type:String,default:""},isComplete:{type:Boolean,default:!1},nftInfo:{type:Object,default:()=>({name:"",assetPublicKey:"",imageUri:"",metadataUri:""})}},methods:{close(){this.$emit("close")}}},At={key:0,class:"mint-popup-overlay"},Nt={class:"mint-popup-content no-invert"},Mt={class:"mint-popup-header"},Pt={class:"mint-popup-body"},Ft={key:0,class:"minting-progress"},Lt={class:"transaction-info"},Rt={class:"tx-id"},St={key:1,class:"minting-complete"},xt={key:0,class:"nft-image-container"},Ut=["src"],$t={class:"nft-details"},Bt={class:"tx-id"},Et={class:"asset-id"},Dt={class:"view-links"},qt=["href"];function Kt(r,t,a,e,y,f){const l=A("router-link");return a.show?(i(),n("div",At,[s("div",Nt,[s("div",Mt,[s("h2",null,m(a.isComplete?"NFT Successfully Minted!":"NFT Minting in Progress"),1),a.isComplete?(i(),n("button",{key:0,class:"close-button",onClick:t[0]||(t[0]=(...c)=>f.close&&f.close(...c))},"×")):w("",!0)]),s("div",Pt,[a.isComplete?(i(),n("div",St,[t[10]||(t[10]=s("div",{class:"success-icon"},"✓",-1)),s("h3",null,m(a.nftInfo.name),1),a.nftInfo.imageUri?(i(),n("div",xt,[s("img",{src:a.nftInfo.imageUri,alt:"NFT Image",class:"nft-image"},null,8,Ut)])):w("",!0),s("div",$t,[s("p",null,[t[4]||(t[4]=s("strong",null,"Transaction ID:",-1)),t[5]||(t[5]=T()),s("span",Bt,m(a.txSignature),1)]),s("p",null,[t[6]||(t[6]=s("strong",null,"Asset ID:",-1)),t[7]||(t[7]=T()),s("span",Et,m(a.nftInfo.assetPublicKey),1)])]),s("div",Dt,[I(l,{to:`/nft/${a.nftInfo.assetPublicKey}`,class:"view-link"},{default:R(()=>t[8]||(t[8]=[s("i",{class:"fas fa-eye"},null,-1),T(" View NFT Details ")])),_:1},8,["to"]),s("a",{href:`https://core.metaplex.com/explorer/${a.nftInfo.assetPublicKey}`,target:"_blank",class:"view-link"},t[9]||(t[9]=[s("i",{class:"fas fa-external-link-alt"},null,-1),T(" View on Metaplex ")]),8,qt)])])):(i(),n("div",Ft,[t[2]||(t[2]=s("div",{class:"spinner"},null,-1)),t[3]||(t[3]=s("p",{class:"warning-text"},"Please do not close this window. Minting process may take several minutes.",-1)),s("p",Lt,[t[1]||(t[1]=T("Transaction ID: ")),s("span",Rt,m(a.txSignature),1)])]))])])])):w("",!0)}const Wt=S(Ct,[["render",Kt],["__scopeId","data-v-9b0afbfb"]]),Vt={name:"TwitterPostsList",components:{AppToast:V,MintPopup:Wt},setup(){lt();const r=W(),t=v({show:!1,url:"",alt:""}),a=v([]),e=v(!0),y=v(null),f=v(null),l=v({}),c=v(null),o=v({}),u=v({show:!1,txSignature:"",isComplete:!1,nftInfo:{}}),b=v({show:!1,message:"",type:"info",duration:1e4}),k=F(()=>r.state.session.isAuthenticated),C=F(()=>r.getters.isTwitterLinked),_=F(()=>r.state.session.power),h=(d,g="info")=>{b.value.message=d,b.value.type=g,b.value.show=!0},J=F(()=>{if(!y.value)return"Unknown";const d=new Date(y.value),g=new Date(d.getTime()+1200*1e3);return H(g)}),H=d=>new Date(d).toLocaleString(),Y=async()=>{e.value=!0;try{const d=localStorage.getItem("userTag");console.log("User tag from localStorage:",d);let g="/nft-bitcat/twitter-posts";d&&(g+=`?userTag=${encodeURIComponent(d)}`),console.log("Fetching posts with URL:",g);const M=(await x.get(g)).data;if(M.success){a.value=M.posts;const $=a.value.reduce((p,P)=>{if(!P.lastCheckTime)return p;const L=new Date(P.lastCheckTime);return!p||L>p?L:p},null);y.value=$,a.value.forEach(p=>{console.log(`Post ${p.postId} has retweeted:`,p.hasRetweeted),console.log(`Post ${p.postId} can mint:`,p.canMint),console.log(`Post ${p.postId} already minted:`,p.alreadyMinted),p.alreadyMinted&&(o.value[p.postId]=!0),p.hasRetweeted===!0&&!p.alreadyMinted?(l.value[p.postId]=!0,console.log(`Setting canMint for post ${p.postId} to true`)):l.value[p.postId]===void 0&&(l.value[p.postId]=!1)})}}catch(d){console.error("Error fetching posts:",d),h("Failed to load Twitter posts","error")}finally{e.value=!1}},O=async d=>{if(!z())return h("Please log in to check your retweet status","warning");if(!C.value)return h("Please link your Twitter account first","warning");if(!r.getters.hasWallet)return h("Please connect your wallet to mint NFTs","warning");const g=a.value.find(N=>N.postId===d);if(g&&g.alreadyMinted)return h("You have already minted an NFT for this post","info");f.value=d;try{const M=(await x.get(`/twitter/check-retwit/${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}})).data;M.success?(l.value[d]=M.canMint,M.canMint?h("You can mint an NFT for this post!","success"):h("You need to retweet this post to mint an NFT","warning")):h(M.message||"Failed to check retweet","error")}catch(N){console.error("Error checking retweet:",N),h("Error checking retweet status","error")}finally{f.value=null}},Q=async d=>{if(!z())return h("Please log in to mint an NFT","warning");if(!C.value)return h("Please link your Twitter account first","warning");if(!r.getters.hasWallet)return h("Please connect your wallet first","warning");const g=a.value.find(N=>N.postId===d);if(g&&g.alreadyMinted)return h("You have already minted an NFT for this post","info");c.value=d;try{if(!window.solana){h("Please install Phantom Wallet extension","error");return}if(!window.solana.isConnected)try{await window.solana.connect()}catch(P){h(`Error connecting to Phantom Wallet: ${P.message}`,"error"),e.value=!1;return}const N=window.solana.publicKey.toString(),M=new j("https://sleek-icy-frog.solana-mainnet.quiknode.pro/9d4845e2d4c60caf45dc4f10d0bdcfdbcd6a321c","confirmed"),$=await x.post("/nft-bitcat/mint",{tweetId:d,walletPublicKey:N},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),p=$.data;if(console.log($),p.success){const P=window.solana;let L="Free mint";if(_.value.freeMint===0){const q=ct.from(rt.Buffer.from(p.transaction,"base64")),{blockhash:Z}=await M.getLatestBlockhash("confirmed");q.recentBlockhash=Z,q.feePayer=P.publicKey,console.log(`Mint will use ${p.bitcatAmount} BITCAT tokens`);const tt={skipPreflight:!1,preflightCommitment:"confirmed"},et=await P.signTransaction(q);L=await M.sendRawTransaction(et.serialize(),tt),await M.confirmTransaction(L,"confirmed")}u.value={show:!0,txSignature:L,isComplete:!1,nftInfo:{name:(g==null?void 0:g.title)||"Bitcat NFT",assetPublicKey:p.expectedNftAddress||"",imageUri:(g==null?void 0:g.imageUrl)||""}};const D=await x.post("/nft-bitcat/update-tx",{txSignature:L,assetPublicKey:P.publicKey.toString(),postId:d,metadataUri:p.metadataUri},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});D.data.success?(D.data.nftInfo&&(u.value.nftInfo=D.data.nftInfo),u.value.isComplete=!0,g.alreadyMinted=!0,o.value[d]=!0,h("NFT successfully minted!","success")):h("Error updating NFT status","error")}else h(p.message||"Error preparing data for minting","error")}catch(N){console.error("Error minting NFT:",N),h(`Error minting NFT: ${N.message}`,"error"),u.value.show&&(u.value.show=!1)}finally{c.value=null}},X=()=>{u.value.show=!1};new j("https://sleek-icy-frog.solana-mainnet.quiknode.pro/9d4845e2d4c60caf45dc4f10d0bdcfdbcd6a321c");const z=()=>k.value;return U(async()=>{k.value&&await r.dispatch("checkTwitterLinked"),Y()}),K(()=>r.state.session.isAuthenticated,d=>{d&&r.dispatch("checkTwitterLinked")}),K(()=>r.getters.isTwitterLinked,d=>{console.log("Twitter link status changed:",d),d&&Y()}),{posts:a,isLoading:e,isCheckingRetweet:f,isMinting:c,canMint:l,hasMinted:o,mintPopup:u,imagePopup:t,closeMintPopup:X,checkRetweet:O,mintNft:Q,formatNextCheckTime:J,formatDate:H,toast:b,isAuthenticated:k,hasLinkedTwitter:C,openImagePopup:(d,g)=>{t.value={show:!0,url:d,alt:g}},closeImagePopup:()=>{t.value.show=!1},power:_}}},Ht={class:"twitter-posts-section"},Yt={class:"section-header"},zt={class:"next-check-info"},jt={class:"time"},Gt={key:0,class:"loading"},Jt={key:1,class:"no-posts"},Ot={key:2,class:"posts-grid"},Qt={class:"post-image"},Xt=["src","alt","onClick"],Zt={key:0,class:"active-badge"},te={class:"post-content"},ee={key:0,class:"post-description"},se=["href"],oe={class:"post-meta"},ie={class:"meta-item"},ne={class:"label"},ae={class:"time-value"},re={class:"meta-stats"},le={class:"stat-item"},ce={class:"label"},de={class:"stat-item"},ue={class:"post-actions"},me=["onClick","disabled"],pe={key:0},fe={key:1},ve={key:2},ge={key:3},he={key:1,disabled:"",class:"already-minted-btn"},we=["onClick","disabled"],ke={class:"image-popup-content"},ye=["src","alt"];function _e(r,t,a,e,y,f){const l=A("AppToast"),c=A("MintPopup");return i(),n("div",Ht,[s("div",Yt,[t[3]||(t[3]=s("h2",null,"NFTs for Minting",-1)),s("div",zt,[t[2]||(t[2]=s("span",null,"Next retweets check: ",-1)),s("span",jt,m(e.formatNextCheckTime),1)])]),e.isLoading?(i(),n("div",Gt,t[4]||(t[4]=[s("p",null,"Loading posts...",-1)]))):e.posts.length===0?(i(),n("div",Jt,t[5]||(t[5]=[s("p",null,"No posts available for minting at the moment.",-1)]))):(i(),n("div",Ot,[(i(!0),n(B,null,E(e.posts,o=>{var u,b;return i(),n("div",{key:o.postId,class:"post-card"},[s("div",Qt,[s("img",{src:o.imageUrl,alt:o.title,onClick:k=>e.openImagePopup(o.imageUrl,o.title),class:"clickable-image"},null,8,Xt),o.isActive&&o.requiredRetweet||!o.requiredRetweet&&o.mintedCount<=o.mintLimit-1?(i(),n("div",Zt,m(o.requiredRetweet?"Active for Retweets":"Active for Minting"),1)):w("",!0)]),s("div",te,[s("h3",null,m(o.title),1),o.description?(i(),n("p",ee,m(o.description),1)):w("",!0),s("a",{href:o.twitterUrl,target:"_blank",rel:"noopener noreferrer",class:"twitter-link"},t[6]||(t[6]=[s("i",{class:"fab fa-twitter"},null,-1),T(" View on Twitter ")]),8,se),s("div",oe,[s("div",ie,[s("span",ne,m(o.requiredRetweet?"Retweets are accepted until":"No retweet needed")+":",1),s("div",ae,m(o.requiredRetweet?e.formatDate(o.endMintingTime):"You can mint up to the limit"),1)]),s("div",re,[s("div",le,[s("span",ce,m(o.requiredRetweet?"Retweets":"Limit")+":",1),s("span",null,m(o.requiredRetweet?o.totalRetweets:o.mintLimit),1)]),s("div",de,[t[7]||(t[7]=s("span",{class:"label"},"Minted:",-1)),s("span",null,m(o.mintedCount||0),1)])])]),s("div",ue,[!o.alreadyMinted||!e.hasMinted[o.postId]?(i(),n("button",{key:0,onClick:k=>e.checkRetweet(o.postId),disabled:!o.requiredRetweet||e.isCheckingRetweet===o.postId||e.hasMinted[o.postId]||o.alreadyMinted||e.canMint[o.postId]===!0,class:"check-btn"},[e.isCheckingRetweet===o.postId?(i(),n("span",pe,"Checking...")):e.canMint[o.postId]===!0?(i(),n("span",fe,"Retweet Verified ✓")):o.requiredRetweet?(i(),n("span",ge,"Check My Retweet")):(i(),n("span",ve,m(o.mintedCount>=o.mintLimit?"Limit reached":"No Retweet Required"),1))],8,me)):w("",!0),o.alreadyMinted?(i(),n("button",he," Already minted ✓ ")):!o.requiredRetweet&&o.mintedCount<=o.mintLimit-1||o.requiredRetweet&&e.canMint[o.postId]!==void 0&&e.canMint[o.postId]?(i(),n("button",{key:2,onClick:k=>e.mintNft(o.postId),disabled:e.isMinting===o.postId,class:"mint-btn"},m(e.isMinting===o.postId?"Minting...":((u=e.power)==null?void 0:u.freeMint)>0?`Mint NFT (You have ${(b=e.power)==null?void 0:b.freeMint} free mints)`:"Mint NFT (50K BITCAT)"),9,we)):w("",!0)])])])}),128))])),I(l,{show:e.toast.show,message:e.toast.message,type:e.toast.type,onClose:t[0]||(t[0]=o=>e.toast.show=!1),duration:e.toast.duration},null,8,["show","message","type","duration"]),I(c,{show:e.mintPopup.show,"tx-signature":e.mintPopup.txSignature,"is-complete":e.mintPopup.isComplete,"nft-info":e.mintPopup.nftInfo,onClose:e.closeMintPopup},null,8,["show","tx-signature","is-complete","nft-info","onClose"]),e.imagePopup.show?(i(),n("div",{key:3,class:"image-popup",onClick:t[1]||(t[1]=(...o)=>e.closeImagePopup&&e.closeImagePopup(...o))},[s("div",ke,[s("img",{src:e.imagePopup.url,alt:e.imagePopup.alt},null,8,ye)])])):w("",!0)])}const Te=S(Vt,[["render",_e],["__scopeId","data-v-b4c39ec4"]]),be={name:"UserNftsList",components:{AppToast:V},setup(){const r=W(),t=v([]),a=v(!0),e=v(null),y=F(()=>r.state.session.isAuthenticated),f=(u,b="info")=>{l.value.message=u,l.value.type=b,l.value.show=!0},l=v({show:!1,message:"",type:"info",duration:7e3}),c=async()=>{var u,b;if(!y.value){a.value=!1;return}a.value=!0,e.value=null;try{const k=await x.get("/nft-bitcat/user-nfts",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});k.data.success?t.value=k.data.nfts||[]:(e.value=k.data.message||"Failed to load your NFTs",f(e.value,"error"))}catch(k){console.error("Error fetching user NFTs:",k),e.value=((b=(u=k.response)==null?void 0:u.data)==null?void 0:b.message)||"An error occurred while fetching your NFTs",f(e.value,"error")}finally{a.value=!1}},o=u=>{switch(u){case"completed":return"status-completed";case"pending":return"status-pending";case"failed":return"status-failed";default:return""}};return U(()=>{y.value?c():a.value=!1}),{nfts:t,loading:a,error:e,isAuthenticated:y,getStatusClass:o,toast:l,showToast:f}}},Ie={class:"user-nfts-section"},Ce={key:0,class:"info-message"},Ae={key:1,class:"info-message"},Ne={key:2,class:"info-message"},Me={key:3,class:"info-message"},Pe={key:4,class:"nfts-grid"},Fe={class:"nft-image-container"},Le=["src","alt"],Re={class:"nft-info"},Se={class:"nft-actions"};function xe(r,t,a,e,y,f){const l=A("router-link"),c=A("AppToast");return i(),n("div",Ie,[t[1]||(t[1]=s("div",{class:"section-header"},[s("h2",null,"Your Minted NFTs")],-1)),e.isAuthenticated?e.loading?(i(),n("p",Ae,"Loading your NFTs...")):e.error?(i(),n("p",Ne,m(e.error),1)):e.nfts.length===0?(i(),n("p",Me,"You haven't minted any NFTs yet.")):w("",!0):(i(),n("p",Ce,"You need to login first")),e.isAuthenticated&&!e.loading&&!e.error&&e.nfts.length>0?(i(),n("div",Pe,[(i(!0),n(B,null,E(e.nfts,o=>(i(),n("div",{key:o.assetPublicKey,class:"nft-card"},[s("div",Fe,[s("img",{src:o.imageUri,alt:o.name,class:"nft-image"},null,8,Le)]),s("div",Re,[s("h3",null,m(o.name),1),s("p",{class:G(["nft-status",e.getStatusClass(o.status)])},m(o.status.charAt(0).toUpperCase()+o.status.slice(1)),3),s("div",Se,[I(l,{to:`/nft/${o.assetPublicKey}`,class:"view-button"},{default:R(()=>t[0]||(t[0]=[T(" View Details ")])),_:2},1032,["to"])])])]))),128))])):w("",!0),e.toast.show?(i(),nt(c,{key:5,message:e.toast.message,type:e.toast.type,duration:e.toast.duration},null,8,["message","type","duration"])):w("",!0)])}const Ue=S(be,[["render",xe],["__scopeId","data-v-98f969aa"]]),$e={name:"RecentMintsList",setup(){const r=v([]),t=v(!0),a=v(null),e=async()=>{var f,l;t.value=!0,a.value=null;try{const c=await x.get("/nft-bitcat/recent-mints");c.data.success?r.value=c.data.nfts||[]:a.value=c.data.message||"Failed to load recent mints"}catch(c){console.error("Error fetching recent mints:",c),a.value=((l=(f=c.response)==null?void 0:f.data)==null?void 0:l.message)||"An error occurred while fetching recent mints"}finally{t.value=!1}},y=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return U(()=>{e()}),{nfts:r,loading:t,error:a,formatDate:y}}},Be={class:"recent-mints-section"},Ee={key:0,class:"info-message"},De={key:1,class:"info-message"},qe={key:2,class:"info-message"},Ke={key:3,class:"nfts-list"},We={class:"nft-image-container"},Ve=["src","alt"],He={class:"nft-info"},Ye={key:0,class:"nft-minted-by"},ze={class:"nft-date"},je={class:"nft-actions"};function Ge(r,t,a,e,y,f){const l=A("router-link");return i(),n("div",Be,[t[2]||(t[2]=s("div",{class:"section-header"},[s("h2",null,"Recent 20 Mints")],-1)),e.loading?(i(),n("p",Ee,"Loading recent mints...")):e.error?(i(),n("p",De,m(e.error),1)):e.nfts.length===0?(i(),n("p",qe,"No recent mints found.")):w("",!0),!e.loading&&!e.error&&e.nfts.length>0?(i(),n("div",Ke,[(i(!0),n(B,null,E(e.nfts,c=>(i(),n("div",{key:c.assetPublicKey,class:"nft-item"},[s("div",We,[s("img",{src:c.imageUri,alt:c.name,class:"nft-image"},null,8,Ve)]),s("div",He,[s("h3",null,m(c.name),1),c.userTag?(i(),n("p",Ye,[t[0]||(t[0]=T(" Minted by: ")),I(l,{to:`/player-nfts/${c.userTag}`},{default:R(()=>[T(m(c.userTag),1)]),_:2},1032,["to"])])):w("",!0),s("p",ze,m(e.formatDate(c.createdAt)),1),s("div",je,[I(l,{to:`/nft/${c.assetPublicKey}`,class:"view-button"},{default:R(()=>t[1]||(t[1]=[T(" View Details ")])),_:2},1032,["to"])])])]))),128))])):w("",!0)])}const Je=S($e,[["render",Ge],["__scopeId","data-v-c4a9f3cf"]]),Oe={name:"HowItWorksPopup",props:{show:{type:Boolean,default:!1}},emits:["close"]},Qe={key:0,class:"how-it-works-popup"},Xe={class:"popup-content"},Ze={class:"popup-header"},ts={class:"popup-footer"};function es(r,t,a,e,y,f){return a.show?(i(),n("div",Qe,[s("div",{class:"popup-overlay",onClick:t[0]||(t[0]=l=>r.$emit("close"))}),s("div",Xe,[s("div",Ze,[t[3]||(t[3]=s("h2",null,[s("i",{class:"fas fa-info-circle"}),T(" How BITCAT NFT Minting Works")],-1)),s("button",{class:"close-button",onClick:t[1]||(t[1]=l=>r.$emit("close"))},"×")]),t[5]||(t[5]=at('<div class="popup-body" data-v-0280283d><div class="info-block" data-v-0280283d><div class="block-header" data-v-0280283d><i class="fas fa-rocket" data-v-0280283d></i><h3 data-v-0280283d>Getting Started with BITCAT NFTs</h3></div><div class="block-content" data-v-0280283d><div class="info-item" data-v-0280283d><p data-v-0280283d><strong data-v-0280283d>Twitter Required:</strong> To mint NFTs, you need to enter your Twitter username. This allows us to verify that you&#39;ve retweeted the post, which unlocks the ability to mint specific NFTs.</p></div><div class="info-item highlight-box" data-v-0280283d><div class="highlight-header" data-v-0280283d><i class="fas fa-question-circle" data-v-0280283d></i><h4 data-v-0280283d>Why Retweet?</h4></div><p data-v-0280283d>Retweeting helps attract more crypto enthusiasts to the BITCAT project, growing our community and increasing the value of your NFTs. It&#39;s a win-win for everyone!</p></div></div></div><div class="info-block" data-v-0280283d><div class="block-header" data-v-0280283d><i class="fas fa-cogs" data-v-0280283d></i><h3 data-v-0280283d>Technical Details &amp; Security</h3></div><div class="block-content" data-v-0280283d><div class="info-item" data-v-0280283d><p data-v-0280283d><strong data-v-0280283d>Decentralized Storage:</strong> All NFTs are stored on <strong data-v-0280283d>Irys</strong> (formerly Arweave), a decentralized storage network that ensures your data remains accessible forever.</p></div><div class="info-item" data-v-0280283d><p data-v-0280283d><strong data-v-0280283d>Immutable Metadata:</strong> After minting, you receive full ownership rights to your NFT. The metadata is <span class="highlight-text" data-v-0280283d>immutable</span>, guaranteeing that the unique attributes of each NFT cannot be changed.</p></div><div class="info-item" data-v-0280283d><p data-v-0280283d><strong data-v-0280283d>Payment Method:</strong> To mint an NFT, you need to pay with BITCAT tokens. All funds collected will be used exclusively for project promotion and development.</p></div></div></div><div class="info-block" data-v-0280283d><div class="block-header" data-v-0280283d><i class="fas fa-gem" data-v-0280283d></i><h3 data-v-0280283d>NFT Attributes &amp; Ecosystem Value</h3></div><div class="block-content" data-v-0280283d><div class="info-item" data-v-0280283d><p data-v-0280283d>Each NFT is minted with unique attributes that affect its value within our developing ecosystem:</p><ul class="features-list" data-v-0280283d><li data-v-0280283d><i class="fas fa-trophy" data-v-0280283d></i> <strong data-v-0280283d>Lottery Participation</strong> - Use your NFTs in our upcoming lottery system</li><li data-v-0280283d><i class="fas fa-gamepad" data-v-0280283d></i> <strong data-v-0280283d>Crypto Duel</strong> - Battle your NFTs against others in our game</li><li data-v-0280283d><i class="fas fa-chart-line" data-v-0280283d></i> <strong data-v-0280283d>Ecosystem Value</strong> - Unique attributes determine rarity and utility</li><li data-v-0280283d><i class="fas fa-random" data-v-0280283d></i> <strong data-v-0280283d>Random Assignment</strong> - All attributes are assigned randomly at minting</li></ul></div><div class="info-item highlight-box important" data-v-0280283d><div class="highlight-header" data-v-0280283d><i class="fas fa-exclamation-circle" data-v-0280283d></i><h4 data-v-0280283d>Important to Remember</h4></div><p data-v-0280283d>The rarity and unique combination of attributes in your NFT directly impacts its utility and value in the BITCAT ecosystem. Each NFT is truly one-of-a-kind!</p></div></div></div></div>',1)),s("div",ts,[s("button",{class:"close-btn",onClick:t[2]||(t[2]=l=>r.$emit("close"))},t[4]||(t[4]=[s("i",{class:"fas fa-check"},null,-1),T(" Got it! ")]))])])])):w("",!0)}const ss=S(Oe,[["render",es],["__scopeId","data-v-0280283d"]]),os={name:"NftBitcatPage",components:{TwitterLinkSection:It,TwitterPostsList:Te,UserNftsList:Ue,RecentMintsList:Je,HowItWorksPopup:ss},setup(){const r=v(0),t=v(!1),a=[{name:"Available",component:"TwitterPostsList"},{name:"My NFTs",component:"UserNftsList"},{name:"Mint History",component:"RecentMintsList"}];return U(()=>{const e=localStorage.getItem("nft-bitcat-page-tab");e!==null&&(r.value=parseInt(e))}),K(r,e=>{localStorage.setItem("nft-bitcat-page-tab",e.toString())}),{activeTab:r,tabs:a,showHowItWorks:t}}},is={class:"nft-bitcat-page"},ns={class:"nft-bitcat-page-wrap"},as={class:"page-header"},rs={class:"tabs-container"},ls={class:"tabs-navigation"},cs=["onClick"],ds={key:0,class:"tab-icon"},us={key:1,class:"tab-icon"},ms={key:2,class:"tab-icon"},ps={key:3,class:"active-indicator"},fs={class:"tab-content"},vs={key:0,class:"tab-pane"},gs={key:1,class:"tab-pane"},hs={key:2,class:"tab-pane"};function ws(r,t,a,e,y,f){const l=A("TwitterLinkSection"),c=A("TwitterPostsList"),o=A("UserNftsList"),u=A("RecentMintsList"),b=A("HowItWorksPopup");return i(),n("div",is,[s("div",ns,[s("div",as,[t[2]||(t[2]=s("h1",null,"BITCAT NFT Minting",-1)),t[3]||(t[3]=s("p",{class:"subtitle"},"Mint NFTs by retweeting and paying with BITCAT tokens",-1)),s("button",{class:"how-it-works-btn",onClick:t[0]||(t[0]=k=>e.showHowItWorks=!0)}," How it works ")]),I(l),s("div",rs,[s("div",ls,[(i(!0),n(B,null,E(e.tabs,(k,C)=>(i(),n("button",{key:C,onClick:_=>e.activeTab=C,class:G(["tab-button",{active:e.activeTab===C}])},[C===0?(i(),n("span",ds,t[4]||(t[4]=[s("i",{class:"fas fa-fire"},null,-1)]))):C===1?(i(),n("span",us,t[5]||(t[5]=[s("i",{class:"fas fa-wallet"},null,-1)]))):C===2?(i(),n("span",ms,t[6]||(t[6]=[s("i",{class:"fas fa-history"},null,-1)]))):w("",!0),T(" "+m(k.name)+" ",1),e.activeTab===C?(i(),n("span",ps)):w("",!0)],10,cs))),128))]),s("div",fs,[e.activeTab===0?(i(),n("div",vs,[I(c)])):w("",!0),e.activeTab===1?(i(),n("div",gs,[I(o)])):w("",!0),e.activeTab===2?(i(),n("div",hs,[I(u)])):w("",!0)])]),I(b,{show:e.showHowItWorks,onClose:t[1]||(t[1]=k=>e.showHowItWorks=!1)},null,8,["show"])])])}const xn=S(os,[["render",ws],["__scopeId","data-v-84afd033"]]);export{xn as default};
