import{u as E,a as j}from"./vendor-vue-router-PmQVL-xb.js";import{v as Q,e as X}from"./vendor-vue/runtime-dom-Ll8vq9eS.js";import{u as Y}from"./vendor-vuex-KmQPsw4D.js";/* empty css                                                                     */import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as Z}from"./vendor-axios-Hz4xvOoZ.js";import{c,E as tt,J as et,a as _,h as g,o as d,k,i as o,m as M,F as at,l as ot,H as it,n as rt,j as nt}from"./vendor-vue/runtime-core-CL52-QWR.js";import{r as p}from"./vendor-vue/reactivity-CqT5sv9X.js";import{b as w,t as P,a as st}from"./vendor-vue/shared-lLteBOIO.js";import"./vendor-vue/devtools-api-Cow_pXkh.js";import"./vendor-process-DXjpGiAn.js";import"./solana-vendors-DGPAp7Fj.js";import"./vendor-buffer-DVXvU5G6.js";import"./vendor-base64-js-C2zTC7ec.js";import"./vendor-ieee754-vIlwft-x.js";import"./vendor-events-cQ9mhZQJ.js";import"./vendor-lodash.isequal-D20p4pc-.js";import"./vendor-elliptic-BTxzAQL_.js";import"./vendor-minimalistic-assert-OF9c2MWr.js";import"./vendor-minimalistic-crypto-utils-DpWPKLSp.js";import"./vendor-brorand-6pV8Y5jC.js";import"./vendor-crypto-browserify-NMg_40A5.js";import"./vendor-randombytes-ndKo2FAH.js";import"./vendor-safe-buffer-BPihLaHX.js";import"./vendor-create-hash-BsmGkCgx.js";import"./vendor-inherits-BICa84dG.js";import"./vendor-md5.js-BmCTTIue.js";import"./vendor-hash-base-CXljNKss.js";import"./vendor-readable-stream-BpYOL4VF.js";import"./vendor-asn1.js-Cgb4HcA4.js";import"./vendor-util-deprecate-C5bwERXh.js";import"./vendor-string_decoder-CzqD1_ea.js";import"./vendor-ripemd160-B-g9_ZaO.js";import"./vendor-sha.js-C_Iv65sP.js";import"./vendor-cipher-base-CVoreX1z.js";import"./vendor-stream-browserify-BiXhMpOM.js";import"./vendor-create-hmac-Dt8PQ7js.js";import"./vendor-browserify-sign-DLX2f2Lw.js";import"./vendor-process-nextick-args-DZA8cFXf.js";import"./vendor-core-util-is-OG-hh3cz.js";import"./vendor-browserify-rsa-DRghgnJS.js";import"./vendor-bn.js-CN51n21Z.js";import"./vendor-parse-asn1-CnRUGrVC.js";import"./vendor-evp_bytestokey-V5JLH1pP.js";import"./vendor-browserify-aes-Dzp1Wr7h.js";import"./vendor-buffer-xor-BGVZWPAd.js";import"./vendor-pbkdf2-D8c51p7I.js";import"./vendor-browserify-cipher-CRpPeA_V.js";import"./vendor-browserify-des-7ZFmx5Md.js";import"./vendor-des.js-DyWMuwdI.js";import"./vendor-diffie-hellman-CdruneMD.js";import"./vendor-miller-rabin-D60nYGZr.js";import"./vendor-create-ecdh-D3sJE6Oq.js";import"./vendor-public-encrypt-BRl7BMPZ.js";import"./vendor-randomfill-PyDjCq6P.js";import"./vendor-hash.js-Dda3EUYz.js";import"./vendor-hmac-drbg-Ss9liF53.js";import"./vendor-vueuse/core-Dowf-keF.js";import"./vendor-vueuse/shared-D4hqHlE2.js";import"./vendor-eventemitter3-C1FPriCL.js";import"./vendor-bignumber.js-Dj_rIxHg.js";import"./vendor-bigint-buffer-5mUCZ2jv.js";import"./vendor-noble/ed25519-DHS8bCE8.js";import"./vendor-node-fetch-DFwHyKwz.js";import"./vendor-url-Fv_L5Bhg.js";import"./vendor-qs-CKXrMD_V.js";import"./vendor-side-channel-CjkecZmv.js";import"./vendor-es-errors-CxTyLFAO.js";import"./vendor-object-inspect-C0kqJKki.js";import"./vendor-side-channel-list-DJbPV7dX.js";import"./vendor-side-channel-map-OCAkmCSB.js";import"./vendor-get-intrinsic-Ci-jyTpD.js";import"./vendor-es-object-atoms-BR76m4z7.js";import"./vendor-math-intrinsics-DP1tGiab.js";import"./vendor-gopd-C1lCZ5Qs.js";import"./vendor-es-define-property-D_7cP-M3.js";import"./vendor-has-symbols-CySAGvJ4.js";import"./vendor-get-proto-BI0zWv-p.js";import"./vendor-dunder-proto-5sdYuMkY.js";import"./vendor-call-bind-apply-helpers-BfAPCzjd.js";import"./vendor-function-bind-CHqF18-c.js";import"./vendor-hasown-CH2RbkDu.js";import"./vendor-call-bound-nPIHF2bX.js";import"./vendor-side-channel-weakmap-D938crsm.js";import"./vendor-whatwg-url-BNoC3hI6.js";import"./vendor-webidl-conversions-DuBT_cRJ.js";import"./vendor-punycode-BGZJxaHx.js";import"./vendor-tr46-_6nBz5KS.js";import"./vendor-mime-DOJa-gVj.js";import"./vendor-assert-CCtLV3vt.js";import"./vendor-util-BEO2nGWh.js";import"./vendor-is-arguments-D-oLGwWh.js";import"./vendor-has-tostringtag-BU9GnA_1.js";import"./vendor-is-generator-function-Bk_W3rfd.js";import"./vendor-safe-regex-test-BtqTbUmV.js";import"./vendor-is-regex-BKTFpgjH.js";import"./vendor-which-typed-array-Bufg-IXZ.js";import"./vendor-for-each-HvIZAWYy.js";import"./vendor-is-callable-BYFz_UGF.js";import"./vendor-available-typed-arrays-uQGnJldC.js";import"./vendor-possible-typed-array-names-BKRybAhF.js";import"./vendor-call-bind-3YpglFCb.js";import"./vendor-set-function-length-Cm7PFPrZ.js";import"./vendor-define-data-property-BppnLwnj.js";import"./vendor-has-property-descriptors-ChC8uhsk.js";import"./vendor-is-typed-array-CZaxorcA.js";import"./vendor-object.assign-D0NKsUk4.js";import"./vendor-object-keys-BRu_Tray.js";import"./vendor-object-is-DkNyiNMZ.js";import"./vendor-define-properties-CgTwYkbs.js";import"./vendor-is-nan-BtAA6g8u.js";import"./vendor-debug-DLVl9QA3.js";import"./vendor-ms-CzQ2E3wO.js";import"./vendor-babel/runtime-w7AU6ifp.js";import"./vendor-js-sha3-DkKfOMXT.js";import"./vendor-typescript-collections-DaJ0MJpz.js";import"./vendor-lodash.clonedeep-C3jeG2fR.js";import"./vendor-ansicolors-BFAL4nhq.js";import"./vendor-bs58-DhqqakFZ.js";import"./vendor-base-x-BHV1Xppf.js";import"./vendor-base64url-D1J1q9RC.js";import"./vendor-arbundles-CR3XhIxB.js";import"./vendor-async-retry-DWdC6xTk.js";import"./vendor-retry-ByBYrtbW.js";import"./vendor-irys/arweave-CO_npObX.js";import"./vendor-safer-buffer-CIAg7E_-.js";import"./vendor-secp256k1-gx_3s_gH.js";import"./vendor-keccak-Bl_8Z6TM.js";import"./vendor-ethersproject/bytes-BFUO92dS.js";import"./vendor-ethersproject/logger-BIOSViGG.js";import"./vendor-ethersproject/wallet-_-D8aoNy.js";import"./vendor-ethersproject/address-C-94Rlzo.js";import"./vendor-ethersproject/keccak256-BpI13PIi.js";import"./vendor-ethersproject/rlp-L8r_OHwd.js";import"./vendor-ethersproject/bignumber-DuyZ-PBD.js";import"./vendor-ethersproject/abstract-provider-BJATZ19F.js";import"./vendor-ethersproject/properties-Bism-GXA.js";import"./vendor-ethersproject/abstract-signer-vaofOY7d.js";import"./vendor-ethersproject/strings-BqJBhWqj.js";import"./vendor-ethersproject/hdnode-De1GriMn.js";import"./vendor-ethersproject/basex-GbQJAx3e.js";import"./vendor-ethersproject/signing-key-DZY4IiDE.js";import"./vendor-ethersproject/sha2-C3DRumhS.js";import"./vendor-ethersproject/wordlists-Bgp1_tq6.js";import"./vendor-ethersproject/pbkdf2-RF0eycJB.js";import"./vendor-ethersproject/json-wallets-DmRppK22.js";import"./vendor-aes-js-CVO7b-af.js";import"./vendor-scrypt-js-pU08l4Iy.js";import"./vendor-ethersproject/random-UwHXQyRf.js";import"./vendor-ethersproject/hash-CaQkUgof.js";import"./vendor-ethersproject/transactions-DgEmUiir.js";import"./vendor-irys/sdk-zMcAFY0m.js";import"./vendor-irys/query-BJ-9co3k.js";import"./vendor-near-js/crypto-DYaHgGqH.js";import"./vendor-borsh-uT6VLZDJ.js";import"./vendor-text-encoding-utf-8-CyyJ4wbt.js";import"./vendor-tweetnacl-DH0kfJ7g.js";import"./vendor-crypto-js-TDtrdbi3.js";import"./vendor-near-js/types-BW5UzBhQ.js";import"./vendor-near-js/keystores-browser-C7Ipq7jt.js";import"./vendor-near-js/keystores-DZ_AKmgs.js";import"./vendor-near-js/transactions-CNW8gb_X.js";import"./vendor-js-sha256-J9Bkl3or.js";import"./vendor-ethersproject/contracts-BfB5cMkz.js";import"./vendor-ethersproject/abi-BZPj2eRn.js";import"./vendor-ethersproject/constants-DnPC-4nq.js";import"./vendor-aptos-COdaePwy.js";import"./vendor-scure/base-BmqIkRj2.js";import"./vendor-supercharge/promise-pool-CxlJr3BL.js";import"./vendor-noble/curves-Bi3lEKLw.js";import"./vendor-noble/hashes-DJrKYuPd.js";import"./vendor-jayson-C-feTq4c.js";import"./vendor-uuid-42xqzRtG.js";import"./vendor-rpc-websockets-CS_NMCMZ.js";const mt={class:"chat-header"},lt={class:"header-left"},pt={class:"avatar-button pulse-animation",type:"button",disabled:""},ct=["src"],ut={class:"header-title"},gt={class:"chat-header-title"},dt={class:"header-controls"},vt={class:"chat-messages"},ht={key:0,class:"message agent-message"},ft={class:"message-content"},yt={class:"typing-animation"},Tt={key:0},_t={key:1,class:"message agent-message"},wt={class:"message-content"},At={class:"typing-animation"},kt=["innerHTML"],It={class:"message-content"},St={key:0,class:"tech-decoration"},bt={class:"chat-input"},Bt={class:"input-wrapper"},Pt=["disabled"],Ct={__name:"AiAgentFrame",props:{withButton:{type:Boolean,default:!0},isOpenProp:{type:Boolean,default:!1},isAbsolute:{type:Boolean,default:!0},isFullScreen:{type:Boolean,default:!1},maxHeight:{type:String,default:"600px"},zIndex:{type:Number,default:1e3},imgUrl:{type:String,default:""},agentTag:{type:String,default:""},name:{type:String,default:""},theme:{type:String,default:"dark"},description:{type:String,default:""},poweredBy:{type:String,default:"Powered by Bitcat"}},setup(v){const a=v,s=Y(),C=E();j(),a.agentTag&&s.commit("SELECT_AGENT",{name:a.name||"BITCAT AI Agent",agentTag:a.agentTag||"main_agent",description:a.description||"Frame AI Agent",avatar:a.imgUrl||26});const f=c(()=>a.withButton?s.getters.chatOpen:a.isOpenProp),y=p(""),I=p(!1),T=p(!1);p(!1);const l=p(null),H=async t=>{if(!(!t||t==="main_agent"))try{const e=await Z.get(`/ai/agent?agentTag=${t}`);e.data?l.value=e.data:l.value={name:a.name||"BITCAT AI Agent",agentTag:"main_agent",description:a.description||"Frame AI Agent",avatar:a.imgUrl||26}}catch(e){console.error("Error fetching agent data:",e)}},m=c(()=>l.value?{name:a.name||l.value.name||"BITCAT AI Agent",agentTag:a.agentTag||"main_agent",description:a.description||l.value.description||"Frame AI Agent",avatar:a.imgUrl||l.value.avatar||26}:{name:a.name||"BITCAT AI Agent",agentTag:a.agentTag||"main_agent",description:a.description||"Frame AI Agent",avatar:a.imgUrl||26}),V=()=>{a.poweredBy==="Powered by Bitcat"&&window.open("https://bitcat.fun/ai-agents","_blank")},$=p(!1),q=p(!1),h=p(!1),n=p({}),U=c(()=>{let t=m.value.agentTag;if(m.value.agentTag==="token_agent"){const r=new URLSearchParams(window.location.search).get("tokenId");r&&(t=`token_agent_${r}`)}return(n.value[t]||[]).slice(-20)}),z=t=>a.imgUrl?a.imgUrl:typeof t=="string"&&t.startsWith("http")?t:`https://bitcat.fun/data/ai-agents/bitcat-ai-agent-avatar-${t}.png`,D=()=>{},S=p(null),b=(t,e,i)=>{let r=m.value.agentTag;if(m.value.agentTag==="token_agent"){const A=new URLSearchParams(window.location.search).get("tokenId");A&&(r=`token_agent_${A}`)}if(n.value[r]||(n.value[r]=[]),i){const u=n.value[r].findIndex(A=>A.id===i);u!==-1&&(n.value[r][u].content==="..."&&(n.value[r][u].content=""),n.value[r][u].content.endsWith(t)||(n.value[r][u].content+=t))}else i=Math.random().toString(36).substr(2,9),n.value[r].push({id:i,content:t,type:e,timestamp:Date.now()});return n.value[r].length>20&&(n.value[r]=n.value[r].slice(-20)),localStorage.setItem("chatHistory",JSON.stringify(n.value)),B(),i},B=()=>{rt(()=>{const t=document.querySelector(".chat-messages");t&&(t.scrollTop=t.scrollHeight)})},x=async()=>{if(!y.value.trim()||h.value)return;h.value=!0;const t=y.value;y.value="",b(t,"user");const e=b("...","agent");try{s.getters.socket.emit("user-reply",{messageId:e,message:t,agentTag:m.value.agentTag})}catch(i){console.error("Error sending message:",i),h.value=!1}},J=()=>{s.getters.socket.on("ai-reply",t=>{const{message:e,agentTag:i,messageId:r}=t;i===m.value.agentTag&&b(e,"agent",r),h.value=!1}),s.getters.socket.on("ai-error",t=>{const{message:e,agentTag:i,messageId:r}=t;i===m.value.agentTag&&b(e,"agent",r),h.value=!1})},F=async()=>{await s.dispatch("initSocket")},R=()=>{T.value=!T.value},L=()=>{I.value=window.innerWidth<=768},K=()=>{localStorage.getItem("bitcat_ai_visited")||($.value=!0)},G=()=>{localStorage.getItem("agentTooltipShown")||(q.value=!0)};tt(async()=>{T.value=a.theme==="lite",s.commit("LOAD_CHAT_AGENTS"),a.agentTag&&await H(a.agentTag),s.commit("SELECT_AGENT",{name:l.value.name||a.name||"BITCAT AI Agent",agentTag:a.agentTag||"main_agent",description:a.description||l.value.description||"Frame AI Agent",avatar:a.imgUrl||l.value.avatar||26}),a.withButton||await F();const t=localStorage.getItem("chatHistory");t&&(n.value=JSON.parse(t));let e=a.agentTag||"main_agent";if(a.agentTag==="token_agent"){const r=new URLSearchParams(window.location.search).get("tokenId");r&&(e=`token_agent_${r}`)}if(!n.value[e]||n.value[e].length===0){const i=a.description||l.value&&l.value.description||"Hello! I am your AI Agent.";n.value[e]=[{id:Math.random().toString(36).substr(2,9),content:i,type:"agent",timestamp:Date.now()}],localStorage.setItem("chatHistory",JSON.stringify(n.value))}B(),L(),window.addEventListener("resize",L),K(),G()}),et(()=>{s.dispatch("cleanup")});const W=c(()=>s.getters.isSocketConnected);return _(W,t=>{t&&J()}),_(()=>m.value,()=>{B()}),_(()=>f.value,async()=>{f.value&&(s.getters.isSocketConnected||await F()),B()}),_(()=>s.getters.currentAgent,t=>{if(t&&t.agentTag){const e=localStorage.getItem("chatHistory");if(e){const r=JSON.parse(e);n.value=r;let u=t.agentTag;if(t.agentTag==="token_agent"){const N=new URLSearchParams(window.location.search).get("tokenId");N&&(u=`token_agent_${N}`)}U.value=r[u]||[]}const i=JSON.parse(localStorage.getItem("agentInfo")||"{}");i[t.agentTag]||(i[t.agentTag]={name:t.name,agentTag:t.agentTag,avatar:t.avatar},localStorage.setItem("agentInfo",JSON.stringify(i)))}},{immediate:!0}),_(()=>C.name,t=>{S.value=null,f.value&&setTimeout(()=>{},250)}),_(f,t=>{}),(t,e)=>(d(),g("div",{class:w(["ai-agent-container",{"light-theme":T.value,"is-absolute":v.isAbsolute,"is-fullscreen":v.isFullScreen}]),style:st({zIndex:v.isAbsolute?1e3:v.zIndex})},[f.value?(d(),g("div",{key:0,class:w(["chat-window do-invert fullsize-chat",{mobile:I.value&&v.withButton}]),style:{height:"100vh",width:"100vw","max-height":"none"}},[o("div",mt,[o("div",lt,[o("button",pt,[o("img",{src:z(m.value.avatar),alt:"AI Agent",class:"header-avatar no-invert"},null,8,ct)]),o("div",ut,[o("h3",gt,P(m.value.name),1),o("button",{class:"agent-tag-button",onClick:e[0]||(e[0]=i=>V())},P(v.poweredBy),1)])]),o("div",dt,[o("button",{class:"theme-toggle",onClick:R},[o("i",{class:w(["fas",T.value?"fa-moon":"fa-sun"])},null,2)])])]),o("div",vt,[m.value.agentTag==="main_agent"?(d(),g("div",ht,[o("div",ft,[o("div",yt,[m.value.agentTag==="main_agent"?(d(),g("p",Tt,"Hello! How are you today?👋 I am your BITCAT AI Agent. Let me introduce you to our Universe! 🚀")):k("",!0),e[3]||(e[3]=o("div",{class:"tech-decoration"},[o("div",{class:"tech-line"}),o("div",{class:"tech-dot"})],-1))])])])):k("",!0),S.value&&m.value.agentTag==="main_agent"?(d(),g("div",_t,[o("div",wt,[o("div",At,[o("p",null,[e[4]||(e[4]=M("About page ")),e[5]||(e[5]=o("small",null,"(are you here)",-1)),e[6]||(e[6]=o("br",null,null,-1)),M(P(S.value.title),1)]),o("p",{onClick:D,innerHTML:S.value.description},null,8,kt),e[7]||(e[7]=o("p",null,"Let me know if you have any questions",-1)),e[8]||(e[8]=o("div",{class:"tech-decoration"},[o("div",{class:"tech-line"}),o("div",{class:"tech-dot"})],-1))])])])):k("",!0),(d(!0),g(at,null,ot(U.value,(i,r)=>(d(),g("div",{key:r,class:w(["message",i.type==="user"?"user-message":"agent-message"])},[o("div",It,[o("div",{class:w({"typing-animation":i.type==="agent"})},[o("p",null,P(i.content),1),i.type==="agent"?(d(),g("div",St,e[9]||(e[9]=[o("div",{class:"tech-line"},null,-1),o("div",{class:"tech-dot"},null,-1)]))):k("",!0)],2)])],2))),128))]),o("div",bt,[o("div",Bt,[it(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>y.value=i),onKeyup:e[2]||(e[2]=X(i=>!h.value&&x(),["enter"])),placeholder:"Message..."},null,544),[[Q,y.value]])]),o("button",{onClick:x,class:"send-button",disabled:h.value},[o("i",{class:w(["fas",h.value?"fa-spinner fa-spin":"fa-paper-plane"])},null,2)],8,Pt)])],2)):k("",!0)],6))}},Ht=O(Ct,[["__scopeId","data-v-c81a7592"]]),Ut={class:"ai-frame-root"},xt={__name:"AiAgentFramePage",setup(v){const a=E(),s=c(()=>a.query.imgUrl||""),C=c(()=>a.query.agentTag||""),f=c(()=>a.query.name||""),y=c(()=>a.query.theme||"dark"),I=c(()=>a.query.description||""),T=c(()=>a.query.poweredBy||"Powered by Bitcat");return(l,H)=>(d(),g("div",Ut,[nt(Ht,{"with-button":!1,"is-open-prop":!0,"is-absolute":!1,"is-full-screen":!0,"img-url":s.value,"agent-tag":C.value,name:f.value,theme:y.value,description:I.value,style:{width:"100vw",height:"100vh"},"powered-by":T.value},null,8,["img-url","agent-tag","name","theme","description","powered-by"])]))}},Ko=O(xt,[["__scopeId","data-v-b17eb507"]]);export{Ko as default};
