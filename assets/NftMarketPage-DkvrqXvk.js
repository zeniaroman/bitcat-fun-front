const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/solana-vendors-DGPAp7Fj.js","assets/vendor-buffer-DVXvU5G6.js","assets/vendor-base64-js-C2zTC7ec.js","assets/vendor-ieee754-vIlwft-x.js","assets/vendor-events-cQ9mhZQJ.js","assets/vendor-process-DXjpGiAn.js","assets/vendor-lodash.isequal-D20p4pc-.js","assets/vendor-elliptic-BTxzAQL_.js","assets/vendor-minimalistic-assert-OF9c2MWr.js","assets/vendor-minimalistic-crypto-utils-DpWPKLSp.js","assets/vendor-brorand-6pV8Y5jC.js","assets/vendor-crypto-browserify-NMg_40A5.js","assets/vendor-randombytes-ndKo2FAH.js","assets/vendor-safe-buffer-BPihLaHX.js","assets/vendor-create-hash-BsmGkCgx.js","assets/vendor-inherits-BICa84dG.js","assets/vendor-md5.js-BmCTTIue.js","assets/vendor-hash-base-CXljNKss.js","assets/vendor-readable-stream-BpYOL4VF.js","assets/vendor-asn1.js-Cgb4HcA4.js","assets/vendor-util-deprecate-C5bwERXh.js","assets/vendor-string_decoder-CzqD1_ea.js","assets/vendor-ripemd160-B-g9_ZaO.js","assets/vendor-sha.js-C_Iv65sP.js","assets/vendor-cipher-base-CVoreX1z.js","assets/vendor-stream-browserify-BiXhMpOM.js","assets/vendor-create-hmac-Dt8PQ7js.js","assets/vendor-browserify-sign-DLX2f2Lw.js","assets/vendor-process-nextick-args-DZA8cFXf.js","assets/vendor-core-util-is-OG-hh3cz.js","assets/vendor-browserify-rsa-DRghgnJS.js","assets/vendor-bn.js-CN51n21Z.js","assets/vendor-parse-asn1-CnRUGrVC.js","assets/vendor-evp_bytestokey-V5JLH1pP.js","assets/vendor-browserify-aes-Dzp1Wr7h.js","assets/vendor-buffer-xor-BGVZWPAd.js","assets/vendor-pbkdf2-D8c51p7I.js","assets/vendor-browserify-cipher-CRpPeA_V.js","assets/vendor-browserify-des-7ZFmx5Md.js","assets/vendor-des.js-DyWMuwdI.js","assets/vendor-diffie-hellman-CdruneMD.js","assets/vendor-miller-rabin-D60nYGZr.js","assets/vendor-create-ecdh-D3sJE6Oq.js","assets/vendor-public-encrypt-BRl7BMPZ.js","assets/vendor-randomfill-PyDjCq6P.js","assets/vendor-hash.js-Dda3EUYz.js","assets/vendor-hmac-drbg-Ss9liF53.js","assets/vendor-vue/runtime-dom-Ll8vq9eS.js","assets/vendor-vue/runtime-core-CL52-QWR.js","assets/vendor-vue/reactivity-CqT5sv9X.js","assets/vendor-vue/shared-lLteBOIO.js","assets/vendor-vueuse/core-Dowf-keF.js","assets/vendor-vueuse/shared-D4hqHlE2.js","assets/vendor-eventemitter3-C1FPriCL.js","assets/vendor-bignumber.js-Dj_rIxHg.js","assets/vendor-bigint-buffer-5mUCZ2jv.js","assets/vendor-noble/ed25519-DHS8bCE8.js","assets/vendor-node-fetch-DFwHyKwz.js","assets/vendor-url-Fv_L5Bhg.js","assets/vendor-qs-CKXrMD_V.js","assets/vendor-side-channel-CjkecZmv.js","assets/vendor-es-errors-CxTyLFAO.js","assets/vendor-object-inspect-C0kqJKki.js","assets/vendor-side-channel-list-DJbPV7dX.js","assets/vendor-side-channel-map-OCAkmCSB.js","assets/vendor-get-intrinsic-Ci-jyTpD.js","assets/vendor-es-object-atoms-BR76m4z7.js","assets/vendor-math-intrinsics-DP1tGiab.js","assets/vendor-gopd-C1lCZ5Qs.js","assets/vendor-es-define-property-D_7cP-M3.js","assets/vendor-has-symbols-CySAGvJ4.js","assets/vendor-get-proto-BI0zWv-p.js","assets/vendor-dunder-proto-5sdYuMkY.js","assets/vendor-call-bind-apply-helpers-BfAPCzjd.js","assets/vendor-function-bind-CHqF18-c.js","assets/vendor-hasown-CH2RbkDu.js","assets/vendor-call-bound-nPIHF2bX.js","assets/vendor-side-channel-weakmap-D938crsm.js","assets/vendor-whatwg-url-BNoC3hI6.js","assets/vendor-webidl-conversions-DuBT_cRJ.js","assets/vendor-punycode-BGZJxaHx.js","assets/vendor-tr46-_6nBz5KS.js","assets/vendor-mime-DOJa-gVj.js","assets/vendor-assert-CCtLV3vt.js","assets/vendor-util-BEO2nGWh.js","assets/vendor-is-arguments-D-oLGwWh.js","assets/vendor-has-tostringtag-BU9GnA_1.js","assets/vendor-is-generator-function-Bk_W3rfd.js","assets/vendor-safe-regex-test-BtqTbUmV.js","assets/vendor-is-regex-BKTFpgjH.js","assets/vendor-which-typed-array-Bufg-IXZ.js","assets/vendor-for-each-HvIZAWYy.js","assets/vendor-is-callable-BYFz_UGF.js","assets/vendor-available-typed-arrays-uQGnJldC.js","assets/vendor-possible-typed-array-names-BKRybAhF.js","assets/vendor-call-bind-3YpglFCb.js","assets/vendor-set-function-length-Cm7PFPrZ.js","assets/vendor-define-data-property-BppnLwnj.js","assets/vendor-has-property-descriptors-ChC8uhsk.js","assets/vendor-is-typed-array-CZaxorcA.js","assets/vendor-object.assign-D0NKsUk4.js","assets/vendor-object-keys-BRu_Tray.js","assets/vendor-object-is-DkNyiNMZ.js","assets/vendor-define-properties-CgTwYkbs.js","assets/vendor-is-nan-BtAA6g8u.js","assets/vendor-debug-DLVl9QA3.js","assets/vendor-ms-CzQ2E3wO.js","assets/vendor-babel/runtime-w7AU6ifp.js","assets/vendor-js-sha3-DkKfOMXT.js","assets/vendor-typescript-collections-DaJ0MJpz.js","assets/vendor-lodash.clonedeep-C3jeG2fR.js","assets/vendor-ansicolors-BFAL4nhq.js","assets/vendor-bs58-DhqqakFZ.js","assets/vendor-base-x-BHV1Xppf.js","assets/vendor-base64url-D1J1q9RC.js","assets/vendor-arbundles-CR3XhIxB.js","assets/vendor-async-retry-DWdC6xTk.js","assets/vendor-retry-ByBYrtbW.js","assets/vendor-irys/arweave-CO_npObX.js","assets/vendor-axios-Hz4xvOoZ.js","assets/vendor-safer-buffer-CIAg7E_-.js","assets/vendor-secp256k1-gx_3s_gH.js","assets/vendor-keccak-Bl_8Z6TM.js","assets/vendor-ethersproject/bytes-BFUO92dS.js","assets/vendor-ethersproject/logger-BIOSViGG.js","assets/vendor-ethersproject/wallet-_-D8aoNy.js","assets/vendor-ethersproject/address-C-94Rlzo.js","assets/vendor-ethersproject/keccak256-BpI13PIi.js","assets/vendor-ethersproject/rlp-L8r_OHwd.js","assets/vendor-ethersproject/bignumber-DuyZ-PBD.js","assets/vendor-ethersproject/abstract-provider-BJATZ19F.js","assets/vendor-ethersproject/properties-Bism-GXA.js","assets/vendor-ethersproject/abstract-signer-vaofOY7d.js","assets/vendor-ethersproject/strings-BqJBhWqj.js","assets/vendor-ethersproject/hdnode-De1GriMn.js","assets/vendor-ethersproject/basex-GbQJAx3e.js","assets/vendor-ethersproject/signing-key-DZY4IiDE.js","assets/vendor-ethersproject/sha2-C3DRumhS.js","assets/vendor-ethersproject/wordlists-Bgp1_tq6.js","assets/vendor-ethersproject/pbkdf2-RF0eycJB.js","assets/vendor-ethersproject/json-wallets-DmRppK22.js","assets/vendor-aes-js-CVO7b-af.js","assets/vendor-scrypt-js-pU08l4Iy.js","assets/vendor-ethersproject/random-UwHXQyRf.js","assets/vendor-ethersproject/hash-CaQkUgof.js","assets/vendor-ethersproject/transactions-DgEmUiir.js","assets/vendor-irys/sdk-zMcAFY0m.js","assets/vendor-irys/query-BJ-9co3k.js","assets/vendor-near-js/crypto-DYaHgGqH.js","assets/vendor-borsh-uT6VLZDJ.js","assets/vendor-text-encoding-utf-8-CyyJ4wbt.js","assets/vendor-tweetnacl-DH0kfJ7g.js","assets/vendor-crypto-js-TDtrdbi3.js","assets/vendor-near-js/types-BW5UzBhQ.js","assets/vendor-near-js/keystores-browser-C7Ipq7jt.js","assets/vendor-near-js/keystores-DZ_AKmgs.js","assets/vendor-near-js/transactions-CNW8gb_X.js","assets/vendor-js-sha256-J9Bkl3or.js","assets/vendor-ethersproject/contracts-BfB5cMkz.js","assets/vendor-ethersproject/abi-BZPj2eRn.js","assets/vendor-ethersproject/constants-DnPC-4nq.js","assets/vendor-aptos-COdaePwy.js","assets/vendor-scure/base-BmqIkRj2.js","assets/vendor-supercharge/promise-pool-CxlJr3BL.js","assets/vendor-noble/curves-Bi3lEKLw.js","assets/vendor-noble/hashes-DJrKYuPd.js","assets/vendor-jayson-C-feTq4c.js","assets/vendor-uuid-42xqzRtG.js","assets/vendor-rpc-websockets-CS_NMCMZ.js","assets/solana-vendors-BSJFAtn5.css"])))=>i.map(i=>d[i]);
import{u as _t,b as C,s as $,_ as pt,C as wt,M as bt,w as vt,c as yt}from"./solana-vendors-DGPAp7Fj.js";import{a as ht}from"./vendor-vue-router-PmQVL-xb.js";import{u as kt}from"./vendor-vuex-KmQPsw4D.js";import{a as y}from"./vendor-axios-Hz4xvOoZ.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as c,i as e,k as w,o as r,F as it,l as st,H as G,b as R,m as Lt,c as tt,E as Pt,a as et,r as W}from"./vendor-vue/runtime-core-CL52-QWR.js";import{b as V,t as p}from"./vendor-vue/shared-lLteBOIO.js";import{v as Q}from"./vendor-vue/runtime-dom-Ll8vq9eS.js";import{C as Ct,P as Nt}from"./CancelListingModal-C1HCKVes.js";import{r as f}from"./vendor-vue/reactivity-CqT5sv9X.js";import"./vendor-buffer-DVXvU5G6.js";import"./vendor-base64-js-C2zTC7ec.js";import"./vendor-ieee754-vIlwft-x.js";import"./vendor-events-cQ9mhZQJ.js";import"./vendor-process-DXjpGiAn.js";import"./vendor-lodash.isequal-D20p4pc-.js";import"./vendor-elliptic-BTxzAQL_.js";import"./vendor-minimalistic-assert-OF9c2MWr.js";import"./vendor-minimalistic-crypto-utils-DpWPKLSp.js";import"./vendor-brorand-6pV8Y5jC.js";import"./vendor-crypto-browserify-NMg_40A5.js";import"./vendor-randombytes-ndKo2FAH.js";import"./vendor-safe-buffer-BPihLaHX.js";import"./vendor-create-hash-BsmGkCgx.js";import"./vendor-inherits-BICa84dG.js";import"./vendor-md5.js-BmCTTIue.js";import"./vendor-hash-base-CXljNKss.js";import"./vendor-readable-stream-BpYOL4VF.js";import"./vendor-asn1.js-Cgb4HcA4.js";import"./vendor-util-deprecate-C5bwERXh.js";import"./vendor-string_decoder-CzqD1_ea.js";import"./vendor-ripemd160-B-g9_ZaO.js";import"./vendor-sha.js-C_Iv65sP.js";import"./vendor-cipher-base-CVoreX1z.js";import"./vendor-stream-browserify-BiXhMpOM.js";import"./vendor-create-hmac-Dt8PQ7js.js";import"./vendor-browserify-sign-DLX2f2Lw.js";import"./vendor-process-nextick-args-DZA8cFXf.js";import"./vendor-core-util-is-OG-hh3cz.js";import"./vendor-browserify-rsa-DRghgnJS.js";import"./vendor-bn.js-CN51n21Z.js";import"./vendor-parse-asn1-CnRUGrVC.js";import"./vendor-evp_bytestokey-V5JLH1pP.js";import"./vendor-browserify-aes-Dzp1Wr7h.js";import"./vendor-buffer-xor-BGVZWPAd.js";import"./vendor-pbkdf2-D8c51p7I.js";import"./vendor-browserify-cipher-CRpPeA_V.js";import"./vendor-browserify-des-7ZFmx5Md.js";import"./vendor-des.js-DyWMuwdI.js";import"./vendor-diffie-hellman-CdruneMD.js";import"./vendor-miller-rabin-D60nYGZr.js";import"./vendor-create-ecdh-D3sJE6Oq.js";import"./vendor-public-encrypt-BRl7BMPZ.js";import"./vendor-randomfill-PyDjCq6P.js";import"./vendor-hash.js-Dda3EUYz.js";import"./vendor-hmac-drbg-Ss9liF53.js";import"./vendor-vueuse/core-Dowf-keF.js";import"./vendor-vueuse/shared-D4hqHlE2.js";import"./vendor-eventemitter3-C1FPriCL.js";import"./vendor-bignumber.js-Dj_rIxHg.js";import"./vendor-bigint-buffer-5mUCZ2jv.js";import"./vendor-noble/ed25519-DHS8bCE8.js";import"./vendor-node-fetch-DFwHyKwz.js";import"./vendor-url-Fv_L5Bhg.js";import"./vendor-qs-CKXrMD_V.js";import"./vendor-side-channel-CjkecZmv.js";import"./vendor-es-errors-CxTyLFAO.js";import"./vendor-object-inspect-C0kqJKki.js";import"./vendor-side-channel-list-DJbPV7dX.js";import"./vendor-side-channel-map-OCAkmCSB.js";import"./vendor-get-intrinsic-Ci-jyTpD.js";import"./vendor-es-object-atoms-BR76m4z7.js";import"./vendor-math-intrinsics-DP1tGiab.js";import"./vendor-gopd-C1lCZ5Qs.js";import"./vendor-es-define-property-D_7cP-M3.js";import"./vendor-has-symbols-CySAGvJ4.js";import"./vendor-get-proto-BI0zWv-p.js";import"./vendor-dunder-proto-5sdYuMkY.js";import"./vendor-call-bind-apply-helpers-BfAPCzjd.js";import"./vendor-function-bind-CHqF18-c.js";import"./vendor-hasown-CH2RbkDu.js";import"./vendor-call-bound-nPIHF2bX.js";import"./vendor-side-channel-weakmap-D938crsm.js";import"./vendor-whatwg-url-BNoC3hI6.js";import"./vendor-webidl-conversions-DuBT_cRJ.js";import"./vendor-punycode-BGZJxaHx.js";import"./vendor-tr46-_6nBz5KS.js";import"./vendor-mime-DOJa-gVj.js";import"./vendor-assert-CCtLV3vt.js";import"./vendor-util-BEO2nGWh.js";import"./vendor-is-arguments-D-oLGwWh.js";import"./vendor-has-tostringtag-BU9GnA_1.js";import"./vendor-is-generator-function-Bk_W3rfd.js";import"./vendor-safe-regex-test-BtqTbUmV.js";import"./vendor-is-regex-BKTFpgjH.js";import"./vendor-which-typed-array-Bufg-IXZ.js";import"./vendor-for-each-HvIZAWYy.js";import"./vendor-is-callable-BYFz_UGF.js";import"./vendor-available-typed-arrays-uQGnJldC.js";import"./vendor-possible-typed-array-names-BKRybAhF.js";import"./vendor-call-bind-3YpglFCb.js";import"./vendor-set-function-length-Cm7PFPrZ.js";import"./vendor-define-data-property-BppnLwnj.js";import"./vendor-has-property-descriptors-ChC8uhsk.js";import"./vendor-is-typed-array-CZaxorcA.js";import"./vendor-object.assign-D0NKsUk4.js";import"./vendor-object-keys-BRu_Tray.js";import"./vendor-object-is-DkNyiNMZ.js";import"./vendor-define-properties-CgTwYkbs.js";import"./vendor-is-nan-BtAA6g8u.js";import"./vendor-debug-DLVl9QA3.js";import"./vendor-ms-CzQ2E3wO.js";import"./vendor-babel/runtime-w7AU6ifp.js";import"./vendor-js-sha3-DkKfOMXT.js";import"./vendor-typescript-collections-DaJ0MJpz.js";import"./vendor-lodash.clonedeep-C3jeG2fR.js";import"./vendor-ansicolors-BFAL4nhq.js";import"./vendor-bs58-DhqqakFZ.js";import"./vendor-base-x-BHV1Xppf.js";import"./vendor-base64url-D1J1q9RC.js";import"./vendor-arbundles-CR3XhIxB.js";import"./vendor-async-retry-DWdC6xTk.js";import"./vendor-retry-ByBYrtbW.js";import"./vendor-irys/arweave-CO_npObX.js";import"./vendor-safer-buffer-CIAg7E_-.js";import"./vendor-secp256k1-gx_3s_gH.js";import"./vendor-keccak-Bl_8Z6TM.js";import"./vendor-ethersproject/bytes-BFUO92dS.js";import"./vendor-ethersproject/logger-BIOSViGG.js";import"./vendor-ethersproject/wallet-_-D8aoNy.js";import"./vendor-ethersproject/address-C-94Rlzo.js";import"./vendor-ethersproject/keccak256-BpI13PIi.js";import"./vendor-ethersproject/rlp-L8r_OHwd.js";import"./vendor-ethersproject/bignumber-DuyZ-PBD.js";import"./vendor-ethersproject/abstract-provider-BJATZ19F.js";import"./vendor-ethersproject/properties-Bism-GXA.js";import"./vendor-ethersproject/abstract-signer-vaofOY7d.js";import"./vendor-ethersproject/strings-BqJBhWqj.js";import"./vendor-ethersproject/hdnode-De1GriMn.js";import"./vendor-ethersproject/basex-GbQJAx3e.js";import"./vendor-ethersproject/signing-key-DZY4IiDE.js";import"./vendor-ethersproject/sha2-C3DRumhS.js";import"./vendor-ethersproject/wordlists-Bgp1_tq6.js";import"./vendor-ethersproject/pbkdf2-RF0eycJB.js";import"./vendor-ethersproject/json-wallets-DmRppK22.js";import"./vendor-aes-js-CVO7b-af.js";import"./vendor-scrypt-js-pU08l4Iy.js";import"./vendor-ethersproject/random-UwHXQyRf.js";import"./vendor-ethersproject/hash-CaQkUgof.js";import"./vendor-ethersproject/transactions-DgEmUiir.js";import"./vendor-irys/sdk-zMcAFY0m.js";import"./vendor-irys/query-BJ-9co3k.js";import"./vendor-near-js/crypto-DYaHgGqH.js";import"./vendor-borsh-uT6VLZDJ.js";import"./vendor-text-encoding-utf-8-CyyJ4wbt.js";import"./vendor-tweetnacl-DH0kfJ7g.js";import"./vendor-crypto-js-TDtrdbi3.js";import"./vendor-near-js/types-BW5UzBhQ.js";import"./vendor-near-js/keystores-browser-C7Ipq7jt.js";import"./vendor-near-js/keystores-DZ_AKmgs.js";import"./vendor-near-js/transactions-CNW8gb_X.js";import"./vendor-js-sha256-J9Bkl3or.js";import"./vendor-ethersproject/contracts-BfB5cMkz.js";import"./vendor-ethersproject/abi-BZPj2eRn.js";import"./vendor-ethersproject/constants-DnPC-4nq.js";import"./vendor-aptos-COdaePwy.js";import"./vendor-scure/base-BmqIkRj2.js";import"./vendor-supercharge/promise-pool-CxlJr3BL.js";import"./vendor-noble/curves-Bi3lEKLw.js";import"./vendor-noble/hashes-DJrKYuPd.js";import"./vendor-jayson-C-feTq4c.js";import"./vendor-uuid-42xqzRtG.js";import"./vendor-rpc-websockets-CS_NMCMZ.js";import"./vendor-vue/devtools-api-Cow_pXkh.js";const Tt={name:"NftListingCard",props:{listing:{type:Object,required:!0},walletAddress:{type:String,default:""},connected:{type:Boolean,default:!1}},computed:{canBid(){return this.connected&&this.listing.status==="active"&&this.listing.sellerWallet!==this.walletAddress},canCancel(){return this.connected&&this.listing.status==="active"&&this.listing.sellerWallet===this.walletAddress}},methods:{formatPrice(n){return parseFloat(n).toFixed(3)},formatTimeRemaining(n){const t=new Date(n),a=new Date;if(t<=a)return"Ended";const s=t-a,g=Math.floor(s/(1e3*60*60*24)),l=Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),o=Math.floor(s%(1e3*60*60)/(1e3*60));return g>0?`${g}d ${l}h`:l>0?`${l}h ${o}m`:`${o}m`},shortenAddress(n){return n?`${n.substring(0,4)}...${n.substring(n.length-4)}`:""}}},At={class:"nft-card"},Ft={class:"nft-card__image-container"},Mt=["src","alt"],St={key:1,class:"nft-card__image-placeholder"},Bt={class:"nft-card__content"},Et={class:"nft-card__title"},Dt={class:"nft-card__address"},xt={key:0,class:"nft-card__seller"},Ut={class:"nft-card__seller-value"},Rt={class:"nft-card__price-container"},Wt={class:"nft-card__price-block"},Vt={class:"nft-card__price-value"},Ht={key:0,class:"nft-card__price-block"},Ot={class:"nft-card__price-value"},It={class:"nft-card__time-block"},Kt={class:"nft-card__time-value"},Yt={class:"nft-card__actions"};function qt(n,t,a,s,g,l){return r(),c("div",At,[e("div",Ft,[a.listing.imageUrl?(r(),c("img",{key:0,src:a.listing.imageUrl,alt:a.listing.name,class:"nft-card__image"},null,8,Mt)):(r(),c("div",St,t[3]||(t[3]=[e("i",{class:"fas fa-image nft-card__placeholder-icon"},null,-1)]))),a.listing.status!=="active"?(r(),c("div",{key:2,class:V(["nft-card__status",{"nft-card__status--sold":a.listing.status==="sold","nft-card__status--cancelled":a.listing.status==="cancelled","nft-card__status--expired":a.listing.status==="expired"}])},p(a.listing.status),3)):w("",!0)]),e("div",Bt,[e("h3",Et,p(a.listing.name||`NFT #${a.listing.mintAddress.substring(0,8)}`),1),e("p",Dt,p(l.shortenAddress(a.listing.mintAddress)),1),a.listing.userTag?(r(),c("div",xt,[t[4]||(t[4]=e("p",{class:"nft-card__seller-label"},"Seller:",-1)),e("p",Ut,p(a.listing.userTag),1)])):w("",!0),e("div",Rt,[e("div",Wt,[t[5]||(t[5]=e("p",{class:"nft-card__price-label"},"Price",-1)),e("p",Vt,p(l.formatPrice(a.listing.initialPrice))+" SOL",1)]),a.listing.instantPrice?(r(),c("div",Ht,[t[6]||(t[6]=e("p",{class:"nft-card__price-label"},"Buy Now",-1)),e("p",Ot,p(l.formatPrice(a.listing.instantPrice))+" SOL",1)])):w("",!0)]),e("div",It,[t[7]||(t[7]=e("p",{class:"nft-card__time-label"},"Ends in",-1)),e("p",Kt,p(l.formatTimeRemaining(a.listing.endTime)),1)]),e("div",Yt,[e("button",{onClick:t[0]||(t[0]=o=>n.$emit("view",a.listing)),class:"nft-card__button nft-card__button--view"}," View Details "),l.canBid?(r(),c("button",{key:0,onClick:t[1]||(t[1]=o=>n.$emit("bid",a.listing)),class:"nft-card__button nft-card__button--bid"}," Place Bid ")):w("",!0),l.canCancel?(r(),c("button",{key:1,onClick:t[2]||(t[2]=o=>n.$emit("cancel",a.listing)),class:"nft-card__button nft-card__button--cancel"}," Cancel ")):w("",!0)])])])}const zt=J(Tt,[["render",qt],["__scopeId","data-v-6e5e9d42"]]),jt={name:"CreateListingModal",props:{userNfts:{type:Array,required:!0},isLoading:{type:Boolean,default:!1},isSubmitting:{type:Boolean,default:!1}},data(){return{selectedNft:null,form:{initialPrice:"",instantPrice:"",endDate:""}}},computed:{minEndDate(){const n=new Date;return n.setHours(n.getHours()+1),n.toISOString().slice(0,16)},isFormValid(){return this.selectedNft&&this.form.initialPrice>0&&this.form.endDate&&new Date(this.form.endDate)>new Date}},methods:{selectNft(n){if(console.log("Selecting NFT:",n),!n||!n.mintAddress){console.error("Invalid NFT selected:",n);return}this.selectedNft=n,console.log("Selected NFT:",this.selectedNft)},calculateFee(){return this.form.initialPrice?(parseFloat(this.form.initialPrice)*.05).toFixed(3):"0"},calculateReceived(){if(!this.form.initialPrice)return"0";const n=parseFloat(this.form.initialPrice),t=n*.05;return(n-t).toFixed(3)},createListingManually(){if(!this.isFormValid)return;console.log("Creating listing for NFT:",this.selectedNft);const n={mintAddress:this.selectedNft.mintAddress,name:this.selectedNft.name||"",imageUrl:this.selectedNft.imageUrl||"",metadataUri:this.selectedNft.metadataUri||""};console.log("Sending NFT data to parent:",n),this.$emit("submit",{nft:n,initialPrice:parseFloat(this.form.initialPrice),instantPrice:this.form.instantPrice?parseFloat(this.form.instantPrice):null,endDate:this.form.endDate})}}},Gt={class:"create-listing-modal"},Qt={class:"create-listing-modal__box"},Jt={key:0,class:"create-listing-modal__loader-container"},Xt={key:1,class:"create-listing-modal__empty"},Zt={key:2},$t={class:"create-listing-modal__section"},te={class:"create-listing-modal__nft-grid"},ee=["onClick"],ie={class:"create-listing-modal__nft-image-container"},se=["src","alt"],ne={key:1,class:"create-listing-modal__nft-placeholder"},ae={class:"create-listing-modal__nft-info"},oe={class:"create-listing-modal__nft-name"},re={class:"create-listing-modal__form"},le={class:"create-listing-modal__form-group"},ce={class:"create-listing-modal__form-group"},de={class:"create-listing-modal__form-group"},me=["min"],ge={class:"create-listing-modal__fee-summary"},ue={class:"create-listing-modal__fee-row"},fe={class:"create-listing-modal__fee-row create-listing-modal__fee-row--total"},_e={class:"create-listing-modal__button-group"},pe=["disabled"];function we(n,t,a,s,g,l){return r(),c("div",Gt,[e("div",Qt,[t[19]||(t[19]=e("h3",{class:"create-listing-modal__title"},"Create NFT Listing",-1)),a.isLoading?(r(),c("div",Jt,t[6]||(t[6]=[e("div",{class:"create-listing-modal__loader"},null,-1)]))):a.userNfts.length===0?(r(),c("div",Xt,t[7]||(t[7]=[e("p",{class:"create-listing-modal__empty-title"},"You don't have any NFTs to list.",-1),e("p",{class:"create-listing-modal__empty-subtitle"},"Mint or acquire NFTs first before creating a listing.",-1)]))):(r(),c("div",Zt,[e("div",$t,[t[9]||(t[9]=e("label",{class:"create-listing-modal__label"},"Select NFT",-1)),e("div",te,[(r(!0),c(it,null,st(a.userNfts,o=>(r(),c("div",{key:o.mintAddress,onClick:h=>l.selectNft(o),class:V(["create-listing-modal__nft-item",{"create-listing-modal__nft-item--selected":g.selectedNft&&g.selectedNft.mintAddress===o.mintAddress}])},[e("div",ie,[o.imageUrl?(r(),c("img",{key:0,src:o.imageUrl,alt:o.name,class:"create-listing-modal__nft-image"},null,8,se)):(r(),c("div",ne,t[8]||(t[8]=[e("i",{class:"fas fa-image create-listing-modal__nft-placeholder-icon"},null,-1)])))]),e("div",ae,[e("p",oe,p(o.name||`NFT #${o.mintAddress.substring(0,8)}`),1)])],10,ee))),128))])]),e("div",re,[e("div",le,[t[10]||(t[10]=e("label",{class:"create-listing-modal__form-label"},[e("span",{class:"create-listing-modal__form-label-text"},"Initial Price (SOL)")],-1)),G(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>g.form.initialPrice=o),type:"number",step:"0.01",min:"0.01",placeholder:"Enter initial price",class:"create-listing-modal__form-input",required:""},null,512),[[Q,g.form.initialPrice]]),t[11]||(t[11]=e("span",{class:"create-listing-modal__form-help"},"Minimum price for the auction",-1))]),e("div",ce,[t[12]||(t[12]=e("label",{class:"create-listing-modal__form-label"},[e("span",{class:"create-listing-modal__form-label-text"},"Instant Buy Price (SOL, optional)")],-1)),G(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>g.form.instantPrice=o),type:"number",step:"0.01",min:"0",placeholder:"Enter instant buy price (optional)",class:"create-listing-modal__form-input"},null,512),[[Q,g.form.instantPrice]]),t[13]||(t[13]=e("span",{class:"create-listing-modal__form-help"},"Price for immediate purchase",-1))]),e("div",de,[t[14]||(t[14]=e("label",{class:"create-listing-modal__form-label"},[e("span",{class:"create-listing-modal__form-label-text"},"End Date")],-1)),G(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>g.form.endDate=o),type:"datetime-local",class:"create-listing-modal__form-input",required:"",min:l.minEndDate},null,8,me),[[Q,g.form.endDate]]),t[15]||(t[15]=e("span",{class:"create-listing-modal__form-help"},"When the auction will end",-1))]),e("div",ge,[t[18]||(t[18]=e("h4",{class:"create-listing-modal__fee-title"},"Fees",-1)),e("div",ue,[t[16]||(t[16]=e("span",null,"Marketplace Fee (5%)",-1)),e("span",null,p(l.calculateFee())+" SOL",1)]),e("div",fe,[t[17]||(t[17]=e("span",null,"You will receive",-1)),e("span",null,p(l.calculateReceived())+" SOL",1)])]),e("div",_e,[e("button",{type:"button",onClick:t[3]||(t[3]=o=>n.$emit("close")),class:"create-listing-modal__button create-listing-modal__button--cancel"}," Cancel "),e("button",{type:"button",onClick:t[4]||(t[4]=(...o)=>l.createListingManually&&l.createListingManually(...o)),class:"create-listing-modal__button create-listing-modal__button--submit",disabled:!l.isFormValid||a.isSubmitting},p(a.isSubmitting?"Creating...":"Create Listing"),9,pe)])])]))]),e("div",{class:"create-listing-modal__backdrop",onClick:t[5]||(t[5]=o=>n.$emit("close"))})])}const be=J(jt,[["render",we],["__scopeId","data-v-e3d670dd"]]),ve={name:"NftMarketPage",components:{NftListingCard:zt,CreateListingModal:be,PlaceBidModal:Nt,CancelListingModal:Ct},computed:{hasWallet(){return this.$store.getters.hasWallet}},setup(){const n=ht(),t=kt(),{wallet:a,connected:s,publicKey:g}=_t(),l=f([]),o=f([]),h=f([]),b=f(null),N=f(!1),u=f(!1),M=f(!1),T=f(!1),A=f(!1),H=f("all"),S=f(!1),O=f(!1),I=f(!1),nt=tt(()=>{var i;return(i=g.value)==null?void 0:i.toBase58()}),at=tt(()=>H.value==="my"?o.value:l.value),B=()=>{const i=new wt("https://sleek-icy-frog.solana-mainnet.quiknode.pro/9d4845e2d4c60caf45dc4f10d0bdcfdbcd6a321c");if(!t.getters.hasWallet)throw new Error("Wallet not connected");if(!window.solana)throw new Error("Phantom wallet not installed");const d={publicKey:g.value,signTransaction:async m=>{if(!window.solana)throw new Error("Phantom wallet not installed");return await window.solana.signTransaction(m)},signAllTransactions:async m=>{if(!window.solana)throw new Error("Phantom wallet not installed");return await window.solana.signAllTransactions(m)},signMessage:async m=>{if(!window.solana)throw new Error("Phantom wallet not installed");return await window.solana.signMessage(m)}};return bt.make(i).use(vt(d)).use(yt())},K=async()=>await B().auctionHouse().findByAddress({address:new C("G26L5YGdj9PaYuePz2jj7Qez2S3PJ39xGEKbAnoYHfVE")}),k=async()=>{try{N.value=!0;const i=await y.get("/nft-market/listings");l.value=i.data.data}catch(i){console.error("Error loading listings:",i)}finally{N.value=!1}},L=async()=>{if(t.getters.hasWallet)try{const i=await y.get("/nft-market/listings/my");o.value=i.data.data}catch(i){console.error("Error loading my listings:",i)}},X=async()=>{if(t.getters.hasWallet)try{u.value=!0;const i=await y.get("/nft-market/my-nfts");h.value=i.data.data.map(d=>({mintAddress:d.assetPublicKey,imageUrl:d.imageUri,name:d.name,id:d.id}))}catch(i){console.error("Error loading user NFTs:",i),h.value=[]}finally{u.value=!1}},ot=i=>{n.push(`/nft-market/listing/${i.mintAddress}`)},rt=i=>{b.value=i,O.value=!0},lt=i=>{b.value=i,I.value=!0},ct=async i=>{try{if(M.value=!0,!t.getters.hasWallet){alert("Please connect your wallet first."),M.value=!1;return}const d=parseFloat(i.initialPrice);console.log(`Creating listing for NFT: ${i.nft.mintAddress} at ${d} SOL`);try{const m=B(),_=m.connection,v=await K(),E=g.value;console.log("Creating listing using Metaplex SDK..."),console.log(i.nft.mintAddress);const F=await m.nfts().findAllByOwner({owner:m.identity().publicKey});console.log("NFT found:",F);try{const{listing:Y,confirmResponse:D}=await m.auctionHouse().list({auctionHouse:v,mintAccount:new C(i.nft.mintAddress),price:$(d),token:1,tokenAccount:new C("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),printReceipt:!0});console.log("Listing created successfully:",Y),console.log("Transaction confirmed with signature:",D.signature),console.log("Creating listing record in database...");const P=await y.post("/nft-market/listings",{mintAddress:i.nft.mintAddress,initialPrice:d,instantPrice:i.instantPrice,endTime:new Date(i.endDate).toISOString(),transactionSignature:D.signature});P.data.success?(console.log("Listing created successfully in database:",P.data),S.value=!1,await k(),await L()):(console.error("Error creating listing in database:",P.data),alert("Failed to create listing in database: "+P.data.message))}catch(Y){console.error("Error using Metaplex SDK:",Y),console.log("Building transaction manually using instructions...");const D=await m.auctionHouse().builders().list({auctionHouse:v,mintAccount:new C(i.nft.mintAddress),price:$(d)}).getInstructions(),{Transaction:P}=await pt(async()=>{const{Transaction:j}=await import("./solana-vendors-DGPAp7Fj.js").then(ft=>ft.f);return{Transaction:j}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169])),x=new P;D.forEach(j=>x.add(j));const{blockhash:Z,lastValidBlockHeight:gt}=await _.getLatestBlockhash();if(x.recentBlockhash=Z,x.feePayer=E,console.log("Transaction built, sending to Phantom for signing..."),!window.solana)throw new Error("Phantom wallet not installed");const ut=await window.solana.signTransaction(x),q=await _.sendRawTransaction(ut.serialize(),{skipPreflight:!1});console.log("Transaction sent with signature:",q);const z=await _.confirmTransaction({signature:q,blockhash:Z,lastValidBlockHeight:gt});if(z.value&&z.value.err)throw new Error(`Transaction failed: ${z.value.err}`);console.log("Transaction confirmed successfully"),console.log("Creating listing record in database...");const U=await y.post("/nft-market/listings",{mintAddress:i.nft.mintAddress,initialPrice:d,instantPrice:i.instantPrice,endTime:new Date(i.endDate).toISOString(),transactionSignature:q});U.data.success?(console.log("Listing created successfully in database:",U.data),S.value=!1,await k(),await L()):(console.error("Error creating listing in database:",U.data),alert("Failed to create listing in database: "+U.data.message))}}catch(m){console.error("Failed to create listing:",m);const _=m.message||"Unknown error";console.error("Error details:",_),_.includes("AccountNotInitialized")?alert("Ошибка листинга NFT: Аккаунт не инициализирован. Убедитесь, что NFT действительно принадлежит вам."):alert("Не удалось создать листинг: "+_)}}catch(d){console.error("Error creating listing:",d),alert("Failed to create listing. Please try again: "+(d.message||"Unknown error"))}finally{M.value=!1}},dt=async i=>{try{if(T.value=!0,!t.getters.hasWallet){alert("Please connect your wallet first."),T.value=!1;return}const d=parseFloat(i.amount);console.log(`Placing bid for NFT: ${i.mintAddress} at ${d} SOL`);try{console.log("Creating bid via Metaplex SDK...");const m=B(),_=await K(),{bid:v,confirmResponse:E}=await m.auctionHouse().bid({auctionHouse:_,mintAccount:new C(i.mintAddress),price:d});console.log("Bid created successfully:",v),console.log("Transaction confirmed with signature:",E.signature),console.log("Recording bid in database...");const F=await y.post("/nft-market/bid",{mintAddress:i.mintAddress,bidAmount:d,transactionSignature:E.signature});F.data.success?(console.log("Bid recorded successfully in database:",F.data),O.value=!1,b.value=null,await k(),await L()):(console.error("Error recording bid in database:",F.data),alert("Failed to record bid in database. Please try again."))}catch(m){console.error("Error placing bid:",m),alert("Failed to place bid. Please try again: "+(m.message||"Unknown error"))}finally{T.value=!1}}catch(d){console.error("Error placing bid:",d),alert("Failed to place bid. Please try again: "+(d.message||"Unknown error"))}finally{T.value=!1}},mt=async()=>{try{if(A.value=!0,!b.value){alert("No listing selected."),A.value=!1;return}if(!t.getters.hasWallet){alert("Please connect your wallet first."),A.value=!1;return}const i=b.value;console.log(`Cancelling listing for NFT: ${i.mintAddress}`);const d=B(),m=await K(),{confirmResponse:_}=await d.auctionHouse().cancelListing({auctionHouse:m,listing:{price:parseFloat(i.initialPrice),mintAccount:new C(i.mintAddress),seller:g.value}});console.log("Listing cancelled successfully with signature:",_.signature),console.log("Updating listing status in database...");const v=await y.post("/nft-market/listings/cancel",{mintAddress:i.mintAddress,transactionSignature:_.signature});v.data.success?(console.log("Listing cancelled successfully in database:",v.data),I.value=!1,b.value=null,await k(),await L()):(console.error("Error cancelling listing in database:",v.data),alert("Failed to cancel listing in database. Please try again."))}catch(i){console.error("Error cancelling listing:",i),alert("Failed to cancel listing. Please try again: "+(i.message||"Unknown error"))}finally{A.value=!1}};return Pt(async()=>{await k()}),et(s,async i=>{i?await L():(o.value=[],H.value="all")}),et(S,async i=>{i&&await X()}),{wallet:a,connected:s,walletAddress:nt,listings:l,myListings:o,userNfts:h,selectedListing:b,isLoading:N,isLoadingUserNfts:u,isCreatingListing:M,isPlacingBid:T,isCancelling:A,activeTab:H,showCreateListingModal:S,showBidModal:O,showCancelModal:I,displayedListings:at,loadListings:k,loadMyListings:L,loadUserNfts:X,viewListing:ot,placeBid:rt,cancelListing:lt,handleCreateListing:ct,handlePlaceBid:dt,handleCancelListing:mt}}},ye={class:"nft-market"},he={class:"nft-market__container"},ke={key:0,class:"nft-market__create-section"},Le={class:"nft-market__listings-section"},Pe={class:"nft-market__listings-header"},Ce={class:"nft-market__listings-controls"},Ne=["disabled"],Te={key:0,class:"nft-market__tab-buttons"},Ae={key:0,class:"nft-market__loader-container"},Fe={key:1,class:"nft-market__empty-state"},Me={key:0,class:"nft-market__empty-subtitle"},Se={key:1,class:"nft-market__empty-subtitle"},Be={key:2,class:"nft-market__listings-grid"};function Ee(n,t,a,s,g,l){const o=W("NftListingCard"),h=W("CreateListingModal"),b=W("PlaceBidModal"),N=W("CancelListingModal");return r(),c("div",ye,[e("div",he,[t[13]||(t[13]=e("h1",{class:"nft-market__title"},"NFT Marketplace",-1)),l.hasWallet?(r(),c("div",ke,[t[7]||(t[7]=e("h2",{class:"nft-market__section-title"},"Sell Your NFT",-1)),t[8]||(t[8]=e("p",{class:"nft-market__section-description"},"List your NFT for sale on our marketplace and earn SOL.",-1)),e("button",{onClick:t[0]||(t[0]=u=>s.showCreateListingModal=!0),class:"nft-market__create-button"}," Create Listing ")])):w("",!0),e("div",Le,[e("div",Pe,[t[10]||(t[10]=e("h2",{class:"nft-market__section-title"},"Active Listings",-1)),e("div",Ce,[e("button",{onClick:t[1]||(t[1]=(...u)=>s.loadListings&&s.loadListings(...u)),class:"nft-market__refresh-button",disabled:s.isLoading},t[9]||(t[9]=[e("i",{class:"fas fa-sync-alt nft-market__refresh-icon"},null,-1),Lt(" Refresh ")]),8,Ne),l.hasWallet?(r(),c("div",Te,[e("button",{onClick:t[2]||(t[2]=u=>s.activeTab="all"),class:V(["nft-market__tab-button",{"nft-market__tab-button--active":s.activeTab==="all"}])}," All ",2),e("button",{onClick:t[3]||(t[3]=u=>s.activeTab="my"),class:V(["nft-market__tab-button",{"nft-market__tab-button--active":s.activeTab==="my"}])}," My Listings ",2)])):w("",!0)])]),s.isLoading?(r(),c("div",Ae,t[11]||(t[11]=[e("div",{class:"nft-market__loader"},null,-1)]))):s.displayedListings.length===0?(r(),c("div",Fe,[t[12]||(t[12]=e("p",{class:"nft-market__empty-title"},"No NFT listings found.",-1)),s.activeTab==="my"?(r(),c("p",Me," You haven't listed any NFTs for sale yet. ")):(r(),c("p",Se," Be the first to list your NFT on our marketplace! "))])):(r(),c("div",Be,[(r(!0),c(it,null,st(s.displayedListings,u=>(r(),R(o,{key:u.id,listing:u,"wallet-address":s.walletAddress,connected:l.hasWallet,onView:s.viewListing,onBid:s.placeBid,onCancel:s.cancelListing},null,8,["listing","wallet-address","connected","onView","onBid","onCancel"]))),128))]))])]),s.showCreateListingModal?(r(),R(h,{key:0,"user-nfts":s.userNfts,"is-loading":s.isLoadingUserNfts,"is-submitting":s.isCreatingListing,onClose:t[4]||(t[4]=u=>s.showCreateListingModal=!1),onSubmit:s.handleCreateListing},null,8,["user-nfts","is-loading","is-submitting","onSubmit"])):w("",!0),s.showBidModal&&s.selectedListing?(r(),R(b,{key:1,listing:s.selectedListing,"is-submitting":s.isPlacingBid,onClose:t[5]||(t[5]=u=>s.showBidModal=!1),onSubmit:s.handlePlaceBid},null,8,["listing","is-submitting","onSubmit"])):w("",!0),s.showCancelModal&&s.selectedListing?(r(),R(N,{key:2,"is-submitting":s.isCancelling,onClose:t[6]||(t[6]=u=>s.showCancelModal=!1),onConfirm:s.handleCancelListing},null,8,["is-submitting","onConfirm"])):w("",!0)])}const jn=J(ve,[["render",Ee],["__scopeId","data-v-65f79f8f"]]);export{jn as default};
