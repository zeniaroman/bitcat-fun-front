import{s as C}from"./index-BFwD7SI8.js";import{a as _}from"./vendor-axios-Hz4xvOoZ.js";import{A as W}from"./Toast-CHOcTYnn.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as i,i as t,k as R,j as k,m as p,e as P,F as E,l as O,I as U,c as v,a as M,E as j,r as S,o as s}from"./vendor-vue/runtime-core-CL52-QWR.js";import{t as n,b as w}from"./vendor-vue/shared-lLteBOIO.js";import{r as l,b as z}from"./vendor-vue/reactivity-CqT5sv9X.js";import"./solana-vendors-DGPAp7Fj.js";import"./vendor-buffer-DVXvU5G6.js";import"./vendor-base64-js-C2zTC7ec.js";import"./vendor-ieee754-vIlwft-x.js";import"./vendor-events-cQ9mhZQJ.js";import"./vendor-process-DXjpGiAn.js";import"./vendor-lodash.isequal-D20p4pc-.js";import"./vendor-elliptic-BTxzAQL_.js";import"./vendor-minimalistic-assert-OF9c2MWr.js";import"./vendor-minimalistic-crypto-utils-DpWPKLSp.js";import"./vendor-brorand-6pV8Y5jC.js";import"./vendor-crypto-browserify-NMg_40A5.js";import"./vendor-randombytes-ndKo2FAH.js";import"./vendor-safe-buffer-BPihLaHX.js";import"./vendor-create-hash-BsmGkCgx.js";import"./vendor-inherits-BICa84dG.js";import"./vendor-md5.js-BmCTTIue.js";import"./vendor-hash-base-CXljNKss.js";import"./vendor-readable-stream-BpYOL4VF.js";import"./vendor-asn1.js-Cgb4HcA4.js";import"./vendor-util-deprecate-C5bwERXh.js";import"./vendor-string_decoder-CzqD1_ea.js";import"./vendor-ripemd160-B-g9_ZaO.js";import"./vendor-sha.js-C_Iv65sP.js";import"./vendor-cipher-base-CVoreX1z.js";import"./vendor-stream-browserify-BiXhMpOM.js";import"./vendor-create-hmac-Dt8PQ7js.js";import"./vendor-browserify-sign-DLX2f2Lw.js";import"./vendor-process-nextick-args-DZA8cFXf.js";import"./vendor-core-util-is-OG-hh3cz.js";import"./vendor-browserify-rsa-DRghgnJS.js";import"./vendor-bn.js-CN51n21Z.js";import"./vendor-parse-asn1-CnRUGrVC.js";import"./vendor-evp_bytestokey-V5JLH1pP.js";import"./vendor-browserify-aes-Dzp1Wr7h.js";import"./vendor-buffer-xor-BGVZWPAd.js";import"./vendor-pbkdf2-D8c51p7I.js";import"./vendor-browserify-cipher-CRpPeA_V.js";import"./vendor-browserify-des-7ZFmx5Md.js";import"./vendor-des.js-DyWMuwdI.js";import"./vendor-diffie-hellman-CdruneMD.js";import"./vendor-miller-rabin-D60nYGZr.js";import"./vendor-create-ecdh-D3sJE6Oq.js";import"./vendor-public-encrypt-BRl7BMPZ.js";import"./vendor-randomfill-PyDjCq6P.js";import"./vendor-hash.js-Dda3EUYz.js";import"./vendor-hmac-drbg-Ss9liF53.js";import"./vendor-vue/runtime-dom-Ll8vq9eS.js";import"./vendor-vueuse/core-Dowf-keF.js";import"./vendor-vueuse/shared-D4hqHlE2.js";import"./vendor-eventemitter3-C1FPriCL.js";import"./vendor-bignumber.js-Dj_rIxHg.js";import"./vendor-bigint-buffer-5mUCZ2jv.js";import"./vendor-noble/ed25519-DHS8bCE8.js";import"./vendor-node-fetch-DFwHyKwz.js";import"./vendor-url-Fv_L5Bhg.js";import"./vendor-qs-CKXrMD_V.js";import"./vendor-side-channel-CjkecZmv.js";import"./vendor-es-errors-CxTyLFAO.js";import"./vendor-object-inspect-C0kqJKki.js";import"./vendor-side-channel-list-DJbPV7dX.js";import"./vendor-side-channel-map-OCAkmCSB.js";import"./vendor-get-intrinsic-Ci-jyTpD.js";import"./vendor-es-object-atoms-BR76m4z7.js";import"./vendor-math-intrinsics-DP1tGiab.js";import"./vendor-gopd-C1lCZ5Qs.js";import"./vendor-es-define-property-D_7cP-M3.js";import"./vendor-has-symbols-CySAGvJ4.js";import"./vendor-get-proto-BI0zWv-p.js";import"./vendor-dunder-proto-5sdYuMkY.js";import"./vendor-call-bind-apply-helpers-BfAPCzjd.js";import"./vendor-function-bind-CHqF18-c.js";import"./vendor-hasown-CH2RbkDu.js";import"./vendor-call-bound-nPIHF2bX.js";import"./vendor-side-channel-weakmap-D938crsm.js";import"./vendor-whatwg-url-BNoC3hI6.js";import"./vendor-webidl-conversions-DuBT_cRJ.js";import"./vendor-punycode-BGZJxaHx.js";import"./vendor-tr46-_6nBz5KS.js";import"./vendor-mime-DOJa-gVj.js";import"./vendor-assert-CCtLV3vt.js";import"./vendor-util-BEO2nGWh.js";import"./vendor-is-arguments-D-oLGwWh.js";import"./vendor-has-tostringtag-BU9GnA_1.js";import"./vendor-is-generator-function-Bk_W3rfd.js";import"./vendor-safe-regex-test-BtqTbUmV.js";import"./vendor-is-regex-BKTFpgjH.js";import"./vendor-which-typed-array-Bufg-IXZ.js";import"./vendor-for-each-HvIZAWYy.js";import"./vendor-is-callable-BYFz_UGF.js";import"./vendor-available-typed-arrays-uQGnJldC.js";import"./vendor-possible-typed-array-names-BKRybAhF.js";import"./vendor-call-bind-3YpglFCb.js";import"./vendor-set-function-length-Cm7PFPrZ.js";import"./vendor-define-data-property-BppnLwnj.js";import"./vendor-has-property-descriptors-ChC8uhsk.js";import"./vendor-is-typed-array-CZaxorcA.js";import"./vendor-object.assign-D0NKsUk4.js";import"./vendor-object-keys-BRu_Tray.js";import"./vendor-object-is-DkNyiNMZ.js";import"./vendor-define-properties-CgTwYkbs.js";import"./vendor-is-nan-BtAA6g8u.js";import"./vendor-debug-DLVl9QA3.js";import"./vendor-ms-CzQ2E3wO.js";import"./vendor-babel/runtime-w7AU6ifp.js";import"./vendor-js-sha3-DkKfOMXT.js";import"./vendor-typescript-collections-DaJ0MJpz.js";import"./vendor-lodash.clonedeep-C3jeG2fR.js";import"./vendor-ansicolors-BFAL4nhq.js";import"./vendor-bs58-DhqqakFZ.js";import"./vendor-base-x-BHV1Xppf.js";import"./vendor-base64url-D1J1q9RC.js";import"./vendor-arbundles-CR3XhIxB.js";import"./vendor-async-retry-DWdC6xTk.js";import"./vendor-retry-ByBYrtbW.js";import"./vendor-irys/arweave-CO_npObX.js";import"./vendor-safer-buffer-CIAg7E_-.js";import"./vendor-secp256k1-gx_3s_gH.js";import"./vendor-keccak-Bl_8Z6TM.js";import"./vendor-ethersproject/bytes-BFUO92dS.js";import"./vendor-ethersproject/logger-BIOSViGG.js";import"./vendor-ethersproject/wallet-_-D8aoNy.js";import"./vendor-ethersproject/address-C-94Rlzo.js";import"./vendor-ethersproject/keccak256-BpI13PIi.js";import"./vendor-ethersproject/rlp-L8r_OHwd.js";import"./vendor-ethersproject/bignumber-DuyZ-PBD.js";import"./vendor-ethersproject/abstract-provider-BJATZ19F.js";import"./vendor-ethersproject/properties-Bism-GXA.js";import"./vendor-ethersproject/abstract-signer-vaofOY7d.js";import"./vendor-ethersproject/strings-BqJBhWqj.js";import"./vendor-ethersproject/hdnode-De1GriMn.js";import"./vendor-ethersproject/basex-GbQJAx3e.js";import"./vendor-ethersproject/signing-key-DZY4IiDE.js";import"./vendor-ethersproject/sha2-C3DRumhS.js";import"./vendor-ethersproject/wordlists-Bgp1_tq6.js";import"./vendor-ethersproject/pbkdf2-RF0eycJB.js";import"./vendor-ethersproject/json-wallets-DmRppK22.js";import"./vendor-aes-js-CVO7b-af.js";import"./vendor-scrypt-js-pU08l4Iy.js";import"./vendor-ethersproject/random-UwHXQyRf.js";import"./vendor-ethersproject/hash-CaQkUgof.js";import"./vendor-ethersproject/transactions-DgEmUiir.js";import"./vendor-irys/sdk-zMcAFY0m.js";import"./vendor-irys/query-BJ-9co3k.js";import"./vendor-near-js/crypto-DYaHgGqH.js";import"./vendor-borsh-uT6VLZDJ.js";import"./vendor-text-encoding-utf-8-CyyJ4wbt.js";import"./vendor-tweetnacl-DH0kfJ7g.js";import"./vendor-crypto-js-TDtrdbi3.js";import"./vendor-near-js/types-BW5UzBhQ.js";import"./vendor-near-js/keystores-browser-C7Ipq7jt.js";import"./vendor-near-js/keystores-DZ_AKmgs.js";import"./vendor-near-js/transactions-CNW8gb_X.js";import"./vendor-js-sha256-J9Bkl3or.js";import"./vendor-ethersproject/contracts-BfB5cMkz.js";import"./vendor-ethersproject/abi-BZPj2eRn.js";import"./vendor-ethersproject/constants-DnPC-4nq.js";import"./vendor-aptos-COdaePwy.js";import"./vendor-scure/base-BmqIkRj2.js";import"./vendor-supercharge/promise-pool-CxlJr3BL.js";import"./vendor-noble/curves-Bi3lEKLw.js";import"./vendor-noble/hashes-DJrKYuPd.js";import"./vendor-jayson-C-feTq4c.js";import"./vendor-uuid-42xqzRtG.js";import"./vendor-rpc-websockets-CS_NMCMZ.js";import"./vendor-vue-router-PmQVL-xb.js";import"./vendor-vuex-router-sync-DE8Azp4R.js";import"./vendor-vuex-KmQPsw4D.js";import"./vendor-vue/devtools-api-Cow_pXkh.js";import"./vendor-socket.io-client-Bfvk10tG.js";import"./vendor-engine.io-client-sigXSzQJ.js";import"./vendor-engine.io-parser-BiEtp6m2.js";import"./vendor-socket.io/component-emitter-Dkula2eQ.js";import"./vendor-socket.io-parser-Cuf20g09.js";const G={name:"UserReferralsPage",components:{AppToast:W},setup(){const c=v(()=>C.getters.walletAddress),r=v(()=>C.getters.userTag),g=v(()=>C.getters.isAuthenticated),o=l([]),T=l({totalReferrals:0,totalAvailable:0}),y=l(!0),f=l(null),A=l(null),a=l(!1),m=l(0),x=l(!1),F=v(()=>m.value>=100001?5:m.value>=50001?4:m.value>=10001?3:m.value>=1e3?2:1),L=async()=>{if(!(!c.value||!c.value))try{const e=await _.get(`/dapp/get-bitcat-balance/${c.value}`);e.data&&e.data.balance!==void 0&&(m.value=e.data.balance)}catch(e){console.error("Error fetching BITCAT balance:",e)}},D=v(()=>e=>e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0");M(()=>c.value,e=>{e?L():m.value=0});const h=z({show:!1,message:"",type:"success",duration:5e3}),I=async()=>{if(g.value)try{y.value=!0;const e=await _.get(`/referrals/${r.value}`);e.data.success&&(o.value=e.data.referrals);const d=await _.get(`/referrals/${r.value}/stats`);d.data.success&&(T.value=d.data.stats)}catch(e){console.error("Error loading referrals:",e),u("Failed to load referrals","error")}finally{y.value=!1}},B=l(!1),N=async()=>{var e,d;try{B.value=!0;const b=await _.post("/referrals/withdraw-payment");b.data.success&&(u(b.data.message,"success"),I())}catch(b){u(((d=(e=b.response)==null?void 0:e.data)==null?void 0:d.error)||"Failed to withdraw payment","error")}finally{B.value=!1}},q=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",u=(e,d="success")=>{h.message=e,h.type=d,h.show=!0},V=async()=>{try{const e=`https://bitcat.fun/?r=${r.value}`;await navigator.clipboard.writeText(e),a.value=!0,setTimeout(()=>{a.value=!1},2e3),u("Referral link copied to clipboard","success")}catch(e){console.error("Failed to copy text: ",e),u("Failed to copy referral link","error")}};return j(()=>{g.value&&I(),c.value&&L()}),{userTag:r,referrals:o,stats:T,loading:y,processingPayment:f,isWithdrawing:B,toast:h,referralLinkInput:A,referralLinkCopied:a,formatDate:q,withdrawPayment:N,copyReferralLink:V,isAuthenticated:g,bitcatBalance:m,rewardPercentage:F,showRewardsPopup:x,formatStakedAmount:D}}},H={class:"referrals-page-wrapper"},J={class:"referrals-page"},K={class:"page-header"},Q={class:"rewards-section"},X={class:"rewards-info"},Z={class:"rewards-balance"},$={class:"balance-value"},tt={class:"rewards-percentage"},rt={class:"percentage-value"},ot={class:"referral-link-section"},et={class:"referral-link-container"},at=["value"],it={key:0},st={key:1},nt={class:"referral-stats"},lt={class:"stat-card"},dt={class:"stat-value"},pt={class:"stat-card"},mt={class:"stat-value"},ct={class:"withdraw-section"},ft={class:"withdraw-card"},ut={class:"withdraw-header"},vt={class:"withdraw-amount"},wt={class:"withdraw-info"},gt={key:0,class:"withdraw-message"},yt={class:"withdraw-actions"},ht={class:"referrals-list"},bt={key:0,class:"loading"},_t={key:0},kt={key:1},Tt={key:1,class:"no-referrals"},At={key:0},Bt={key:1},Ct={key:2,class:"referral-items"},Rt={class:"referral-info"},Pt={class:"referral-details"},Lt={class:"referral-tag"},It={class:"referral-date"},St={class:"referral-amount"},xt={class:"referral-join-date"},Ft={class:"referral-actions"},Dt={key:1,class:"rewards-popup"},Nt={class:"rewards-popup-content"},qt={class:"rewards-popup-header"},Vt={class:"rewards-popup-body"},Wt={class:"rewards-tiers"};function Yt(c,r,g,o,T,y){const f=S("router-link"),A=S("AppToast");return s(),i("div",H,[t("div",J,[t("div",K,[r[9]||(r[9]=t("h1",null,"Referral Program",-1)),r[10]||(r[10]=t("p",null,"Share your referral link with friends and earn 1-5% rewards from their paid actions.",-1)),t("div",Q,[t("div",X,[t("div",Z,[r[5]||(r[5]=t("span",{class:"balance-label"},"Your BITCAT Balance:",-1)),t("span",$,n(o.formatStakedAmount(o.bitcatBalance||0))+" BITCAT",1)]),t("div",tt,[r[6]||(r[6]=t("span",{class:"percentage-label"},"Your Reward Rate:",-1)),t("span",rt,n(o.rewardPercentage)+"%",1)])]),t("button",{class:"rewards-details-button",onClick:r[0]||(r[0]=a=>o.showRewardsPopup=!0)},r[7]||(r[7]=[t("i",{class:"fas fa-info-circle"},null,-1),p(" Rewards Details ")]))]),t("div",ot,[t("div",et,[t("input",{type:"text",class:"referral-link",readonly:"",value:`https://bitcat.fun/?r=${o.userTag||"guest"}`,ref:"referralLinkInput"},null,8,at),t("button",{class:"copy-button",onClick:r[1]||(r[1]=(...a)=>o.copyReferralLink&&o.copyReferralLink(...a))},[r[8]||(r[8]=t("i",{class:"fas fa-copy"},null,-1)),o.referralLinkCopied?(s(),i("span",it,"Copied!")):(s(),i("span",st,"Copy"))])])])]),t("div",nt,[t("div",lt,[r[11]||(r[11]=t("h3",null,"Total Referrals",-1)),t("div",dt,n(o.stats.totalReferrals),1)]),t("div",pt,[r[12]||(r[12]=t("h3",null,"Available for Payment",-1)),t("div",mt,n((o.stats.totalAvailable/1e9).toFixed(6))+" SOL",1)])]),t("div",ct,[t("div",ft,[t("div",ut,[r[13]||(r[13]=t("h3",null,"Withdraw Available Funds",-1)),t("div",vt,n((o.stats.totalAvailable/1e9).toFixed(6))+" SOL",1)]),t("div",wt,[o.stats.totalAvailable<1e7?(s(),i("div",gt,r[14]||(r[14]=[t("i",{class:"fas fa-info-circle"},null,-1),t("span",null,"Minimum withdrawal amount is 0.01 SOL",-1)]))):R("",!0)]),t("div",yt,[t("button",{class:"withdraw-button",onClick:r[2]||(r[2]=(...a)=>o.withdrawPayment&&o.withdrawPayment(...a))},n(o.isWithdrawing?"Processing...":"Withdraw Funds"),1)])])]),t("div",ht,[r[22]||(r[22]=t("h2",null,"Your Referrals",-1)),o.loading?(s(),i("div",bt,[o.isAuthenticated?(s(),i("p",_t,"Loading referrals...")):(s(),i("p",kt,[r[16]||(r[16]=p("Please ")),k(f,{to:"/my"},{default:P(()=>r[15]||(r[15]=[p("Login")])),_:1}),r[17]||(r[17]=p(" to view your referrals"))]))])):o.referrals.length===0?(s(),i("div",Tt,[o.isAuthenticated?(s(),i("p",At,"You don't have any referrals yet. Share your referral link to start earning rewards!")):(s(),i("p",Bt,[r[19]||(r[19]=p("Please ")),k(f,{to:"/my"},{default:P(()=>r[18]||(r[18]=[p("Login")])),_:1}),r[20]||(r[20]=p(" to view your referrals"))]))])):(s(),i("div",Ct,[(s(!0),i(E,null,O(o.referrals,a=>(s(),i("div",{key:a.id,class:"referral-item"},[t("div",Rt,[t("div",Pt,[t("div",Lt,n(a.referralTag),1),t("div",It,"Last action: "+n(o.formatDate(a.lastAction)),1),t("div",St,"Available: "+n((a.availableForPayment/1e9).toFixed(6))+" SOL",1),t("div",xt,"Joined: "+n(o.formatDate(a.createdAt)),1)])]),t("div",Ft,[k(f,{to:`/my/referral/${a.referralTag}`,class:"history-button"},{default:P(()=>r[21]||(r[21]=[p(" Referral Actions History ")])),_:2},1032,["to"])])]))),128))]))])]),R("",!0),o.showRewardsPopup?(s(),i("div",Dt,[t("div",Nt,[t("div",qt,[r[26]||(r[26]=t("h2",null,"Referral Rewards Details",-1)),t("button",{class:"close-button",onClick:r[3]||(r[3]=a=>o.showRewardsPopup=!1)},"×")]),t("div",Vt,[r[32]||(r[32]=t("h3",null,"How Rewards Are Calculated",-1)),r[33]||(r[33]=t("p",null,"Your reward percentage depends on your BITCAT token balance:",-1)),t("div",Wt,[t("div",{class:w(["tier",{active:o.bitcatBalance>=0&&o.bitcatBalance<=0}])},r[27]||(r[27]=[t("div",{class:"tier-header"},"Basic",-1),t("div",{class:"tier-percentage"},"1%",-1),t("div",{class:"tier-requirement"},"0 BITCAT",-1)]),2),t("div",{class:w(["tier",{active:o.bitcatBalance>=1e3&&o.bitcatBalance<=1e4}])},r[28]||(r[28]=[t("div",{class:"tier-header"},"Bronze",-1),t("div",{class:"tier-percentage"},"2%",-1),t("div",{class:"tier-requirement"},"1000 BITCAT",-1)]),2),t("div",{class:w(["tier",{active:o.bitcatBalance>=10001&&o.bitcatBalance<=5e4}])},r[29]||(r[29]=[t("div",{class:"tier-header"},"Silver",-1),t("div",{class:"tier-percentage"},"3%",-1),t("div",{class:"tier-requirement"},"10,000 BITCAT",-1)]),2),t("div",{class:w(["tier",{active:o.bitcatBalance>=50001&&o.bitcatBalance<=1e5}])},r[30]||(r[30]=[t("div",{class:"tier-header"},"Gold",-1),t("div",{class:"tier-percentage"},"4%",-1),t("div",{class:"tier-requirement"},"50,000 BITCAT",-1)]),2),t("div",{class:w(["tier",{active:o.bitcatBalance>=100001}])},r[31]||(r[31]=[t("div",{class:"tier-header"},"Platinum",-1),t("div",{class:"tier-percentage"},"5%",-1),t("div",{class:"tier-requirement"},"100,000 BITCAT",-1)]),2)]),r[34]||(r[34]=U('<h3 data-v-95ec80f9>Paid Actions That Generate Rewards</h3><ul class="rewards-actions" data-v-95ec80f9><li data-v-95ec80f9><span class="action-name" data-v-95ec80f9>When your referrals interact with: </span><span class="action-description bold" data-v-95ec80f9>Token launchpad, ATA Cashback</span><span class="action-description" data-v-95ec80f9>More Coming Soon. Additional paid actions will be added in the future</span></li></ul><div class="rewards-note" data-v-95ec80f9><p data-v-95ec80f9><strong data-v-95ec80f9>Note:</strong> To increase your reward percentage, you need to hold more BITCAT tokens in your connected wallet.</p></div>',3))])])])):R("",!0),k(A,{show:o.toast.show,message:o.toast.message,type:o.toast.type,onClose:r[4]||(r[4]=a=>o.toast.show=!1),duration:o.toast.duration},null,8,["show","message","type","duration"])])}const sa=Y(G,[["render",Yt],["__scopeId","data-v-95ec80f9"]]);export{sa as default};
