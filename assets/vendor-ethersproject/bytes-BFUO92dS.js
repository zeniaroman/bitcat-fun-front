import{L as w}from"./logger-BIOSViGG.js";const A="bytes/5.8.0",i=new w(A);function a(r){return!!r.toHexString}function g(r){return r.slice||(r.slice=function(){const t=Array.prototype.slice.call(arguments);return g(new Uint8Array(Array.prototype.slice.apply(r,t)))}),r}function P(r){return f(r)&&!(r.length%2)||m(r)}function x(r){return typeof r=="number"&&r==r&&r%1===0}function m(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!x(r.length)||r.length<0)return!1;for(let t=0;t<r.length;t++){const e=r[t];if(!x(e)||e<0||e>=256)return!1}return!0}function h(r,t){if(t||(t={}),typeof r=="number"){i.checkSafeUint53(r,"invalid arrayify value");const e=[];for(;r;)e.unshift(r&255),r=parseInt(String(r/256));return e.length===0&&e.push(0),g(new Uint8Array(e))}if(t.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),a(r)&&(r=r.toHexString()),f(r)){let e=r.substring(2);e.length%2&&(t.hexPad==="left"?e="0"+e:t.hexPad==="right"?e+="0":i.throwArgumentError("hex data is odd-length","value",r));const o=[];for(let n=0;n<e.length;n+=2)o.push(parseInt(e.substring(n,n+2),16));return g(new Uint8Array(o))}return m(r)?g(new Uint8Array(r)):i.throwArgumentError("invalid arrayify value","value",r)}function v(r){const t=r.map(n=>h(n)),e=t.reduce((n,c)=>n+c.length,0),o=new Uint8Array(e);return t.reduce((n,c)=>(o.set(c,n),n+c.length),0),g(o)}function E(r){let t=h(r);if(t.length===0)return t;let e=0;for(;e<t.length&&t[e]===0;)e++;return e&&(t=t.slice(e)),t}function d(r,t){r=h(r),r.length>t&&i.throwArgumentError("value out of range","value",arguments[0]);const e=new Uint8Array(t);return e.set(r,t-r.length),g(e)}function f(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||t&&r.length!==2+2*t)}const l="0123456789abcdef";function s(r,t){if(t||(t={}),typeof r=="number"){i.checkSafeUint53(r,"invalid hexlify value");let e="";for(;r;)e=l[r&15]+e,r=Math.floor(r/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(t.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),a(r))return r.toHexString();if(f(r))return r.length%2&&(t.hexPad==="left"?r="0x0"+r.substring(2):t.hexPad==="right"?r+="0":i.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(m(r)){let e="0x";for(let o=0;o<r.length;o++){let n=r[o];e+=l[(n&240)>>4]+l[n&15]}return e}return i.throwArgumentError("invalid hexlify value","value",r)}function _(r){if(typeof r!="string")r=s(r);else if(!f(r)||r.length%2)return null;return(r.length-2)/2}function S(r,t,e){return typeof r!="string"?r=s(r):(!f(r)||r.length%2)&&i.throwArgumentError("invalid hexData","value",r),t=2+2*t,e!=null?"0x"+r.substring(t,2+2*e):"0x"+r.substring(t)}function U(r){let t="0x";return r.forEach(e=>{t+=s(e).substring(2)}),t}function u(r,t){for(typeof r!="string"?r=s(r):f(r)||i.throwArgumentError("invalid hex string","value",r),r.length>2*t+2&&i.throwArgumentError("value out of range","value",arguments[1]);r.length<2*t+2;)r="0x0"+r.substring(2);return r}function b(r){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(P(r)){let e=h(r);e.length===64?(t.v=27+(e[32]>>7),e[32]&=127,t.r=s(e.slice(0,32)),t.s=s(e.slice(32,64))):e.length===65?(t.r=s(e.slice(0,32)),t.s=s(e.slice(32,64)),t.v=e[64]):i.throwArgumentError("invalid signature string","signature",r),t.v<27&&(t.v===0||t.v===1?t.v+=27:i.throwArgumentError("signature invalid v byte","signature",r)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(e[32]|=128),t._vs=s(e.slice(32,64))}else{if(t.r=r.r,t.s=r.s,t.v=r.v,t.recoveryParam=r.recoveryParam,t._vs=r._vs,t._vs!=null){const n=d(h(t._vs),32);t._vs=s(n);const c=n[0]>=128?1:0;t.recoveryParam==null?t.recoveryParam=c:t.recoveryParam!==c&&i.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),n[0]&=127;const y=s(n);t.s==null?t.s=y:t.s!==y&&i.throwArgumentError("signature v mismatch _vs","signature",r)}if(t.recoveryParam==null)t.v==null?i.throwArgumentError("signature missing v and recoveryParam","signature",r):t.v===0||t.v===1?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(t.v==null)t.v=27+t.recoveryParam;else{const n=t.v===0||t.v===1?t.v:1-t.v%2;t.recoveryParam!==n&&i.throwArgumentError("signature recoveryParam mismatch v","signature",r)}t.r==null||!f(t.r)?i.throwArgumentError("signature missing or invalid r","signature",r):t.r=u(t.r,32),t.s==null||!f(t.s)?i.throwArgumentError("signature missing or invalid s","signature",r):t.s=u(t.s,32);const e=h(t.s);e[0]>=128&&i.throwArgumentError("signature s out of range","signature",r),t.recoveryParam&&(e[0]|=128);const o=s(e);t._vs&&(f(t._vs)||i.throwArgumentError("signature invalid _vs","signature",r),t._vs=u(t._vs,32)),t._vs==null?t._vs=o:t._vs!==o&&i.throwArgumentError("signature _vs mismatch v and s","signature",r)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function H(r){return r=b(r),s(v([r.r,r.s,r.recoveryParam?"0x1c":"0x1b"]))}export{h as a,U as b,v as c,u as d,S as e,m as f,_ as g,s as h,f as i,P as j,b as k,H as l,E as s};
