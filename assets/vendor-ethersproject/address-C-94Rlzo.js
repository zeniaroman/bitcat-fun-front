import{s as u,a as c,e as h,i as m}from"./bytes-BFUO92dS.js";import{k as l}from"./keccak256-BpI13PIi.js";import{e as p}from"./rlp-L8r_OHwd.js";import{L as A}from"./logger-BIOSViGG.js";import{_ as b,B as w}from"./bignumber-DuyZ-PBD.js";const x="address/5.8.0",i=new A(x);function s(t){m(t,20)||i.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const r=t.substring(2).split(""),n=new Uint8Array(40);for(let o=0;o<40;o++)n[o]=r[o].charCodeAt(0);const e=c(l(n));for(let o=0;o<40;o+=2)e[o>>1]>>4>=8&&(r[o]=r[o].toUpperCase()),(e[o>>1]&15)>=8&&(r[o+1]=r[o+1].toUpperCase());return"0x"+r.join("")}const k=9007199254740991;function C(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const f={};for(let t=0;t<10;t++)f[String(t)]=String(t);for(let t=0;t<26;t++)f[String.fromCharCode(65+t)]=String(10+t);const a=Math.floor(C(k));function E(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let r=t.split("").map(e=>f[e]).join("");for(;r.length>=a;){let e=r.substring(0,a);r=parseInt(e,10)%97+r.substring(e.length)}let n=String(98-parseInt(r,10)%97);for(;n.length<2;)n="0"+n;return n}function g(t){let r=null;if(typeof t!="string"&&i.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),r=s(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==t&&i.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==E(t)&&i.throwArgumentError("bad icap checksum","address",t),r=b(t.substring(4));r.length<40;)r="0"+r;r=s("0x"+r)}else i.throwArgumentError("invalid address","address",t);return r}function F(t){let r=null;try{r=g(t.from)}catch{i.throwArgumentError("missing from address","transaction",t)}const n=u(c(w.from(t.nonce).toHexString()));return g(h(l(p([r,n])),12))}export{F as a,g};
