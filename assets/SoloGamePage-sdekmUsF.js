import{a as N,b as O}from"./vendor-vuex-KmQPsw4D.js";import{s}from"./index-BFwD7SI8.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as l,i as t,k as b,F as C,l as D,m as p,j as _,e as I,r as T,o as n,I as X,c as v,a as R,E as Y,J as E}from"./vendor-vue/runtime-core-CL52-QWR.js";import{b as W,t as g,a as F}from"./vendor-vue/shared-lLteBOIO.js";import{b as j}from"./bitcat-CqTLzHsa.js";import{_ as q}from"./coin-CkyoDAZC.js";import{w as L}from"./vendor-vue/runtime-dom-Ll8vq9eS.js";import{_ as J}from"./bitcat-animation-D7TwaaSB.js";import{r as k}from"./vendor-vue/reactivity-CqT5sv9X.js";import"./vendor-vue/devtools-api-Cow_pXkh.js";import"./solana-vendors-DGPAp7Fj.js";import"./vendor-buffer-DVXvU5G6.js";import"./vendor-base64-js-C2zTC7ec.js";import"./vendor-ieee754-vIlwft-x.js";import"./vendor-events-cQ9mhZQJ.js";import"./vendor-process-DXjpGiAn.js";import"./vendor-lodash.isequal-D20p4pc-.js";import"./vendor-elliptic-BTxzAQL_.js";import"./vendor-minimalistic-assert-OF9c2MWr.js";import"./vendor-minimalistic-crypto-utils-DpWPKLSp.js";import"./vendor-brorand-6pV8Y5jC.js";import"./vendor-crypto-browserify-NMg_40A5.js";import"./vendor-randombytes-ndKo2FAH.js";import"./vendor-safe-buffer-BPihLaHX.js";import"./vendor-create-hash-BsmGkCgx.js";import"./vendor-inherits-BICa84dG.js";import"./vendor-md5.js-BmCTTIue.js";import"./vendor-hash-base-CXljNKss.js";import"./vendor-readable-stream-BpYOL4VF.js";import"./vendor-asn1.js-Cgb4HcA4.js";import"./vendor-util-deprecate-C5bwERXh.js";import"./vendor-string_decoder-CzqD1_ea.js";import"./vendor-ripemd160-B-g9_ZaO.js";import"./vendor-sha.js-C_Iv65sP.js";import"./vendor-cipher-base-CVoreX1z.js";import"./vendor-stream-browserify-BiXhMpOM.js";import"./vendor-create-hmac-Dt8PQ7js.js";import"./vendor-browserify-sign-DLX2f2Lw.js";import"./vendor-process-nextick-args-DZA8cFXf.js";import"./vendor-core-util-is-OG-hh3cz.js";import"./vendor-browserify-rsa-DRghgnJS.js";import"./vendor-bn.js-CN51n21Z.js";import"./vendor-parse-asn1-CnRUGrVC.js";import"./vendor-evp_bytestokey-V5JLH1pP.js";import"./vendor-browserify-aes-Dzp1Wr7h.js";import"./vendor-buffer-xor-BGVZWPAd.js";import"./vendor-pbkdf2-D8c51p7I.js";import"./vendor-browserify-cipher-CRpPeA_V.js";import"./vendor-browserify-des-7ZFmx5Md.js";import"./vendor-des.js-DyWMuwdI.js";import"./vendor-diffie-hellman-CdruneMD.js";import"./vendor-miller-rabin-D60nYGZr.js";import"./vendor-create-ecdh-D3sJE6Oq.js";import"./vendor-public-encrypt-BRl7BMPZ.js";import"./vendor-randomfill-PyDjCq6P.js";import"./vendor-hash.js-Dda3EUYz.js";import"./vendor-hmac-drbg-Ss9liF53.js";import"./vendor-vueuse/core-Dowf-keF.js";import"./vendor-vueuse/shared-D4hqHlE2.js";import"./vendor-eventemitter3-C1FPriCL.js";import"./vendor-bignumber.js-Dj_rIxHg.js";import"./vendor-bigint-buffer-5mUCZ2jv.js";import"./vendor-noble/ed25519-DHS8bCE8.js";import"./vendor-node-fetch-DFwHyKwz.js";import"./vendor-url-Fv_L5Bhg.js";import"./vendor-qs-CKXrMD_V.js";import"./vendor-side-channel-CjkecZmv.js";import"./vendor-es-errors-CxTyLFAO.js";import"./vendor-object-inspect-C0kqJKki.js";import"./vendor-side-channel-list-DJbPV7dX.js";import"./vendor-side-channel-map-OCAkmCSB.js";import"./vendor-get-intrinsic-Ci-jyTpD.js";import"./vendor-es-object-atoms-BR76m4z7.js";import"./vendor-math-intrinsics-DP1tGiab.js";import"./vendor-gopd-C1lCZ5Qs.js";import"./vendor-es-define-property-D_7cP-M3.js";import"./vendor-has-symbols-CySAGvJ4.js";import"./vendor-get-proto-BI0zWv-p.js";import"./vendor-dunder-proto-5sdYuMkY.js";import"./vendor-call-bind-apply-helpers-BfAPCzjd.js";import"./vendor-function-bind-CHqF18-c.js";import"./vendor-hasown-CH2RbkDu.js";import"./vendor-call-bound-nPIHF2bX.js";import"./vendor-side-channel-weakmap-D938crsm.js";import"./vendor-whatwg-url-BNoC3hI6.js";import"./vendor-webidl-conversions-DuBT_cRJ.js";import"./vendor-punycode-BGZJxaHx.js";import"./vendor-tr46-_6nBz5KS.js";import"./vendor-mime-DOJa-gVj.js";import"./vendor-assert-CCtLV3vt.js";import"./vendor-util-BEO2nGWh.js";import"./vendor-is-arguments-D-oLGwWh.js";import"./vendor-has-tostringtag-BU9GnA_1.js";import"./vendor-is-generator-function-Bk_W3rfd.js";import"./vendor-safe-regex-test-BtqTbUmV.js";import"./vendor-is-regex-BKTFpgjH.js";import"./vendor-which-typed-array-Bufg-IXZ.js";import"./vendor-for-each-HvIZAWYy.js";import"./vendor-is-callable-BYFz_UGF.js";import"./vendor-available-typed-arrays-uQGnJldC.js";import"./vendor-possible-typed-array-names-BKRybAhF.js";import"./vendor-call-bind-3YpglFCb.js";import"./vendor-set-function-length-Cm7PFPrZ.js";import"./vendor-define-data-property-BppnLwnj.js";import"./vendor-has-property-descriptors-ChC8uhsk.js";import"./vendor-is-typed-array-CZaxorcA.js";import"./vendor-object.assign-D0NKsUk4.js";import"./vendor-object-keys-BRu_Tray.js";import"./vendor-object-is-DkNyiNMZ.js";import"./vendor-define-properties-CgTwYkbs.js";import"./vendor-is-nan-BtAA6g8u.js";import"./vendor-debug-DLVl9QA3.js";import"./vendor-ms-CzQ2E3wO.js";import"./vendor-babel/runtime-w7AU6ifp.js";import"./vendor-js-sha3-DkKfOMXT.js";import"./vendor-typescript-collections-DaJ0MJpz.js";import"./vendor-lodash.clonedeep-C3jeG2fR.js";import"./vendor-ansicolors-BFAL4nhq.js";import"./vendor-bs58-DhqqakFZ.js";import"./vendor-base-x-BHV1Xppf.js";import"./vendor-base64url-D1J1q9RC.js";import"./vendor-arbundles-CR3XhIxB.js";import"./vendor-async-retry-DWdC6xTk.js";import"./vendor-retry-ByBYrtbW.js";import"./vendor-irys/arweave-CO_npObX.js";import"./vendor-axios-Hz4xvOoZ.js";import"./vendor-safer-buffer-CIAg7E_-.js";import"./vendor-secp256k1-gx_3s_gH.js";import"./vendor-keccak-Bl_8Z6TM.js";import"./vendor-ethersproject/bytes-BFUO92dS.js";import"./vendor-ethersproject/logger-BIOSViGG.js";import"./vendor-ethersproject/wallet-_-D8aoNy.js";import"./vendor-ethersproject/address-C-94Rlzo.js";import"./vendor-ethersproject/keccak256-BpI13PIi.js";import"./vendor-ethersproject/rlp-L8r_OHwd.js";import"./vendor-ethersproject/bignumber-DuyZ-PBD.js";import"./vendor-ethersproject/abstract-provider-BJATZ19F.js";import"./vendor-ethersproject/properties-Bism-GXA.js";import"./vendor-ethersproject/abstract-signer-vaofOY7d.js";import"./vendor-ethersproject/strings-BqJBhWqj.js";import"./vendor-ethersproject/hdnode-De1GriMn.js";import"./vendor-ethersproject/basex-GbQJAx3e.js";import"./vendor-ethersproject/signing-key-DZY4IiDE.js";import"./vendor-ethersproject/sha2-C3DRumhS.js";import"./vendor-ethersproject/wordlists-Bgp1_tq6.js";import"./vendor-ethersproject/pbkdf2-RF0eycJB.js";import"./vendor-ethersproject/json-wallets-DmRppK22.js";import"./vendor-aes-js-CVO7b-af.js";import"./vendor-scrypt-js-pU08l4Iy.js";import"./vendor-ethersproject/random-UwHXQyRf.js";import"./vendor-ethersproject/hash-CaQkUgof.js";import"./vendor-ethersproject/transactions-DgEmUiir.js";import"./vendor-irys/sdk-zMcAFY0m.js";import"./vendor-irys/query-BJ-9co3k.js";import"./vendor-near-js/crypto-DYaHgGqH.js";import"./vendor-borsh-uT6VLZDJ.js";import"./vendor-text-encoding-utf-8-CyyJ4wbt.js";import"./vendor-tweetnacl-DH0kfJ7g.js";import"./vendor-crypto-js-TDtrdbi3.js";import"./vendor-near-js/types-BW5UzBhQ.js";import"./vendor-near-js/keystores-browser-C7Ipq7jt.js";import"./vendor-near-js/keystores-DZ_AKmgs.js";import"./vendor-near-js/transactions-CNW8gb_X.js";import"./vendor-js-sha256-J9Bkl3or.js";import"./vendor-ethersproject/contracts-BfB5cMkz.js";import"./vendor-ethersproject/abi-BZPj2eRn.js";import"./vendor-ethersproject/constants-DnPC-4nq.js";import"./vendor-aptos-COdaePwy.js";import"./vendor-scure/base-BmqIkRj2.js";import"./vendor-supercharge/promise-pool-CxlJr3BL.js";import"./vendor-noble/curves-Bi3lEKLw.js";import"./vendor-noble/hashes-DJrKYuPd.js";import"./vendor-jayson-C-feTq4c.js";import"./vendor-uuid-42xqzRtG.js";import"./vendor-rpc-websockets-CS_NMCMZ.js";import"./vendor-vue-router-PmQVL-xb.js";import"./vendor-vuex-router-sync-DE8Azp4R.js";import"./vendor-socket.io-client-Bfvk10tG.js";import"./vendor-engine.io-client-sigXSzQJ.js";import"./vendor-engine.io-parser-BiEtp6m2.js";import"./vendor-socket.io/component-emitter-Dkula2eQ.js";import"./vendor-socket.io-parser-Cuf20g09.js";const K={name:"GameHistoryWidget",computed:{...O(["gameHistory"]),userTag(){return s.getters.userTag}},data(){return{lastAddedIndex:null}},watch:{gameHistory:{handler(a){a.length&&(this.lastAddedIndex=0,setTimeout(()=>{this.lastAddedIndex=null},3e3))}}},methods:{...N(["fetchGameHistory"]),formatDate(a){return new Date(a).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}},created(){this.fetchGameHistory()}},Q={class:"game-history-widget"},Z={class:"game-history-widget__section"},tt={class:"game-history-widget__wrap"},ot={key:0},et={key:1},it={key:0,class:"game-history-widget__description"};function rt(a,o,m,e,h,i){const d=T("router-link");return n(),l("div",Q,[t("div",Z,[t("div",tt,[a.gameHistory.length?(n(),l("table",ot,[o[0]||(o[0]=t("thead",null,[t("tr",null,[t("th",null,"Player"),t("th",null,"Score"),t("th",null,"Game Id"),t("th",null,"Date")])],-1)),t("tbody",null,[(n(!0),l(C,null,D(a.gameHistory,(u,f)=>(n(),l("tr",{key:f,class:W({highlight:f===h.lastAddedIndex,"game-history-widget__table-row-im":i.userTag==u.userTag})},[t("td",null,[_(d,{to:`/player/${u.userTag}`},{default:I(()=>[p(g(u.userTag),1)]),_:2},1032,["to"])]),t("td",null,g(u.score)+"‚Çø",1),t("td",null,[_(d,{to:`/games/${u.gameId}`},{default:I(()=>[p(g(u.gameId),1)]),_:2},1032,["to"])]),t("td",null,g(i.formatDate(u.timestamp)),1)],2))),128))])])):(n(),l("p",et,"No game history available"))])]),i.userTag?b("",!0):(n(),l("span",it,[o[2]||(o[2]=p("Only authorized players are shown in the game history. Visit ")),_(d,{to:"/my"},{default:I(()=>o[1]||(o[1]=[p("My Bitcat Page")])),_:1}),o[3]||(o[3]=p(" to get started!"))]))])}const st=S(K,[["render",rt],["__scopeId","data-v-e40bc36e"]]),at={class:"rules-header"},mt={__name:"RulesPopup",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(a){return(o,m)=>a.modelValue?(n(),l("div",{key:0,class:"rules-popup-overlay",onClick:m[2]||(m[2]=e=>o.$emit("update:modelValue",!1))},[t("div",{class:"rules-popup",onClick:m[1]||(m[1]=L(()=>{},["stop"]))},[t("div",at,[m[3]||(m[3]=t("h2",null,"Game Rules",-1)),t("button",{class:"close-button",onClick:m[0]||(m[0]=e=>o.$emit("update:modelValue",!1))},"√ó")]),m[4]||(m[4]=X('<div class="rules-content" data-v-bdd089e2><div class="rule-item" data-v-bdd089e2><h3 data-v-bdd089e2>üéØ Game Goal</h3><p data-v-bdd089e2>Feed your cat with coins and share your record on X(twitter)! The more coins you collect, the bigger your cat grows.</p></div><div class="rule-item" data-v-bdd089e2><h3 data-v-bdd089e2>‚è∞ Time</h3><p data-v-bdd089e2>You have 30 seconds. Collect bonus clocks for additional time (+10 seconds).</p></div><div class="rule-item" data-v-bdd089e2><h3 data-v-bdd089e2>‚ù§Ô∏è Lives</h3><p data-v-bdd089e2>Your cat has 9 lives. Each missed coin costs you one life. The game ends when you run out of lives or time!</p></div><div class="rule-item" data-v-bdd089e2><h3 data-v-bdd089e2>üí∞ Coins</h3><p data-v-bdd089e2>Small coins give more points. Large coins give fewer points. If you miss a coin, your score will be reduced.</p></div></div>',1))])])):b("",!0)}},lt=S(mt,[["__scopeId","data-v-bdd089e2"]]),nt={class:"share-header"},pt={class:"share-content"},dt={class:"share-preview"},ut={class:"share-text"},ct={__name:"SharePopup",props:{modelValue:Boolean,score:Number},emits:["update:modelValue"],setup(a,{emit:o}){const m=a,e=()=>{const h=`My $BITCAT score: ${m.score}‚Çø! üéÆ
Can you beat it? üèÜ
Play now at bitcat.fun/games üê± @bitcat_sol_ #BITCAT_GAME #BITCAT`,d=`https://twitter.com/intent/tweet?text=${encodeURIComponent(h)}&url=${encodeURIComponent("https://bitcat.fun/")}`;window.open(d,"_blank")};return(h,i)=>a.modelValue?(n(),l("div",{key:0,class:"share-popup-overlay",onClick:i[2]||(i[2]=d=>h.$emit("update:modelValue",!1))},[t("div",{class:"share-popup",onClick:i[1]||(i[1]=L(()=>{},["stop"]))},[t("div",nt,[i[3]||(i[3]=t("h2",null,"Share on X",-1)),t("button",{class:"close-button",onClick:i[0]||(i[0]=d=>h.$emit("update:modelValue",!1))},"√ó")]),t("div",pt,[t("div",dt,[i[6]||(i[6]=t("img",{src:J,alt:"BITCAT",class:"share-image"},null,-1)),t("div",ut,[t("p",null,"My BITCAT score: "+g(a.score)+"‚Çø! üéÆ",1),i[4]||(i[4]=t("p",null,"Can you beat it? üèÜ",-1)),i[5]||(i[5]=t("p",null,"Play now at bitcat.fun üê±",-1))])]),t("button",{class:"share-button",onClick:e}," Share on X ")])])])):b("",!0)}},gt=S(ct,[["__scopeId","data-v-bc560d00"]]),ht={name:"SoloGamePage",components:{RulesPopup:lt,SharePopup:gt,GameHistoryWidget:st},setup(){const a=k(null),o=k(!1),m=k(!1),e=k(!1),h=v(()=>s.state.game.score),i=v(()=>s.state.game.lives),d=v(()=>s.state.game.timeLeft),u=v(()=>s.state.game.coins),f=v(()=>s.state.game.isPlaying),r=v(()=>s.state.game.gameOver),G=v(()=>s.state.game.isFirstGame),P=v(()=>(console.log("Cat scale computed:",s.state.game.catScale),s.state.game.catScale||.5)),U=v(()=>s.state.error);R(P,(c,w)=>{console.log("Cat scale changed:",{old:w,new:c})}),R(r,c=>{c&&!G.value&&(m.value=!0)});const V=()=>{s.dispatch("initSocket")},$=()=>{e.value=!0,setTimeout(()=>{e.value=!1},5e3);const c=a.value.getBoundingClientRect();console.log("üéÆ Start Game - Store State:",{isAuthenticated:s.getters.isAuthenticated,userTag:s.getters.userTag}),s.state.socket||(console.log("Initializing socket"),V()),setTimeout(()=>{console.log("Dispatching startGame"),s.dispatch("startGame",{playerId:s.getters.userTag||"no_named_cat",width:c.width,height:c.height})},500)},z=c=>{if(!f.value)return;const w=a.value,y=w.getBoundingClientRect(),B=w.offsetWidth/y.width,x=w.offsetHeight/y.height,A=(c.clientX-y.left)*B,H=(c.clientY-y.top)*x;console.log("Click coordinates:",{x:A,y:H,scale:{scaleX:B,scaleY:x},client:{x:c.clientX,y:c.clientY},rect:{left:y.left,top:y.top,width:y.width,height:y.height}}),s.dispatch("handleCoinClick",{x:A,y:H})},M=()=>{s.dispatch("cleanup")};return Y(()=>{V()}),E(()=>{M(),document.body.style.overflow="auto"}),{gameField:a,showRules:o,showShare:m,catImage:j,coinImage:q,score:h,lives:i,timeLeft:d,coins:u,isPlaying:f,gameOver:r,isFirstGame:G,catScale:P,error:U,handleClick:z,startGameHandler:$,isButtonDisabled:e}}},vt={class:"game-container"},yt={class:"game-info"},ft={class:"score-panel"},bt={class:"score-item"},_t={class:"score-item"},wt={class:"score-item"},kt={class:"game-field-wrap"},Ct=["src"],Tt=["src"],St={class:"game-status"},It={key:0},Gt=["disabled"],Pt={key:0,class:"error-message"};function Vt(a,o,m,e,h,i){const d=T("GameHistoryWidget"),u=T("RulesPopup"),f=T("SharePopup");return n(),l("div",vt,[t("div",yt,[t("div",ft,[t("div",bt,[o[6]||(o[6]=p("Score: ")),t("span",null,g(e.score),1),o[7]||(o[7]=p("‚Çø"))]),t("div",_t,[o[8]||(o[8]=p("Lives: ")),t("span",null,g(e.lives),1)]),t("div",wt,[o[9]||(o[9]=p("Time: ")),t("span",null,g(e.timeLeft),1),o[10]||(o[10]=p("s"))])])]),t("div",kt,[t("div",{class:"game-field",ref:"gameField",onClick:o[0]||(o[0]=(...r)=>e.handleClick&&e.handleClick(...r))},[t("img",{src:e.catImage,class:"cat",style:F({transform:`translate(-50%, -50%) scale(${e.catScale})`}),alt:"Cat"},null,12,Ct),(n(!0),l(C,null,D(e.coins,r=>(n(),l("img",{key:r.id,src:e.coinImage,class:"coin",style:F({left:r.x-r.size/2+"px",top:r.y-r.size/2+"px",width:r.size+"px",height:r.size+"px"}),alt:"Coin"},null,12,Tt))),128))],512),t("div",St,[e.gameOver?(n(),l(C,{key:0},[e.isFirstGame?(n(),l("h2",It,o[11]||(o[11]=[p("Let's play and"),t("br",null,null,-1),p("PUMP the cat!")]))):(n(),l(C,{key:1},[o[12]||(o[12]=t("h2",{class:"game-over-title"},"BITCAT PUMPED!",-1)),t("p",null,"Your score: "+g(e.score)+"‚Çø",1)],64)),t("button",{class:"play-button",disabled:e.isButtonDisabled,onClick:o[1]||(o[1]=(...r)=>e.startGameHandler&&e.startGameHandler(...r))},g(e.isFirstGame?"Play":"Play Again"),9,Gt),e.gameOver&&!e.isFirstGame?(n(),l("button",{key:2,class:"share-button",onClick:o[2]||(o[2]=r=>e.showShare=!0)},"Share")):b("",!0),e.isFirstGame?(n(),l("button",{key:3,class:"rules-button",onClick:o[3]||(o[3]=r=>e.showRules=!0)},"Rules")):b("",!0)],64)):b("",!0)])]),e.error?(n(),l("div",Pt,g(e.error),1)):b("",!0),_(d),_(u,{modelValue:e.showRules,"onUpdate:modelValue":o[4]||(o[4]=r=>e.showRules=r)},null,8,["modelValue"]),_(f,{modelValue:e.showShare,"onUpdate:modelValue":o[5]||(o[5]=r=>e.showShare=r),score:e.score},null,8,["modelValue","score"])])}const Qi=S(ht,[["render",Vt],["__scopeId","data-v-2669cbbc"]]);export{Qi as default};
