import{a as u}from"./vendor-axios-Hz4xvOoZ.js";import{u as T}from"./vendor-vuex-KmQPsw4D.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as g}from"./vendor-vue/reactivity-CqT5sv9X.js";import{E as N,h as o,i as t,F as h,l as b,r as y,o as s,k as m,m as c,j as v,e as x}from"./vendor-vue/runtime-core-CL52-QWR.js";import{t as n,b as F}from"./vendor-vue/shared-lLteBOIO.js";import"./vendor-process-DXjpGiAn.js";import"./solana-vendors-DGPAp7Fj.js";import"./vendor-buffer-DVXvU5G6.js";import"./vendor-base64-js-C2zTC7ec.js";import"./vendor-ieee754-vIlwft-x.js";import"./vendor-events-cQ9mhZQJ.js";import"./vendor-lodash.isequal-D20p4pc-.js";import"./vendor-elliptic-BTxzAQL_.js";import"./vendor-minimalistic-assert-OF9c2MWr.js";import"./vendor-minimalistic-crypto-utils-DpWPKLSp.js";import"./vendor-brorand-6pV8Y5jC.js";import"./vendor-crypto-browserify-NMg_40A5.js";import"./vendor-randombytes-ndKo2FAH.js";import"./vendor-safe-buffer-BPihLaHX.js";import"./vendor-create-hash-BsmGkCgx.js";import"./vendor-inherits-BICa84dG.js";import"./vendor-md5.js-BmCTTIue.js";import"./vendor-hash-base-CXljNKss.js";import"./vendor-readable-stream-BpYOL4VF.js";import"./vendor-asn1.js-Cgb4HcA4.js";import"./vendor-util-deprecate-C5bwERXh.js";import"./vendor-string_decoder-CzqD1_ea.js";import"./vendor-ripemd160-B-g9_ZaO.js";import"./vendor-sha.js-C_Iv65sP.js";import"./vendor-cipher-base-CVoreX1z.js";import"./vendor-stream-browserify-BiXhMpOM.js";import"./vendor-create-hmac-Dt8PQ7js.js";import"./vendor-browserify-sign-DLX2f2Lw.js";import"./vendor-process-nextick-args-DZA8cFXf.js";import"./vendor-core-util-is-OG-hh3cz.js";import"./vendor-browserify-rsa-DRghgnJS.js";import"./vendor-bn.js-CN51n21Z.js";import"./vendor-parse-asn1-CnRUGrVC.js";import"./vendor-evp_bytestokey-V5JLH1pP.js";import"./vendor-browserify-aes-Dzp1Wr7h.js";import"./vendor-buffer-xor-BGVZWPAd.js";import"./vendor-pbkdf2-D8c51p7I.js";import"./vendor-browserify-cipher-CRpPeA_V.js";import"./vendor-browserify-des-7ZFmx5Md.js";import"./vendor-des.js-DyWMuwdI.js";import"./vendor-diffie-hellman-CdruneMD.js";import"./vendor-miller-rabin-D60nYGZr.js";import"./vendor-create-ecdh-D3sJE6Oq.js";import"./vendor-public-encrypt-BRl7BMPZ.js";import"./vendor-randomfill-PyDjCq6P.js";import"./vendor-hash.js-Dda3EUYz.js";import"./vendor-hmac-drbg-Ss9liF53.js";import"./vendor-vue/runtime-dom-Ll8vq9eS.js";import"./vendor-vueuse/core-Dowf-keF.js";import"./vendor-vueuse/shared-D4hqHlE2.js";import"./vendor-eventemitter3-C1FPriCL.js";import"./vendor-bignumber.js-Dj_rIxHg.js";import"./vendor-bigint-buffer-5mUCZ2jv.js";import"./vendor-noble/ed25519-DHS8bCE8.js";import"./vendor-node-fetch-DFwHyKwz.js";import"./vendor-url-Fv_L5Bhg.js";import"./vendor-qs-CKXrMD_V.js";import"./vendor-side-channel-CjkecZmv.js";import"./vendor-es-errors-CxTyLFAO.js";import"./vendor-object-inspect-C0kqJKki.js";import"./vendor-side-channel-list-DJbPV7dX.js";import"./vendor-side-channel-map-OCAkmCSB.js";import"./vendor-get-intrinsic-Ci-jyTpD.js";import"./vendor-es-object-atoms-BR76m4z7.js";import"./vendor-math-intrinsics-DP1tGiab.js";import"./vendor-gopd-C1lCZ5Qs.js";import"./vendor-es-define-property-D_7cP-M3.js";import"./vendor-has-symbols-CySAGvJ4.js";import"./vendor-get-proto-BI0zWv-p.js";import"./vendor-dunder-proto-5sdYuMkY.js";import"./vendor-call-bind-apply-helpers-BfAPCzjd.js";import"./vendor-function-bind-CHqF18-c.js";import"./vendor-hasown-CH2RbkDu.js";import"./vendor-call-bound-nPIHF2bX.js";import"./vendor-side-channel-weakmap-D938crsm.js";import"./vendor-whatwg-url-BNoC3hI6.js";import"./vendor-webidl-conversions-DuBT_cRJ.js";import"./vendor-punycode-BGZJxaHx.js";import"./vendor-tr46-_6nBz5KS.js";import"./vendor-mime-DOJa-gVj.js";import"./vendor-assert-CCtLV3vt.js";import"./vendor-util-BEO2nGWh.js";import"./vendor-is-arguments-D-oLGwWh.js";import"./vendor-has-tostringtag-BU9GnA_1.js";import"./vendor-is-generator-function-Bk_W3rfd.js";import"./vendor-safe-regex-test-BtqTbUmV.js";import"./vendor-is-regex-BKTFpgjH.js";import"./vendor-which-typed-array-Bufg-IXZ.js";import"./vendor-for-each-HvIZAWYy.js";import"./vendor-is-callable-BYFz_UGF.js";import"./vendor-available-typed-arrays-uQGnJldC.js";import"./vendor-possible-typed-array-names-BKRybAhF.js";import"./vendor-call-bind-3YpglFCb.js";import"./vendor-set-function-length-Cm7PFPrZ.js";import"./vendor-define-data-property-BppnLwnj.js";import"./vendor-has-property-descriptors-ChC8uhsk.js";import"./vendor-is-typed-array-CZaxorcA.js";import"./vendor-object.assign-D0NKsUk4.js";import"./vendor-object-keys-BRu_Tray.js";import"./vendor-object-is-DkNyiNMZ.js";import"./vendor-define-properties-CgTwYkbs.js";import"./vendor-is-nan-BtAA6g8u.js";import"./vendor-debug-DLVl9QA3.js";import"./vendor-ms-CzQ2E3wO.js";import"./vendor-babel/runtime-w7AU6ifp.js";import"./vendor-js-sha3-DkKfOMXT.js";import"./vendor-typescript-collections-DaJ0MJpz.js";import"./vendor-lodash.clonedeep-C3jeG2fR.js";import"./vendor-ansicolors-BFAL4nhq.js";import"./vendor-bs58-DhqqakFZ.js";import"./vendor-base-x-BHV1Xppf.js";import"./vendor-base64url-D1J1q9RC.js";import"./vendor-arbundles-CR3XhIxB.js";import"./vendor-async-retry-DWdC6xTk.js";import"./vendor-retry-ByBYrtbW.js";import"./vendor-irys/arweave-CO_npObX.js";import"./vendor-safer-buffer-CIAg7E_-.js";import"./vendor-secp256k1-gx_3s_gH.js";import"./vendor-keccak-Bl_8Z6TM.js";import"./vendor-ethersproject/bytes-BFUO92dS.js";import"./vendor-ethersproject/logger-BIOSViGG.js";import"./vendor-ethersproject/wallet-_-D8aoNy.js";import"./vendor-ethersproject/address-C-94Rlzo.js";import"./vendor-ethersproject/keccak256-BpI13PIi.js";import"./vendor-ethersproject/rlp-L8r_OHwd.js";import"./vendor-ethersproject/bignumber-DuyZ-PBD.js";import"./vendor-ethersproject/abstract-provider-BJATZ19F.js";import"./vendor-ethersproject/properties-Bism-GXA.js";import"./vendor-ethersproject/abstract-signer-vaofOY7d.js";import"./vendor-ethersproject/strings-BqJBhWqj.js";import"./vendor-ethersproject/hdnode-De1GriMn.js";import"./vendor-ethersproject/basex-GbQJAx3e.js";import"./vendor-ethersproject/signing-key-DZY4IiDE.js";import"./vendor-ethersproject/sha2-C3DRumhS.js";import"./vendor-ethersproject/wordlists-Bgp1_tq6.js";import"./vendor-ethersproject/pbkdf2-RF0eycJB.js";import"./vendor-ethersproject/json-wallets-DmRppK22.js";import"./vendor-aes-js-CVO7b-af.js";import"./vendor-scrypt-js-pU08l4Iy.js";import"./vendor-ethersproject/random-UwHXQyRf.js";import"./vendor-ethersproject/hash-CaQkUgof.js";import"./vendor-ethersproject/transactions-DgEmUiir.js";import"./vendor-irys/sdk-zMcAFY0m.js";import"./vendor-irys/query-BJ-9co3k.js";import"./vendor-near-js/crypto-DYaHgGqH.js";import"./vendor-borsh-uT6VLZDJ.js";import"./vendor-text-encoding-utf-8-CyyJ4wbt.js";import"./vendor-tweetnacl-DH0kfJ7g.js";import"./vendor-crypto-js-TDtrdbi3.js";import"./vendor-near-js/types-BW5UzBhQ.js";import"./vendor-near-js/keystores-browser-C7Ipq7jt.js";import"./vendor-near-js/keystores-DZ_AKmgs.js";import"./vendor-near-js/transactions-CNW8gb_X.js";import"./vendor-js-sha256-J9Bkl3or.js";import"./vendor-ethersproject/contracts-BfB5cMkz.js";import"./vendor-ethersproject/abi-BZPj2eRn.js";import"./vendor-ethersproject/constants-DnPC-4nq.js";import"./vendor-aptos-COdaePwy.js";import"./vendor-scure/base-BmqIkRj2.js";import"./vendor-supercharge/promise-pool-CxlJr3BL.js";import"./vendor-noble/curves-Bi3lEKLw.js";import"./vendor-noble/hashes-DJrKYuPd.js";import"./vendor-jayson-C-feTq4c.js";import"./vendor-uuid-42xqzRtG.js";import"./vendor-rpc-websockets-CS_NMCMZ.js";import"./vendor-vue/devtools-api-Cow_pXkh.js";const D={name:"NftRentalHistory",props:{mint:{type:String,required:!0}},setup(a){T();const i=g(!0),d=g([]),l=async()=>{try{i.value=!0;const e=await u.get(`/nft-rental/nft/${a.mint}/history`);d.value=e.data.history||[]}catch(e){console.error("Error fetching NFT rental history:",e)}finally{i.value=!1}},r=e=>parseFloat(e).toFixed(3),f=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",_=e=>{const p=`https://explorer.solana.com/tx/${e}`;window.open(p,"_blank")};return N(()=>{a.mint&&l()}),{loading:i,rentalHistory:d,formatPrice:r,formatDate:f,viewTransaction:_}}},P={class:"nft-rental-history"},S={key:0,class:"loading-container"},E={key:1,class:"empty-state"},R={key:2,class:"rental-history-grid"},C={class:"rental-card-header"},L={class:"rental-price"},U=["onClick"],M={class:"rental-card-body"},H={class:"rental-detail-row"},K={class:"rental-detail-row"},V={class:"detail-label"};function A(a,i,d,l,r,f){const _=y("router-link");return s(),o("div",P,[i[6]||(i[6]=t("h3",{class:"section-title"},"Rental History",-1)),l.loading?(s(),o("div",S,i[0]||(i[0]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Loading rental history...",-1)]))):l.rentalHistory.length===0?(s(),o("div",E,i[1]||(i[1]=[t("p",null,"This NFT has not been rented yet.",-1)]))):(s(),o("div",R,[(s(!0),o(h,null,b(l.rentalHistory,e=>(s(),o("div",{key:e.id,class:"rental-card"},[t("div",C,[t("div",L,[i[2]||(i[2]=t("i",{class:"fas fa-coins"},null,-1)),c(" "+n(l.formatPrice(e.price))+" SOL ",1)]),e.transaction?(s(),o("button",{key:0,onClick:p=>l.viewTransaction(e.transaction),class:"view-tx-button"},i[3]||(i[3]=[t("i",{class:"fas fa-receipt"},null,-1),c(" TX ")]),8,U)):m("",!0)]),t("div",M,[t("div",H,[i[4]||(i[4]=t("span",{class:"detail-label"},[t("i",{class:"fas fa-user"}),c(" Rented By:")],-1)),v(_,{to:`/player/${e.rentedBy}`,class:"user-link"},{default:x(()=>[c(n(e.rentedBy),1)]),_:2},1032,["to"])]),t("div",K,[t("span",V,[i[5]||(i[5]=t("i",{class:"fas fa-calendar-day"},null,-1)),c(" "+n(l.formatDate(e.startDate))+" for "+n(e.days)+" day(s)",1)])])])]))),128))]))])}const I=k(D,[["render",A],["__scopeId","data-v-4885dc70"]]),B={name:"NftViewPage",components:{NftRentalHistory:I},data(){return{nft:null,loading:!0,error:null,copied:null,metadata:null,metadataLoading:!1,metadataError:null}},created(){this.fetchNftData()},methods:{async fetchNftData(){var a,i;this.loading=!0,this.error=null;try{const d=this.$route.params.assetPublicKey,l=await u.get(`/nft-bitcat/nft/${d}`);l.data.success?(this.nft=l.data.nft,this.nft.metadataUri&&this.fetchMetadata(this.nft.metadataUri)):this.error=l.data.message||"Failed to load NFT data"}catch(d){console.error("Error fetching NFT data:",d),this.error=((i=(a=d.response)==null?void 0:a.data)==null?void 0:i.message)||"An error occurred while fetching NFT data"}finally{this.loading=!1}},async fetchMetadata(a){this.metadataLoading=!0,this.metadataError=null;try{let i;try{i=await u.get(a,{headers:{Accept:"application/json"}})}catch(d){console.warn("Direct metadata fetch failed, trying CORS proxy:",d);const l=`https://cors-anywhere.herokuapp.com/${a}`;i=await u.get(l,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})}this.metadata=i.data,console.log("Metadata loaded:",this.metadata)}catch(i){console.error("Error fetching metadata:",i),this.metadataError="Failed to load metadata information. CORS policy might be blocking the request."}finally{this.metadataLoading=!1}},formatDate(a){return a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""},copyToClipboard(a,i){navigator.clipboard.writeText(a).then(()=>{this.copied=i,this.$toast.success("Copied to clipboard!",{position:"top-right",duration:2e3}),setTimeout(()=>{this.copied=null},2e3)}).catch(d=>{console.error("Failed to copy text: ",d),this.$toast.error("Failed to copy to clipboard",{position:"top-right",duration:2e3})})}}},q={class:"nft-view"},X={class:"nft-view__container"},j={key:0,class:"nft-view__loader"},O={key:1,class:"nft-view__error"},W={class:"nft-view__error-message"},z={key:2,class:"nft-card"},J={class:"nft-card__header"},G={class:"nft-card__title"},Z={class:"nft-card__date"},Q={class:"nft-card__content"},Y={class:"nft-card__image-wrapper"},$={class:"nft-card__image-container"},tt=["src","alt"],it={class:"nft-card__metadata"},rt={key:0,class:"nft-card__metadata-not-available"},ot={key:1,class:"nft-card__metadata-loading"},st={key:2,class:"nft-card__metadata-error"},et={key:0,class:"nft-card__metadata-section"},nt={class:"nft-card__description"},at={key:1,class:"nft-card__metadata-section"},lt={class:"nft-card__attributes"},dt={class:"nft-card__attribute-trait"},ct={class:"nft-card__attribute-value"},mt={key:0,class:"nft-card__attribute-max-value"},pt={class:"nft-card__details"},_t={class:"nft-card__section"},ft={class:"nft-card__info-list"},ut={class:"nft-card__info-item"},ht={class:"nft-card__info-value-container"},yt={key:0,class:"nft-card__info-item"},vt={class:"nft-card__info-value-container"},gt={key:1,class:"nft-card__info-item"},kt=["href"],bt={key:2,class:"nft-card__info-item"},xt=["href"],wt={key:3,class:"nft-card__info-item"},Tt={class:"nft-card__info-item"},Nt={class:"nft-card__section nft-card__section--links"},Ft={class:"nft-card__links"},Dt=["href"],Pt=["href"],St=["href"],Et=["href"],Rt={class:"nft-card__section nft-card__section--rental-history"},Ct={key:3,class:"nft-view__not-found"};function Lt(a,i,d,l,r,f){const _=y("router-link"),e=y("NftRentalHistory");return s(),o("div",q,[t("div",X,[r.loading?(s(),o("div",j,i[0]||(i[0]=[t("div",{class:"nft-view__spinner"},null,-1)]))):r.error?(s(),o("div",O,[i[1]||(i[1]=t("h2",{class:"nft-view__error-title"},"Error",-1)),t("p",W,n(r.error),1)])):r.nft?(s(),o("div",z,[t("div",J,[t("h1",G,n(r.metadata&&r.metadata.name?r.metadata.name:r.nft.name),1),t("p",Z,"Created: "+n(f.formatDate(r.nft.createdAt)),1)]),t("div",Q,[t("div",Y,[t("div",$,[t("img",{src:r.nft.imageUri,alt:r.nft.name,class:"nft-card__image"},null,8,tt)]),t("div",it,[r.nft.metadataUri?r.metadataLoading?(s(),o("div",ot,i[3]||(i[3]=[t("div",{class:"nft-card__metadata-spinner"},null,-1),t("p",null,"Loading metadata...",-1)]))):r.metadataError?(s(),o("div",st,[t("p",null,n(r.metadataError),1)])):r.metadata?(s(),o(h,{key:3},[r.metadata.description?(s(),o("div",et,[i[4]||(i[4]=t("h3",{class:"nft-card__section-title"},"Description",-1)),t("p",nt,n(r.metadata.description),1)])):m("",!0),r.metadata.attributes&&r.metadata.attributes.length>0?(s(),o("div",at,[i[5]||(i[5]=t("h3",{class:"nft-card__section-title"},"Attributes",-1)),t("div",lt,[(s(!0),o(h,null,b(r.metadata.attributes,(p,w)=>(s(),o("div",{class:"nft-card__attribute",key:w},[t("span",dt,n(p.trait_type),1),t("span",ct,[c(n(p.value)+" ",1),p.max_value?(s(),o("span",mt,"/"+n(p.max_value),1)):m("",!0)])]))),128))])])):m("",!0)],64)):m("",!0):(s(),o("div",rt,i[2]||(i[2]=[t("p",null,"Metadata information is not available for this NFT.",-1)])))])]),t("div",pt,[t("div",_t,[i[20]||(i[20]=t("h3",{class:"nft-card__section-title"},"Asset Details",-1)),t("div",ft,[t("div",ut,[i[6]||(i[6]=t("span",{class:"nft-card__info-label"},"Asset Public Key",-1)),t("div",ht,[t("span",{class:"nft-card__info-value nft-card__info-value--code",ref:"assetPublicKey"},n(r.nft.assetPublicKey),513)])]),i[14]||(i[14]=t("div",{class:"nft-card__info-item"},[t("span",{class:"nft-card__info-label"},"Authority"),t("div",{class:"nft-card__info-value-container"},[t("span",{class:"nft-card__info-value nft-card__info-value--code"},"bitcat5mMocyMZJWmiJ62T8gtFWGrRDr99Nz1bXR3ud")])],-1)),r.nft.txSignature?(s(),o("div",yt,[i[7]||(i[7]=t("span",{class:"nft-card__info-label"},"Transaction Signature",-1)),t("div",vt,[t("span",{class:"nft-card__info-value nft-card__info-value--code",ref:"txSignature"},n(r.nft.txSignature),513)])])):m("",!0),r.nft.metadataUri?(s(),o("div",gt,[i[9]||(i[9]=t("span",{class:"nft-card__info-label"},"Metadata URI",-1)),t("a",{href:r.nft.metadataUri,target:"_blank",class:"nft-card__link nft-card__link--uri"},[c(n(r.nft.metadataUri)+" ",1),i[8]||(i[8]=t("i",{class:"fas fa-external-link-alt nft-card__link-icon"},null,-1))],8,kt)])):m("",!0),r.nft.postId?(s(),o("div",bt,[i[11]||(i[11]=t("span",{class:"nft-card__info-label"},"Twitter Post ID",-1)),t("a",{href:`https://twitter.com/i/web/status/${r.nft.postId}`,target:"_blank",class:"nft-card__link"},[c(n(r.nft.postId)+" ",1),i[10]||(i[10]=t("i",{class:"fas fa-external-link-alt nft-card__link-icon"},null,-1))],8,xt)])):m("",!0),r.nft.postId?(s(),o("div",wt,[i[12]||(i[12]=t("span",{class:"nft-card__info-label"},"Minted for",-1)),v(_,{to:`/player-nfts/${r.nft.userTag}`,class:"nft-card__link"},{default:x(()=>[c(n(r.nft.userTag),1)]),_:1},8,["to"])])):m("",!0),t("div",Tt,[i[13]||(i[13]=t("span",{class:"nft-card__info-label"},"Status",-1)),t("span",{class:F(["nft-card__status",{"nft-card__status--completed":r.nft.status==="completed","nft-card__status--pending":r.nft.status==="pending","nft-card__status--failed":r.nft.status==="failed"}])},n(r.nft.status.charAt(0).toUpperCase()+r.nft.status.slice(1)),3)])]),t("div",Nt,[i[19]||(i[19]=t("h3",{class:"nft-card__section-title"},"External Links",-1)),t("div",Ft,[t("a",{href:`https://explorer.solana.com/address/${r.nft.assetPublicKey}?cluster=mainnet`,target:"_blank",class:"nft-card__external-link"},i[15]||(i[15]=[t("i",{class:"fas fa-external-link-alt nft-card__external-link-icon"},null,-1),c(" View on Solana Explorer ")]),8,Dt),t("a",{href:`https://core.metaplex.com/explorer/${r.nft.assetPublicKey}`,target:"_blank",class:"nft-card__external-link"},i[16]||(i[16]=[t("i",{class:"fas fa-external-link-alt nft-card__external-link-icon"},null,-1),c(" View on Metaplex ")]),8,Pt),t("a",{href:`https://solscan.io/token/${r.nft.assetPublicKey}`,target:"_blank",class:"nft-card__external-link"},i[17]||(i[17]=[t("i",{class:"fas fa-external-link-alt nft-card__external-link-icon"},null,-1),c(" View on Solscan ")]),8,St),t("a",{href:`https://www.tensor.trade/item/${r.nft.assetPublicKey}`,target:"_blank",class:"nft-card__external-link"},i[18]||(i[18]=[t("i",{class:"fas fa-external-link-alt nft-card__external-link-icon"},null,-1),c(" View on Tensor ")]),8,Et)])])])])]),t("div",Rt,[v(e,{mint:r.nft.assetPublicKey},null,8,["mint"])])])):(s(),o("div",Ct,i[21]||(i[21]=[t("h2",{class:"nft-view__not-found-title"},"NFT Not Found",-1),t("p",{class:"nft-view__not-found-message"},"The requested NFT could not be found.",-1)])))])])}const Oo=k(B,[["render",Lt],["__scopeId","data-v-f0a6d313"]]);export{Oo as default};
